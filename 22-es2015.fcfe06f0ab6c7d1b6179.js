(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{AWRA:function(t,e,n){"use strict";n.r(e),n.d(e,"SubscriptionPageModule",(function(){return I}));var i=n("ofXK"),a=n("3Pt+"),c=n("tyNb"),b=n("TEn/"),s=n("+DAS"),o=n("ybIa"),r=n("YKLQ"),d=n("i2Ty"),p=n("rIxz"),u=n("PWOX"),m=n("dMTE"),l=n("wd/R"),g=n("cBbZ"),h=n("G2i7"),y=n("tk/3"),f=n("un/a"),W=n("fXoL"),V=n("0IaG"),M=n("Wp6s"),v=n("bTqV");function w(t,e){1&t&&(W.Wb(0,"div"),W.Wb(1,"h1"),W.Mc(2," Your subscription Ended, Please Renew..."),W.Vb(),W.Vb())}function x(t,e){if(1&t){const t=W.Xb();W.Wb(0,"div",17),W.Wb(1,"div",18),W.Wb(2,"mat-card",19),W.Wb(3,"div",20),W.Mc(4,"Basic"),W.Vb(),W.Wb(5,"mat-card-content"),W.Wb(6,"h4",21),W.Mc(7,"6 Months"),W.Vb(),W.Wb(8,"p"),W.Mc(9,"Your Store will be activated for 06 months in "),W.Vb(),W.Wb(10,"div"),W.Wb(11,"b"),W.Mc(12),W.Vb(),W.Vb(),W.Vb(),W.Wb(13,"mat-card-footer"),W.Wb(14,"div",13),W.Wb(15,"button",22),W.ec("click",(function(){return W.Cc(t),W.ic().renew(6)})),W.Mc(16,"Renew"),W.Vb(),W.Vb(),W.Vb(),W.Vb(),W.Wb(17,"mat-card",23),W.Wb(18,"div",24),W.Mc(19,"Premium"),W.Vb(),W.Wb(20,"mat-card-content"),W.Wb(21,"h4",21),W.Mc(22,"12 Months"),W.Vb(),W.Wb(23,"p"),W.Mc(24,"Your Store will be activated for 12 months in "),W.Vb(),W.Wb(25,"div"),W.Wb(26,"b"),W.Mc(27),W.Vb(),W.Vb(),W.Vb(),W.Wb(28,"mat-card-footer"),W.Wb(29,"div",13),W.Wb(30,"button",25),W.ec("click",(function(){return W.Cc(t),W.ic().renew(12)})),W.Mc(31,"Renew"),W.Vb(),W.Vb(),W.Vb(),W.Vb(),W.Vb(),W.Vb()}if(2&t){const t=W.ic();W.Db(12),W.Oc("",t.ygen.getcurrencysymbol()," 3,999"),W.Db(15),W.Oc("",t.ygen.getcurrencysymbol()," 5,999")}}function O(t,e){if(1&t){const t=W.Xb();W.Wb(0,"div",26),W.Wb(1,"div",27),W.Wb(2,"input",28),W.ec("ngModelChange",(function(e){return W.Cc(t),W.ic().numberofdays=e})),W.Vb(),W.Vb(),W.Wb(3,"div"),W.Wb(4,"button",29),W.ec("click",(function(){return W.Cc(t),W.ic().addDays()})),W.Mc(5,"Add Grace Days"),W.Vb(),W.Vb(),W.Vb()}if(2&t){const t=W.ic();W.Db(2),W.rc("ngModel",t.numberofdays)}}function D(t,e){if(1&t&&(W.Wb(0,"mat-card",3),W.Wb(1,"mat-card-header"),W.Wb(2,"mat-card-title"),W.Mc(3,"Your Payment History"),W.Vb(),W.Vb(),W.Wb(4,"mat-card-content"),W.Wb(5,"div",5),W.Wb(6,"div",6),W.Mc(7,"Paid on"),W.Vb(),W.Wb(8,"div",7),W.Mc(9),W.Vb(),W.Vb(),W.Wb(10,"div",5),W.Wb(11,"div",6),W.Mc(12,"Paid For"),W.Vb(),W.Wb(13,"div",7),W.Mc(14),W.Vb(),W.Vb(),W.Wb(15,"div",5),W.Wb(16,"div",6),W.Mc(17,"Paid Reference"),W.Vb(),W.Wb(18,"div",7),W.Mc(19),W.Vb(),W.Vb(),W.Vb(),W.Vb()),2&t){const t=e.$implicit,n=W.ic();W.Db(9),W.Oc("",n.ygen.formatTimestampToDate(t.paydate)," "),W.Db(5),W.Pc("",n.ygen.getcurrencysymbol()," ",t.amount," "),W.Db(5),W.Oc("",n.ygen.formatTimestampToDate(null==t.paymentResponse?null:t.paymentResponse.payment_id)," ")}}let P=(()=>{class t{constructor(t,e,n,i,a,c,b,s,r,d,p){this.events=t,this.http=e,this.ypay=n,this.yauth=i,this.ygen=a,this.alertme=c,this.route=b,this.router=s,this.ysharedata=r,this.ydata=d,this.dialog=p,this.priceitem={},this.subscription={},this.crudList=new o.a(h.a.getpath()+"/launchapp/renewpayments",d.getDatabase(),!0,this.ygen.getUid()),this.priceitem=this.yauth.getappSettings()}ngOnInit(){this.renewlist=this.crudList.getList(),this.subscription=this.yauth.subscriptionaccount}navigate(t,e){this.ysharedata.setData("currentevent",e),this.router.navigate([t],{queryParams:e})}renew(t){let e=6==t?this.priceitem.appsix?this.priceitem.appsix:3999:this.priceitem.apptwelve?this.priceitem.apptwelve:5999,n="business";12==t&&(n="premium");let i=this.ydata.getDatabase().createPushId();this.ypay.pay({sendorderid:i,renewapp:!0,isorder:!1,amount:e}),this.events.subscribe("renew:success["+i+"]",e=>{this.events.unsubscribe("renew:success["+i+"]");let a=+new Date,c=30*t+7,b=+l(new Date(a)).add(c,"days");this.yauth.subscriptionaccount.subscriptiondate=b,this.yauth.issubscriptionon=!0,this.yauth.subscriptiontype=n,this.subscription=this.yauth.subscriptionaccount,this.ydata.getDatabase().object(h.a.getpath()+"/launchapp").update({subscriptiondate:b,subscriptiontype:n});let s=this.ydata.getDatabase().createPushId();this.crudList.getListRefer().set(s,e),this.capturepayment(e),this.alertme.successdata("You have Successfully Renewed your Subscription with us, Congratulations").then(t=>{console.log("done11",t),this.events.publish("shop:checksubscription")})})}addDays(){this.yauth.addDaysToSubscription(this.numberofdays)}capturepayment(t){this.yauth.getappSettings();let e=`https://guarded-sea-64699.herokuapp.com/rest/razor/renew?testmode=true&paymentid=${t.paymentResponse.payment_id}`,n={amount:100*t.amount,currency:"INR"};const i={headers:new y.d({"Content-Type":"application/json",Authorization:"yoyo"})};this.http.post(e,n,i).pipe(Object(f.a)(2)).subscribe(t=>{console.log("capture payment",t)},t=>{})}}return t.\u0275fac=function(e){return new(e||t)(W.Qb(g.a),W.Qb(y.b),W.Qb(m.a),W.Qb(u.a),W.Qb(p.a),W.Qb(d.a),W.Qb(c.a),W.Qb(c.j),W.Qb(r.a),W.Qb(s.a),W.Qb(V.b))},t.\u0275cmp=W.Kb({type:t,selectors:[["app-subscription"]],decls:44,vars:11,consts:[[3,"color"],["slot","start"],[1,"ion-padding"],[1,"example-card"],["mat-card-avatar","",1,"example-header-image"],[1,"container"],[1,"item","ylable"],[1,"item","ytext"],[1,"ycricle"],[1,"counter"],[1,"dte"],[4,"ngIf"],["class","pricetable","style","display: flex;",4,"ngIf"],[1,"containerb"],["mat-button","","color","warning","routerLink","/dashboard"],["style","padding: 20px;display: flex; flex-direction: column; align-items: center;",4,"ngIf"],["class","example-card",4,"ngFor","ngForOf"],[1,"pricetable",2,"display","flex"],[1,"md-padding"],[1,"priceclass","basicback"],[1,"myhead","basic"],["layout","row","layout-align","center",1,"md-title"],["mat-button","","color","warning",3,"click"],[1,"priceclass","preimumback"],[1,"myhead","premium"],["mat-button","",3,"click"],[2,"padding","20px","display","flex","flex-direction","column","align-items","center"],[2,"font-size","xxx-large"],["min","1","max","360","type","number","placeholder","Add number of days",3,"ngModel","ngModelChange"],["mat-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(W.Wb(0,"ion-toolbar",0),W.Wb(1,"ion-buttons",1),W.Rb(2,"ion-menu-button"),W.Vb(),W.Wb(3,"ion-buttons",1),W.Rb(4,"ion-back-button"),W.Vb(),W.Wb(5,"ion-title"),W.Mc(6,"Subscription Information"),W.Vb(),W.Vb(),W.Wb(7,"ion-content",2),W.Wb(8,"mat-card",3),W.Wb(9,"mat-card-header"),W.Rb(10,"div",4),W.Wb(11,"mat-card-title"),W.Mc(12,"Your Store Subscription"),W.Vb(),W.Vb(),W.Wb(13,"mat-card-content"),W.Wb(14,"div",5),W.Wb(15,"div",6),W.Mc(16,"Store Launch on"),W.Vb(),W.Wb(17,"div",7),W.Mc(18),W.Vb(),W.Vb(),W.Wb(19,"div",5),W.Wb(20,"div",6),W.Mc(21,"Subscription End Date"),W.Vb(),W.Wb(22,"div",7),W.Mc(23),W.Vb(),W.Vb(),W.Wb(24,"div",5),W.Wb(25,"div",6),W.Mc(26,"Current Subscription"),W.Vb(),W.Wb(27,"div",7),W.Mc(28),W.Vb(),W.Vb(),W.Wb(29,"div"),W.Wb(30,"div",8),W.Wb(31,"div",9),W.Mc(32),W.Vb(),W.Vb(),W.Wb(33,"div",10),W.Mc(34,"Days to Expiry"),W.Vb(),W.Vb(),W.Kc(35,w,3,0,"div",11),W.Kc(36,x,32,2,"div",12),W.Vb(),W.Wb(37,"mat-card-actions"),W.Wb(38,"div",13),W.Wb(39,"button",14),W.Mc(40,"Cancel"),W.Vb(),W.Vb(),W.Vb(),W.Vb(),W.Kc(41,O,6,1,"div",15),W.Kc(42,D,20,4,"mat-card",16),W.jc(43,"async"),W.Vb()),2&t&&(W.rc("color","warning"),W.Db(18),W.Oc("",e.ygen.formatTimestampToDate(e.subscription.lanunchdate)," "),W.Db(5),W.Oc("",e.ygen.formatTimestampToDate(e.subscription.subscriptiondate)," "),W.Db(5),W.Oc("",e.ygen.getSubscriptionType()," "),W.Db(4),W.Oc(" ",e.subscription.subscriptiondaysremaining," "),W.Db(3),W.rc("ngIf",!e.subscription.issubscriptionon),W.Db(1),W.rc("ngIf",e.subscription.subscriptiondaysremaining<=14),W.Db(5),W.rc("ngIf",e.ygen.isSuperAdmin()),W.Db(1),W.rc("ngForOf",W.kc(43,9,e.renewlist)))},directives:[b.fb,b.j,b.L,b.f,b.g,b.db,b.s,M.a,M.f,M.c,M.h,M.d,i.m,M.b,v.a,b.qb,c.l,i.l,M.e,a.s,a.b,a.o,a.r],pipes:[i.b],styles:[".example-card[_ngcontent-%COMP%]{max-width:400px;margin:auto}.container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.containerb[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.item[_ngcontent-%COMP%]{font-size:15px}.ytext[_ngcontent-%COMP%]{font-weight:700}.counter[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:small}.ycricle[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:50%;font-size:40px;line-height:200px;text-align:center;background:#000;color:#fff;margin:10px auto}.priceclass[_ngcontent-%COMP%]{width:46%;margin-right:5px;background:rgba(0,0,0,.17)}.md-padding[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myhead[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin-bottom:10px;text-align:center;padding:10px}.basic[_ngcontent-%COMP%], .myhead[_ngcontent-%COMP%]{background:rgba(0,255,255,.2)}.premimum[_ngcontent-%COMP%]{background:rgba(255,0,0,.32)}.premimumback[_ngcontent-%COMP%]{background:rgba(16,3,3,.17)}.basicback[_ngcontent-%COMP%]{background:rgba(0,0,2,.11)}.mat-card-footer[_ngcontent-%COMP%]{background:#ffb6c1}.dte[_ngcontent-%COMP%]{position:absolute;left:41%;top:42%;color:#7fffd4}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{opacity:1;font-size:xxx-large}"]}),t})();var C=n("IZvt"),k=n("4pxM"),_=n("hVaU");const S=[{path:"",component:P}];let I=(()=>{class t{}return t.\u0275mod=W.Ob({type:t}),t.\u0275inj=W.Nb({factory:function(e){return new(e||t)},imports:[[i.c,a.i,b.gb,_.a,C.a,k.a,c.n.forChild(S)]]}),t})()}}]);