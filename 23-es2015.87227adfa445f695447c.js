(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{AWRA:function(t,e,n){"use strict";n.r(e),n.d(e,"SubscriptionPageModule",(function(){return v}));var i=n("ofXK"),c=n("3Pt+"),a=n("tyNb"),s=n("TEn/"),o=n("OJQs"),b=n("wd/R"),r=n("tk/3"),p=n("un/a"),d=n("fXoL"),u=n("0IaG"),l=n("bTqV"),g=n("Wp6s"),m=n("sYmb");function y(t,e){1&t&&(d.Wb(0,"div"),d.Wb(1,"h1"),d.Mc(2),d.jc(3,"translate"),d.Vb(),d.Vb()),2&t&&(d.Db(2),d.Oc(" ",d.kc(3,1,"Your subscription Ended Please Renew"),"..."))}function h(t,e){if(1&t){const t=d.Xb();d.Wb(0,"div",28),d.Wb(1,"div",29),d.Wb(2,"input",30),d.ec("ngModelChange",(function(e){return d.Cc(t),d.ic().numberofdays=e})),d.Vb(),d.Vb(),d.Rb(3,"div"),d.Wb(4,"div"),d.Wb(5,"button",31),d.ec("click",(function(){return d.Cc(t),d.ic().addDays()})),d.Mc(6),d.jc(7,"translate"),d.Vb(),d.Vb(),d.Vb()}if(2&t){const t=d.ic();d.Db(2),d.rc("ngModel",t.numberofdays),d.Db(4),d.Nc(d.kc(7,2,"Add Grace Days"))}}function f(t,e){if(1&t&&(d.Wb(0,"mat-card",32),d.Wb(1,"mat-card-header"),d.Wb(2,"mat-card-title"),d.Mc(3),d.jc(4,"translate"),d.Vb(),d.Vb(),d.Wb(5,"mat-card-content"),d.Wb(6,"div",33),d.Wb(7,"div",34),d.Mc(8),d.jc(9,"translate"),d.Vb(),d.Wb(10,"div",35),d.Mc(11),d.Vb(),d.Vb(),d.Wb(12,"div",33),d.Wb(13,"div",34),d.Mc(14),d.jc(15,"translate"),d.Vb(),d.Wb(16,"div",35),d.Mc(17),d.Vb(),d.Vb(),d.Wb(18,"div",33),d.Wb(19,"div",34),d.Mc(20),d.jc(21,"translate"),d.Vb(),d.Wb(22,"div",35),d.Mc(23),d.Vb(),d.Vb(),d.Vb(),d.Vb()),2&t){const t=e.$implicit,n=d.ic();d.Db(3),d.Nc(d.kc(4,8,"Your Payment History")),d.Db(5),d.Nc(d.kc(9,10,"Paid on")),d.Db(3),d.Oc("",n.ygen.formatTimestampToDate(t.paydate)," "),d.Db(3),d.Nc(d.kc(15,12,"Paid For")),d.Db(3),d.Pc("",n.ygen.getcurrencysymbol()," ",t.amount," "),d.Db(3),d.Nc(d.kc(21,14,"Paid Reference")),d.Db(3),d.Oc("",n.ygen.formatTimestampToDate(null==t.paymentResponse?null:t.paymentResponse.payment_id)," ")}}const x=[{path:"",component:(()=>{class t{constructor(t,e,n,i,c,a,s,b,r,p,d){this.events=t,this.http=e,this.ypay=n,this.yauth=i,this.ygen=c,this.alertme=a,this.route=s,this.router=b,this.ysharedata=r,this.ydata=p,this.dialog=d,this.priceitem={},this.subscription={},this.crudList=new o.p(o.P.getpath()+"/launchapp/renewpayments",p.getDatabase(),!0,this.ygen.getUid()),this.ygen.retrivedsetting.subscribe(t=>{this.priceitem.appsix=o.T.datamap.get("appsix")?o.T.datamap.get("appsix"):60,this.priceitem.apptwelve=o.T.datamap.get("apptwelve")?o.T.datamap.get("apptwelve"):100})}ngOnInit(){this.renewlist=this.crudList.getList(),this.subscription=this.yauth.subscriptionaccount}navigate(t,e){this.ysharedata.setData("currentevent",e),this.router.navigate([t],{queryParams:e})}renew(t){let e=6==t?this.priceitem.appsix?this.priceitem.appsix:60:this.priceitem.apptwelve?this.priceitem.apptwelve:100,n="business";12==t&&(n="premium");let i=this.ydata.getDatabase().createPushId(),c={sendorderid:i,renewapp:!0,isorder:!1,amount:e,trancurrency:this.ygen.getTranCurrency().toLowerCase()};this.ygen.retrivedsetting.subscribe(t=>{this.ypay.pay(c)}),this.events.subscribe("renew:success["+i+"]",e=>{this.events.unsubscribe("renew:success["+i+"]");let c=+new Date,a=30*t+7+this.subscription.subscriptiondaysremaining,s=+b(new Date(c)).add(a,"days");this.yauth.subscriptionaccount.subscriptiondate=s,this.yauth.issubscriptionon=!0,this.yauth.subscriptiontype=n,this.subscription=this.yauth.subscriptionaccount,this.ydata.getDatabase().object(o.P.getpath()+"/launchapp").update({subscriptiondate:s,subscriptiontype:n});let r=this.ydata.getDatabase().createPushId();this.crudList.getListRefer().set(r,e),this.capturepayment(e),this.alertme.successdata("You have Successfully Renewed your Subscription with us, Congratulations").then(t=>{console.log("done11",t),this.events.publish("shop:checksubscription")})})}addDays(){this.yauth.addDaysToSubscription(this.numberofdays)}capturepayment(t){this.yauth.getappSettings();let e=`${o.s.herobackendserver}/rest/razor/renew?testmode=true&paymentid=${t.paymentResponse.payment_id}`,n={amount:100*t.amount,currency:"INR"};const i={headers:new r.d({"Content-Type":"application/json",Authorization:"yoyo"})};this.http.post(e,n,i).pipe(Object(p.a)(2)).subscribe(t=>{console.log("capture payment",t)},t=>{})}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(o.Y),d.Qb(r.b),d.Qb(o.Z),d.Qb(o.M),d.Qb(o.T),d.Qb(o.a),d.Qb(a.a),d.Qb(a.j),d.Qb(o.R),d.Qb(o.Q),d.Qb(u.b))},t.\u0275cmp=d.Kb({type:t,selectors:[["app-subscription"]],decls:84,vars:59,consts:[[3,"color"],["slot","start"],[1,"ion-padding"],[1,"ycontainer"],[1,"headerbox"],[1,"displaydetailbox"],[1,"yrow"],[1,"ylable"],[1,"ytext"],[1,"showdayschange"],[1,"ycricle"],[1,"counter"],[1,"dte1"],[4,"ngIf"],[1,"pricetable1"],[1,"offer"],[1,"myheadx","basic"],[2,"text-align","center","font-weight","bolder"],[2,"font-weight","bold","font-family","cursive","margin","5px","text-align","center"],[2,"text-align","center"],[1,"myheadx","basic",3,"click"],[1,"myheadx","premimum"],[1,"myheadx","premimum",3,"click"],[1,"action"],["mat-button","","color","warning","routerLink","/dashboard"],[1,"addgrace"],["style","padding: 20px;display: flex; flex-direction: column; align-items: center;",4,"ngIf"],["class","example-card",4,"ngFor","ngForOf"],[2,"padding","20px","display","flex","flex-direction","column","align-items","center"],[2,"font-size","xxx-large"],["min","1","max","360","type","number","placeholder","Add number of days",3,"ngModel","ngModelChange"],["mat-button","","color","warn",3,"click"],[1,"example-card"],[1,"container"],[1,"item","ylable"],[1,"item","ytext"]],template:function(t,e){1&t&&(d.Wb(0,"ion-toolbar",0),d.Wb(1,"ion-buttons",1),d.Rb(2,"ion-menu-button"),d.Vb(),d.Wb(3,"ion-buttons",1),d.Rb(4,"ion-back-button"),d.Vb(),d.Wb(5,"ion-title"),d.Mc(6),d.jc(7,"translate"),d.Vb(),d.Vb(),d.Wb(8,"ion-content",2),d.Wb(9,"div",3),d.Wb(10,"div",4),d.Mc(11),d.jc(12,"translate"),d.Vb(),d.Wb(13,"div",5),d.Wb(14,"div",6),d.Wb(15,"div",7),d.Mc(16),d.jc(17,"translate"),d.Vb(),d.Wb(18,"div",8),d.Mc(19),d.Vb(),d.Vb(),d.Wb(20,"div",6),d.Wb(21,"div",7),d.Mc(22),d.jc(23,"translate"),d.Vb(),d.Wb(24,"div",8),d.Mc(25),d.Vb(),d.Vb(),d.Wb(26,"div",6),d.Wb(27,"div",7),d.Mc(28),d.jc(29,"translate"),d.Vb(),d.Wb(30,"div",8),d.Mc(31),d.Vb(),d.Vb(),d.Vb(),d.Wb(32,"div",9),d.Wb(33,"div",10),d.Wb(34,"div",11),d.Mc(35),d.Vb(),d.Vb(),d.Wb(36,"div",12),d.Mc(37),d.jc(38,"translate"),d.Vb(),d.Vb(),d.Kc(39,y,4,3,"div",13),d.Wb(40,"div",14),d.Wb(41,"div",15),d.Wb(42,"div",16),d.Mc(43),d.jc(44,"translate"),d.Vb(),d.Wb(45,"div",17),d.Mc(46),d.jc(47,"translate"),d.Vb(),d.Wb(48,"div"),d.Wb(49,"div",18),d.Mc(50),d.jc(51,"translate"),d.Vb(),d.Wb(52,"div",19),d.Wb(53,"b"),d.Mc(54),d.Vb(),d.Vb(),d.Vb(),d.Wb(55,"div",20),d.ec("click",(function(){return e.renew(6)})),d.Mc(56),d.jc(57,"translate"),d.Vb(),d.Vb(),d.Wb(58,"div",15),d.Wb(59,"div",21),d.Mc(60),d.jc(61,"translate"),d.Vb(),d.Wb(62,"div",17),d.Mc(63),d.jc(64,"translate"),d.Vb(),d.Wb(65,"div"),d.Wb(66,"div",18),d.Mc(67),d.jc(68,"translate"),d.Vb(),d.Wb(69,"div",19),d.Wb(70,"b"),d.Mc(71),d.Vb(),d.Vb(),d.Vb(),d.Wb(72,"div",22),d.ec("click",(function(){return e.renew(12)})),d.Mc(73),d.jc(74,"translate"),d.Vb(),d.Vb(),d.Vb(),d.Wb(75,"div",23),d.Wb(76,"button",24),d.Mc(77),d.jc(78,"translate"),d.Vb(),d.Vb(),d.Wb(79,"div",25),d.Wb(80,"div"),d.Kc(81,h,8,4,"div",26),d.Vb(),d.Vb(),d.Vb(),d.Kc(82,f,24,16,"mat-card",27),d.jc(83,"async"),d.Vb()),2&t&&(d.rc("color","warning"),d.Db(6),d.Nc(d.kc(7,27,"Subscription Information")),d.Db(5),d.Nc(d.kc(12,29,"Your Store Subscription")),d.Db(5),d.Nc(d.kc(17,31,"Store Launch on")),d.Db(3),d.Oc("",e.ygen.formatTimestampToDate(e.subscription.lanunchdate)," "),d.Db(3),d.Nc(d.kc(23,33,"Subscription End Date")),d.Db(3),d.Oc("",e.ygen.formatTimestampToDate(e.subscription.subscriptiondate)," "),d.Db(3),d.Nc(d.kc(29,35,"Current Subscription")),d.Db(3),d.Oc("",e.ygen.getSubscriptionType()," "),d.Db(4),d.Oc(" ",e.subscription.subscriptiondaysremaining," "),d.Db(2),d.Nc(d.kc(38,37,"Days to Expiry")),d.Db(2),d.rc("ngIf",!e.subscription.issubscriptionon),d.Db(4),d.Nc(d.kc(44,39,"Basic")),d.Db(3),d.Nc(d.kc(47,41,"6 Months")),d.Db(4),d.Nc(d.kc(51,43,"Your Store will be activated for 06 months in")),d.Db(4),d.Pc("",e.ygen.getcurrencysymbol()," ",e.priceitem.appsix,""),d.Db(2),d.Oc(" ",d.kc(57,45,"Renew")," "),d.Db(4),d.Nc(d.kc(61,47,"Premium")),d.Db(3),d.Nc(d.kc(64,49,"12 Months")),d.Db(4),d.Nc(d.kc(68,51,"Your Store will be activated for 12 months in")),d.Db(4),d.Pc("",e.ygen.getcurrencysymbol()," ",e.priceitem.apptwelve,""),d.Db(2),d.Oc(" ",d.kc(74,53,"Renew")," "),d.Db(4),d.Nc(d.kc(78,55,"Cancel")),d.Db(4),d.rc("ngIf",e.ygen.isSuperAdmin()),d.Db(1),d.rc("ngForOf",d.kc(83,57,e.renewlist)))},directives:[s.hb,s.j,s.N,s.f,s.g,s.fb,s.s,i.m,l.a,s.sb,a.l,i.l,c.u,c.c,c.p,c.s,g.a,g.d,g.f,g.c],pipes:[m.c,i.b],styles:[".example-card[_ngcontent-%COMP%]{max-width:400px;margin:auto}.container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.containerb[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.item[_ngcontent-%COMP%]{font-size:15px}.ytext[_ngcontent-%COMP%]{font-weight:700}.counter[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .ytext[_ngcontent-%COMP%]{font-size:small}.ycricle[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:50%;font-size:40px;line-height:200px;text-align:center;background:#000;color:#fff;margin:10px auto}.priceclass[_ngcontent-%COMP%]{margin-right:5px;background:rgba(0,0,0,.17)}.md-padding[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myhead[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin-bottom:10px;text-align:center;padding:10px}.basic[_ngcontent-%COMP%], .myhead[_ngcontent-%COMP%]{background:rgba(0,255,255,.2)}.premimum[_ngcontent-%COMP%]{background:rgba(255,0,0,.32)}.premimumback[_ngcontent-%COMP%]{background:rgba(16,3,3,.17)}.basicback[_ngcontent-%COMP%]{background:rgba(0,0,2,.11)}.mat-card-footer[_ngcontent-%COMP%]{background:#ffb6c1}.dte[_ngcontent-%COMP%]{position:absolute;left:41%;top:42%;color:#7fffd4}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{opacity:1;font-size:xxx-large}.ycontainer[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center;gap:10px;max-width:400px;margin:auto;padding:2px;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.headerbox[_ngcontent-%COMP%]{font-size:large;font-weight:700}.displaydetailbox[_ngcontent-%COMP%]{width:100%}.ylable[_ngcontent-%COMP%]{font-size:small}.yrow[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between}.showdayschange[_ngcontent-%COMP%], .yrow[_ngcontent-%COMP%]{display:flex;align-items:center}.showdayschange[_ngcontent-%COMP%]{flex-direction:column;position:relative}.dte1[_ngcontent-%COMP%]{position:absolute;bottom:49px;color:#fff}.pricetable1[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-evenly;gap:4px}.offer[_ngcontent-%COMP%]{box-shadow:2px 2px 2px rgba(0,0,0,.2),0 1px 3px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.myheadx[_ngcontent-%COMP%]{font-size:20px;font-weight:700;text-align:center;padding:10px}"]}),t})()}];let v=(()=>{class t{}return t.\u0275mod=d.Ob({type:t}),t.\u0275inj=d.Nb({factory:function(e){return new(e||t)},imports:[[i.c,c.j,s.ib,o.H,o.o,o.b,a.n.forChild(x)]]}),t})()}}]);