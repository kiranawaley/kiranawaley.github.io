(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"4ijL":function(t,e,n){"use strict";n.r(e),n.d(e,"BuynowPageModule",(function(){return I}));var o=n("ofXK"),a=n("3Pt+"),c=n("tyNb"),i=n("TEn/"),r=n("LeCc"),s=n("i2Ty"),b=n("dMTE"),l=n("rIxz"),d=n("ybIa"),u=n("+DAS"),y=n("0IaG"),g=n("cBbZ"),p=n("G2i7"),h=n("fXoL"),m=n("sYmb"),f=n("/t3+"),V=n("bTqV"),W=n("NFeN");function w(t,e){if(1&t&&(h.Wb(0,"ion-item"),h.Wb(1,"ion-thumbnail",1),h.Rb(2,"img",5),h.Vb(),h.Wb(3,"div",6),h.Wb(4,"div",7),h.Wb(5,"div",8),h.Mc(6),h.Vb(),h.Wb(7,"div"),h.Mc(8),h.Vb(),h.Vb(),h.Wb(9,"div",7),h.Wb(10,"div"),h.Mc(11),h.Vb(),h.Vb(),h.Vb(),h.Vb()),2&t){const t=e.$implicit;h.Db(2),h.rc("src",t.image,h.Ec),h.Db(4),h.Oc(" ",t.title," "),h.Db(2),h.Nc(t.description),h.Db(3),h.Pc("\u20b9",t.price," X ",t.orderqty,"")}}function M(t,e){1&t&&(h.Wb(0,"div",9),h.Rb(1,"ion-icon",10),h.Wb(2,"h3"),h.Mc(3),h.jc(4,"translate"),h.Vb(),h.Wb(5,"p"),h.Mc(6),h.jc(7,"translate"),h.Vb(),h.Wb(8,"ion-button",11),h.Mc(9),h.jc(10,"translate"),h.Vb(),h.Vb()),2&t&&(h.Db(3),h.Nc(h.kc(4,3,"Your Cart is Empty")),h.Db(3),h.Nc(h.kc(7,5,"Lets get you started")),h.Db(3),h.Oc("",h.kc(10,7,"Start shopping")," "))}function k(t,e){if(1&t){const t=h.Xb();h.Wb(0,"ion-toolbar",0),h.Wb(1,"div",13),h.Wb(2,"ion-text"),h.Wb(3,"h3"),h.Mc(4),h.jc(5,"translate"),h.Vb(),h.Vb(),h.Wb(6,"ion-button",14),h.ec("click",(function(){h.Cc(t);const e=h.ic(2);return e.payoptions(e.ycat.getcart())})),h.Mc(7),h.jc(8,"translate"),h.Vb(),h.Wb(9,"ion-text"),h.Wb(10,"h3"),h.Mc(11),h.Vb(),h.Vb(),h.Vb(),h.Vb()}if(2&t){const t=h.ic(2);h.rc("color","warning"),h.Db(4),h.Nc(h.kc(5,4,"Total")),h.Db(3),h.Nc(h.kc(8,6,"Proceed to Pay")),h.Db(4),h.Oc(" \u20b9 ",t.ycat.getTotal()," ")}}function v(t,e){if(1&t&&(h.Wb(0,"ion-footer"),h.Kc(1,k,12,8,"ion-toolbar",12),h.Vb()),2&t){const t=h.ic();h.Db(1),h.rc("ngIf",t.ycat.getcartcount()>0)}}let C=(()=>{class t{constructor(t,e,n,o,a,c,i,r,s){this.centerdb=t,this.ydata=e,this.router=n,this.ygen=o,this.events=a,this.ycat=c,this.alertme=i,this.ypay=r,this.dialog=s,this.centerdb.currenttenant.subscribe(t=>{t&&(this.orderlist=new d.a(p.a.getpath()+"/shop/orders",this.ydata.getDatabase(),!0,this.ygen.getUid()))})}ngOnInit(){}addtocart(t,e,n){n&&(e.orderqty=0);let o=e.orderqty?e.orderqty+t:1;o>e.maxqty?this.alertme.openSnackBar(`Maximum quantiy you can order is ${e.maxqty}`,"Ok"):(Object.assign(e,{orderqty:o}),this.ycat.iscartItem(e)?this.ycat.updatequantity(e):1==o&&(this.alertme.openSnackBar(`Your shopping cart updated with ${e.orderqty} quantity`,"Ok"),this.ycat.addtocart(e))),0==e.orderqty&&this.ycat.delete(e)}pay(t){let e=""+ +new Date,n=this.ygen.randomletter()+this.ygen.randomletter()+~~(1e3*Math.random())+e.substring(e.length-4);t.forEach(t=>{t.$key?t.originalkey=t.$key:console.warn("no Key.."),delete t.$key});let o={sendorderid:n,isorder:!0,payload:t,amount:this.ycat.getTotal()};this.ypay.pay(o),this.events.subscribe("order:success["+n+"]",t=>{this.events.unsubscribe("order:success["+n+"]");let e=this.ydata.getDatabase().createPushId();this.orderlist.getListRefer().set(e,t),this.alertme.successdata("Order Successfully placed with, OrderID=["+n+"]").then(t=>{console.log("done",t)}),this.router.navigate(["/order"],{queryParams:{orderid:e,orderkey:n,orderplaced:!0}}),this.ycat.emptycart()})}openDialog(t){this.dialog.open(D,{panelClass:"myapp-no-padding-dialog",height:"100%",width:"100%",data:t}).afterClosed().subscribe(t=>{console.log("The dialog was closed",t)})}payoptions(t){this.router.navigate(["/checkoutdetail"],{queryParams:{previousurl:"checkoutdetail"}})}}return t.\u0275fac=function(e){return new(e||t)(h.Qb(p.a),h.Qb(u.a),h.Qb(c.j),h.Qb(l.a),h.Qb(g.a),h.Qb(r.a),h.Qb(s.a),h.Qb(b.a),h.Qb(y.b))},t.\u0275cmp=h.Kb({type:t,selectors:[["app-buynow"]],decls:12,vars:7,consts:[[3,"color"],["slot","start"],[4,"ngFor","ngForOf"],["text-center","","class","cartTextSection",4,"ngIf"],[4,"ngIf"],[3,"src"],[1,"container"],[2,"padding","10px","padding-left","0px"],[2,"font-size","smaller"],["text-center","",1,"cartTextSection"],["name","cart","role","img","aria-label","cart",1,"cartIcon"],["color","success","routerLink","/products"],[3,"color",4,"ngIf"],[1,"footerCartSection"],["color","success",3,"click"]],template:function(t,e){1&t&&(h.Wb(0,"ion-header"),h.Wb(1,"ion-toolbar",0),h.Wb(2,"ion-buttons",1),h.Rb(3,"ion-back-button"),h.Vb(),h.Wb(4,"ion-title"),h.Mc(5),h.jc(6,"translate"),h.Vb(),h.Vb(),h.Vb(),h.Wb(7,"ion-content"),h.Wb(8,"ion-list"),h.Kc(9,w,12,5,"ion-item",2),h.Vb(),h.Kc(10,M,11,9,"div",3),h.Vb(),h.Kc(11,v,2,1,"ion-footer",4)),2&t&&(h.Db(1),h.rc("color","warning"),h.Db(4),h.Nc(h.kc(6,5,"Cart Summary")),h.Db(4),h.rc("ngForOf",e.ycat.getcart()),h.Db(1),h.rc("ngIf",0==e.ycat.getcartcount()),h.Db(1),h.rc("ngIf",e.ycat.getcartcount()>0))},directives:[i.y,i.fb,i.j,i.f,i.g,i.db,i.s,i.I,o.l,o.m,i.B,i.cb,i.z,i.i,i.qb,c.l,i.w,i.ab],pipes:[m.c],styles:[".container[_ngcontent-%COMP%], .delivery[_ngcontent-%COMP%], .footerCartSection[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%]{width:100%}ion-label[_ngcontent-%COMP%]{font-size:smaller}"]}),t})(),D=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.displayedColumns=["id","name","mobile"],console.log("data ==>",e),this.dataSource=e}onNoClick(){this.dialogRef.close()}gotoExternal(t){window.location.href=t}}return t.\u0275fac=function(e){return new(e||t)(h.Qb(y.h),h.Qb(y.a))},t.\u0275cmp=h.Kb({type:t,selectors:[["payment-dialog"]],decls:13,vars:1,consts:[["color","primary"],[1,"example-spacer"],["mat-mini-fab","","aria-label","Example icon-button with a heart icon",3,"click"],["mat-dialog-content",""],["mat-dialog-actions","","align","center"],["mat-button","","color","accent",3,"mat-dialog-close"]],template:function(t,e){1&t&&(h.Wb(0,"mat-toolbar",0),h.Wb(1,"mat-toolbar-row"),h.Wb(2,"span"),h.Mc(3,"Registration"),h.Vb(),h.Rb(4,"span",1),h.Vb(),h.Wb(5,"button",2),h.ec("click",(function(){return e.onNoClick()})),h.Wb(6,"mat-icon"),h.Mc(7,"close"),h.Vb(),h.Vb(),h.Vb(),h.Wb(8,"div",3),h.Mc(9," dddddd\n"),h.Vb(),h.Wb(10,"div",4),h.Wb(11,"button",5),h.Mc(12,"Close"),h.Vb(),h.Vb()),2&t&&(h.Db(11),h.rc("mat-dialog-close",e.data))},directives:[f.a,f.c,V.a,W.a,y.f,y.c,y.d],styles:[".container[_ngcontent-%COMP%], .delivery[_ngcontent-%COMP%], .footerCartSection[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%]{width:100%}ion-label[_ngcontent-%COMP%]{font-size:smaller}"]}),t})();var O=n("hVaU"),x=n("IZvt"),P=n("4pxM");const q=[{path:"",component:C}];let I=(()=>{class t{}return t.\u0275mod=h.Ob({type:t}),t.\u0275inj=h.Nb({factory:function(e){return new(e||t)},imports:[[o.c,a.i,i.gb,O.a,x.a,P.a,c.n.forChild(q)]]}),t})()}}]);