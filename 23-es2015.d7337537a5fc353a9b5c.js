(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{AWRA:function(t,c,e){"use strict";e.r(c),e.d(c,"SubscriptionPageModule",(function(){return x}));var n=e("ofXK"),i=e("3Pt+"),a=e("tyNb"),s=e("TEn/"),o=e("pwB6"),r=e("wd/R"),p=e("tk/3"),d=e("un/a"),g=e("fXoL"),u=e("0IaG"),h=e("bTqV"),b=e("Wp6s"),l=e("sYmb");function m(t,c){1&t&&(g.hc(0,"div"),g.hc(1,"h1"),g.Xc(2),g.uc(3,"translate"),g.gc(),g.gc()),2&t&&(g.Ob(2),g.Zc(" ",g.vc(3,1,"Your subscription Ended Please Renew"),"..."))}function y(t,c){if(1&t){const t=g.ic();g.hc(0,"div",28),g.hc(1,"div",29),g.hc(2,"input",30),g.pc("ngModelChange",(function(c){return g.Nc(t),g.tc().numberofdays=c})),g.gc(),g.gc(),g.cc(3,"div"),g.hc(4,"div"),g.hc(5,"button",31),g.pc("click",(function(){return g.Nc(t),g.tc().addDays()})),g.Xc(6),g.uc(7,"translate"),g.gc(),g.gc(),g.gc()}if(2&t){const t=g.tc();g.Ob(2),g.Cc("ngModel",t.numberofdays),g.Ob(4),g.Yc(g.vc(7,2,"Add Grace Days"))}}function f(t,c){if(1&t&&(g.hc(0,"mat-card",32),g.hc(1,"mat-card-header"),g.hc(2,"mat-card-title"),g.Xc(3),g.uc(4,"translate"),g.gc(),g.gc(),g.hc(5,"mat-card-content"),g.hc(6,"div",33),g.hc(7,"div",34),g.Xc(8),g.uc(9,"translate"),g.gc(),g.hc(10,"div",35),g.Xc(11),g.gc(),g.gc(),g.hc(12,"div",33),g.hc(13,"div",34),g.Xc(14),g.uc(15,"translate"),g.gc(),g.hc(16,"div",35),g.Xc(17),g.gc(),g.gc(),g.hc(18,"div",33),g.hc(19,"div",34),g.Xc(20),g.uc(21,"translate"),g.gc(),g.hc(22,"div",35),g.Xc(23),g.gc(),g.gc(),g.gc(),g.gc()),2&t){const t=c.$implicit,e=g.tc();g.Ob(3),g.Yc(g.vc(4,8,"Your Payment History")),g.Ob(5),g.Yc(g.vc(9,10,"Paid on")),g.Ob(3),g.Zc("",e.ygen.formatTimestampToDate(t.paydate)," "),g.Ob(3),g.Yc(g.vc(15,12,"Paid For")),g.Ob(3),g.ad("",e.ygen.getcurrencysymbol()," ",t.amount," "),g.Ob(3),g.Yc(g.vc(21,14,"Paid Reference")),g.Ob(3),g.Zc("",e.ygen.formatTimestampToDate(null==t.paymentResponse?null:t.paymentResponse.payment_id)," ")}}const v=[{path:"",component:(()=>{class t{constructor(t,c,e,n,i,a,s,r,p,d,g){this.events=t,this.http=c,this.ypay=e,this.yauth=n,this.ygen=i,this.alertme=a,this.route=s,this.router=r,this.ysharedata=p,this.ydata=d,this.dialog=g,this.priceitem={},this.subscription={},this.crudList=new o.p(o.P.getpath()+"/launchapp/renewpayments",d.getDatabase(),!0,this.ygen.getUid()),this.ygen.retrivedsetting.subscribe(t=>{this.priceitem.appsix=o.T.datamap.get("appsix")?o.T.datamap.get("appsix"):60,this.priceitem.apptwelve=o.T.datamap.get("apptwelve")?o.T.datamap.get("apptwelve"):100})}ngOnInit(){this.renewlist=this.crudList.getList(),this.subscription=this.yauth.subscriptionaccount}navigate(t,c){this.ysharedata.setData("currentevent",c),this.router.navigate([t],{queryParams:c})}renew(t){let c=6==t?this.priceitem.appsix?this.priceitem.appsix:60:this.priceitem.apptwelve?this.priceitem.apptwelve:100,e="business";12==t&&(e="premium");let n=this.ydata.getDatabase().createPushId(),i={sendorderid:n,renewapp:!0,isorder:!1,amount:c,trancurrency:this.ygen.getTranCurrency().toLowerCase()};this.ygen.retrivedsetting.subscribe(t=>{this.ypay.pay(i)}),this.events.subscribe("renew:success["+n+"]",c=>{this.events.unsubscribe("renew:success["+n+"]");let i=+new Date,a=30*t+7+this.subscription.subscriptiondaysremaining,s=+r(new Date(i)).add(a,"days");this.yauth.subscriptionaccount.subscriptiondate=s,this.yauth.issubscriptionon=!0,this.yauth.subscriptiontype=e,this.subscription=this.yauth.subscriptionaccount,this.ydata.getDatabase().object(o.P.getpath()+"/launchapp").update({subscriptiondate:s,subscriptiontype:e});let p=this.ydata.getDatabase().createPushId();this.crudList.getListRefer().set(p,c),this.capturepayment(c),this.alertme.successdata("You have Successfully Renewed your Subscription with us, Congratulations").then(t=>{console.log("done11",t),this.events.publish("shop:checksubscription")})})}addDays(){this.yauth.addDaysToSubscription(this.numberofdays)}capturepayment(t){this.yauth.getappSettings();let c=`${o.s.herobackendserver}/rest/razor/renew?testmode=true&paymentid=${t.paymentResponse.payment_id}`,e={amount:100*t.amount,currency:"INR"};const n={headers:new p.d({"Content-Type":"application/json",Authorization:"yoyo"})};this.http.post(c,e,n).pipe(Object(d.a)(2)).subscribe(t=>{console.log("capture payment",t)},t=>{})}}return t.\u0275fac=function(c){return new(c||t)(g.bc(o.Y),g.bc(p.b),g.bc(o.Z),g.bc(o.M),g.bc(o.T),g.bc(o.a),g.bc(a.a),g.bc(a.j),g.bc(o.R),g.bc(o.Q),g.bc(u.b))},t.\u0275cmp=g.Vb({type:t,selectors:[["app-subscription"]],decls:84,vars:59,consts:[[3,"color"],["slot","start"],[1,"ion-padding"],[1,"ycontainer"],[1,"headerbox"],[1,"displaydetailbox"],[1,"yrow"],[1,"ylable"],[1,"ytext"],[1,"showdayschange"],[1,"ycricle"],[1,"counter"],[1,"dte1"],[4,"ngIf"],[1,"pricetable1"],[1,"offer"],[1,"myheadx","basic"],[2,"text-align","center","font-weight","bolder"],[2,"font-weight","bold","font-family","cursive"],[2,"text-align","center"],[1,"myheadx","basic",3,"click"],[1,"myheadx","premimum"],[1,"myheadx","premimum",3,"click"],[1,"action"],["mat-button","","color","warning","routerLink","/dashboard"],[1,"addgrace"],["style","padding: 20px;display: flex; flex-direction: column; align-items: center;",4,"ngIf"],["class","example-card",4,"ngFor","ngForOf"],[2,"padding","20px","display","flex","flex-direction","column","align-items","center"],[2,"font-size","xxx-large"],["min","1","max","360","type","number","placeholder","Add number of days",3,"ngModel","ngModelChange"],["mat-button","","color","warn",3,"click"],[1,"example-card"],[1,"container"],[1,"item","ylable"],[1,"item","ytext"]],template:function(t,c){1&t&&(g.hc(0,"ion-toolbar",0),g.hc(1,"ion-buttons",1),g.cc(2,"ion-menu-button"),g.gc(),g.hc(3,"ion-buttons",1),g.cc(4,"ion-back-button"),g.gc(),g.hc(5,"ion-title"),g.Xc(6),g.uc(7,"translate"),g.gc(),g.gc(),g.hc(8,"ion-content",2),g.hc(9,"div",3),g.hc(10,"div",4),g.Xc(11),g.uc(12,"translate"),g.gc(),g.hc(13,"div",5),g.hc(14,"div",6),g.hc(15,"div",7),g.Xc(16),g.uc(17,"translate"),g.gc(),g.hc(18,"div",8),g.Xc(19),g.gc(),g.gc(),g.hc(20,"div",6),g.hc(21,"div",7),g.Xc(22),g.uc(23,"translate"),g.gc(),g.hc(24,"div",8),g.Xc(25),g.gc(),g.gc(),g.hc(26,"div",6),g.hc(27,"div",7),g.Xc(28),g.uc(29,"translate"),g.gc(),g.hc(30,"div",8),g.Xc(31),g.gc(),g.gc(),g.gc(),g.hc(32,"div",9),g.hc(33,"div",10),g.hc(34,"div",11),g.Xc(35),g.gc(),g.gc(),g.hc(36,"div",12),g.Xc(37),g.uc(38,"translate"),g.gc(),g.gc(),g.Vc(39,m,4,3,"div",13),g.hc(40,"div",14),g.hc(41,"div",15),g.hc(42,"div",16),g.Xc(43),g.uc(44,"translate"),g.gc(),g.hc(45,"div",17),g.Xc(46),g.uc(47,"translate"),g.gc(),g.hc(48,"div"),g.hc(49,"div",18),g.Xc(50),g.uc(51,"translate"),g.gc(),g.hc(52,"div",19),g.hc(53,"b"),g.Xc(54),g.gc(),g.gc(),g.gc(),g.hc(55,"div",20),g.pc("click",(function(){return c.renew(6)})),g.Xc(56),g.uc(57,"translate"),g.gc(),g.gc(),g.hc(58,"div",15),g.hc(59,"div",21),g.Xc(60),g.uc(61,"translate"),g.gc(),g.hc(62,"div",17),g.Xc(63),g.uc(64,"translate"),g.gc(),g.hc(65,"div"),g.hc(66,"div",18),g.Xc(67),g.uc(68,"translate"),g.gc(),g.hc(69,"div",19),g.hc(70,"b"),g.Xc(71),g.gc(),g.gc(),g.gc(),g.hc(72,"div",22),g.pc("click",(function(){return c.renew(12)})),g.Xc(73),g.uc(74,"translate"),g.gc(),g.gc(),g.gc(),g.hc(75,"div",23),g.hc(76,"button",24),g.Xc(77),g.uc(78,"translate"),g.gc(),g.gc(),g.hc(79,"div",25),g.hc(80,"div"),g.Vc(81,y,8,4,"div",26),g.gc(),g.gc(),g.gc(),g.Vc(82,f,24,16,"mat-card",27),g.uc(83,"async"),g.gc()),2&t&&(g.Cc("color","warning"),g.Ob(6),g.Yc(g.vc(7,27,"Subscription Information")),g.Ob(5),g.Yc(g.vc(12,29,"Your Store Subscription")),g.Ob(5),g.Yc(g.vc(17,31,"Store Launch on")),g.Ob(3),g.Zc("",c.ygen.formatTimestampToDate(c.subscription.lanunchdate)," "),g.Ob(3),g.Yc(g.vc(23,33,"Subscription End Date")),g.Ob(3),g.Zc("",c.ygen.formatTimestampToDate(c.subscription.subscriptiondate)," "),g.Ob(3),g.Yc(g.vc(29,35,"Current Subscription")),g.Ob(3),g.Zc("",c.ygen.getSubscriptionType()," "),g.Ob(4),g.Zc(" ",c.subscription.subscriptiondaysremaining," "),g.Ob(2),g.Yc(g.vc(38,37,"Days to Expiry")),g.Ob(2),g.Cc("ngIf",!c.subscription.issubscriptionon),g.Ob(4),g.Yc(g.vc(44,39,"Basic")),g.Ob(3),g.Yc(g.vc(47,41,"6 Months")),g.Ob(4),g.Yc(g.vc(51,43,"Your Store will be activated for 06 months in")),g.Ob(4),g.ad("",c.ygen.getcurrencysymbol()," ",c.priceitem.appsix,""),g.Ob(2),g.Zc(" ",g.vc(57,45,"Renew")," "),g.Ob(4),g.Yc(g.vc(61,47,"Premium")),g.Ob(3),g.Yc(g.vc(64,49,"12 Months")),g.Ob(4),g.Yc(g.vc(68,51,"Your Store will be activated for 12 months in")),g.Ob(4),g.ad("",c.ygen.getcurrencysymbol()," ",c.priceitem.apptwelve,""),g.Ob(2),g.Zc(" ",g.vc(74,53,"Renew")," "),g.Ob(4),g.Yc(g.vc(78,55,"Cancel")),g.Ob(4),g.Cc("ngIf",c.ygen.isSuperAdmin()),g.Ob(1),g.Cc("ngForOf",g.vc(83,57,c.renewlist)))},directives:[s.hb,s.j,s.N,s.f,s.g,s.fb,s.s,n.m,h.a,s.sb,a.l,n.l,i.u,i.c,i.p,i.s,b.a,b.d,b.f,b.c],pipes:[l.c,n.b],styles:[".example-card[_ngcontent-%COMP%]{max-width:400px;margin:auto}.container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.containerb[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.item[_ngcontent-%COMP%]{font-size:15px}.ytext[_ngcontent-%COMP%]{font-weight:700}.counter[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .ytext[_ngcontent-%COMP%]{font-size:small}.ycricle[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:50%;font-size:40px;line-height:200px;text-align:center;background:#000;color:#fff;margin:10px auto}.priceclass[_ngcontent-%COMP%]{margin-right:5px;background:rgba(0,0,0,.17)}.md-padding[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myhead[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin-bottom:10px;text-align:center;padding:10px}.basic[_ngcontent-%COMP%], .myhead[_ngcontent-%COMP%]{background:rgba(0,255,255,.2)}.premimum[_ngcontent-%COMP%]{background:rgba(255,0,0,.32)}.premimumback[_ngcontent-%COMP%]{background:rgba(16,3,3,.17)}.basicback[_ngcontent-%COMP%]{background:rgba(0,0,2,.11)}.mat-card-footer[_ngcontent-%COMP%]{background:#ffb6c1}.dte[_ngcontent-%COMP%]{position:absolute;left:41%;top:42%;color:#7fffd4}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{opacity:1;font-size:xxx-large}.ycontainer[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center;gap:10px;max-width:400px;margin:auto;padding:2px;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.headerbox[_ngcontent-%COMP%]{font-size:large;font-weight:700}.displaydetailbox[_ngcontent-%COMP%]{width:100%}.ylable[_ngcontent-%COMP%]{font-size:small}.yrow[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between}.showdayschange[_ngcontent-%COMP%], .yrow[_ngcontent-%COMP%]{display:flex;align-items:center}.showdayschange[_ngcontent-%COMP%]{flex-direction:column;position:relative}.dte1[_ngcontent-%COMP%]{position:absolute;bottom:49px;color:#fff}.pricetable1[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-evenly;gap:4px}.offer[_ngcontent-%COMP%]{box-shadow:2px 2px 2px rgba(0,0,0,.2),0 1px 3px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.myheadx[_ngcontent-%COMP%]{font-size:20px;font-weight:700;text-align:center;padding:10px}"]}),t})()}];let x=(()=>{class t{}return t.\u0275mod=g.Zb({type:t}),t.\u0275inj=g.Yb({factory:function(c){return new(c||t)},imports:[[n.c,i.j,s.ib,o.H,o.o,o.b,a.n.forChild(v)]]}),t})()}}]);