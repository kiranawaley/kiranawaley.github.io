function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var c=0;c<e.length;c++){var n=e[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,c){return e&&_defineProperties(t.prototype,e),c&&_defineProperties(t,c),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{AWRA:function(t,e,c){"use strict";c.r(e),c.d(e,"SubscriptionPageModule",(function(){return w}));var n=c("ofXK"),i=c("3Pt+"),a=c("tyNb"),o=c("TEn/"),r=c("pwB6"),s=c("wd/R"),p=c("tk/3"),u=c("un/a"),d=c("fXoL"),g=c("0IaG"),b=c("bTqV"),l=c("Wp6s"),h=c("sYmb");function y(t,e){1&t&&(d.hc(0,"div"),d.hc(1,"h1"),d.Xc(2),d.uc(3,"translate"),d.gc(),d.gc()),2&t&&(d.Ob(2),d.Zc(" ",d.vc(3,1,"Your subscription Ended Please Renew"),"..."))}function m(t,e){if(1&t){var c=d.ic();d.hc(0,"div",28),d.hc(1,"div",29),d.hc(2,"input",30),d.pc("ngModelChange",(function(t){return d.Nc(c),d.tc().numberofdays=t})),d.gc(),d.gc(),d.cc(3,"div"),d.hc(4,"div"),d.hc(5,"button",31),d.pc("click",(function(){return d.Nc(c),d.tc().addDays()})),d.Xc(6),d.uc(7,"translate"),d.gc(),d.gc(),d.gc()}if(2&t){var n=d.tc();d.Ob(2),d.Cc("ngModel",n.numberofdays),d.Ob(4),d.Yc(d.vc(7,2,"Add Grace Days"))}}function f(t,e){if(1&t&&(d.hc(0,"mat-card",32),d.hc(1,"mat-card-header"),d.hc(2,"mat-card-title"),d.Xc(3),d.uc(4,"translate"),d.gc(),d.gc(),d.hc(5,"mat-card-content"),d.hc(6,"div",33),d.hc(7,"div",34),d.Xc(8),d.uc(9,"translate"),d.gc(),d.hc(10,"div",35),d.Xc(11),d.gc(),d.gc(),d.hc(12,"div",33),d.hc(13,"div",34),d.Xc(14),d.uc(15,"translate"),d.gc(),d.hc(16,"div",35),d.Xc(17),d.gc(),d.gc(),d.hc(18,"div",33),d.hc(19,"div",34),d.Xc(20),d.uc(21,"translate"),d.gc(),d.hc(22,"div",35),d.Xc(23),d.gc(),d.gc(),d.gc(),d.gc()),2&t){var c=e.$implicit,n=d.tc();d.Ob(3),d.Yc(d.vc(4,8,"Your Payment History")),d.Ob(5),d.Yc(d.vc(9,10,"Paid on")),d.Ob(3),d.Zc("",n.ygen.formatTimestampToDate(c.paydate)," "),d.Ob(3),d.Yc(d.vc(15,12,"Paid For")),d.Ob(3),d.ad("",n.ygen.getcurrencysymbol()," ",c.amount," "),d.Ob(3),d.Yc(d.vc(21,14,"Paid Reference")),d.Ob(3),d.Zc("",n.ygen.formatTimestampToDate(null==c.paymentResponse?null:c.paymentResponse.payment_id)," ")}}var v,x,O=[{path:"",component:(v=function(){function t(e,c,n,i,a,o,s,p,u,d,g){var b=this;_classCallCheck(this,t),this.events=e,this.http=c,this.ypay=n,this.yauth=i,this.ygen=a,this.alertme=o,this.route=s,this.router=p,this.ysharedata=u,this.ydata=d,this.dialog=g,this.priceitem={},this.subscription={},this.crudList=new r.p(r.P.getpath()+"/launchapp/renewpayments",d.getDatabase(),!0,this.ygen.getUid()),this.ygen.retrivedsetting.subscribe((function(t){b.priceitem.appsix=r.T.datamap.get("appsix")?r.T.datamap.get("appsix"):60,b.priceitem.apptwelve=r.T.datamap.get("apptwelve")?r.T.datamap.get("apptwelve"):100}))}return _createClass(t,[{key:"ngOnInit",value:function(){this.renewlist=this.crudList.getList(),this.subscription=this.yauth.subscriptionaccount}},{key:"navigate",value:function(t,e){this.ysharedata.setData("currentevent",e),this.router.navigate([t],{queryParams:e})}},{key:"renew",value:function(t){var e=this,c=6==t?this.priceitem.appsix?this.priceitem.appsix:60:this.priceitem.apptwelve?this.priceitem.apptwelve:100,n="business";12==t&&(n="premium");var i=this.ydata.getDatabase().createPushId(),a={sendorderid:i,renewapp:!0,isorder:!1,amount:c,trancurrency:this.ygen.getTranCurrency().toLowerCase()};this.ygen.retrivedsetting.subscribe((function(t){e.ypay.pay(a)})),this.events.subscribe("renew:success["+i+"]",(function(c){e.events.unsubscribe("renew:success["+i+"]");var a=+new Date,o=30*t+7+e.subscription.subscriptiondaysremaining,p=+s(new Date(a)).add(o,"days");e.yauth.subscriptionaccount.subscriptiondate=p,e.yauth.issubscriptionon=!0,e.yauth.subscriptiontype=n,e.subscription=e.yauth.subscriptionaccount,e.ydata.getDatabase().object(r.P.getpath()+"/launchapp").update({subscriptiondate:p,subscriptiontype:n});var u=e.ydata.getDatabase().createPushId();e.crudList.getListRefer().set(u,c),e.capturepayment(c),e.alertme.successdata("You have Successfully Renewed your Subscription with us, Congratulations").then((function(t){console.log("done11",t),e.events.publish("shop:checksubscription")}))}))}},{key:"addDays",value:function(){this.yauth.addDaysToSubscription(this.numberofdays)}},{key:"capturepayment",value:function(t){this.yauth.getappSettings();var e="".concat(r.s.herobackendserver,"/rest/razor/renew?testmode=true&paymentid=").concat(t.paymentResponse.payment_id),c={amount:100*t.amount,currency:"INR"},n={headers:new p.d({"Content-Type":"application/json",Authorization:"yoyo"})};this.http.post(e,c,n).pipe(Object(u.a)(2)).subscribe((function(t){console.log("capture payment",t)}),(function(t){}))}}]),t}(),v.\u0275fac=function(t){return new(t||v)(d.bc(r.Y),d.bc(p.b),d.bc(r.Z),d.bc(r.M),d.bc(r.T),d.bc(r.a),d.bc(a.a),d.bc(a.j),d.bc(r.R),d.bc(r.Q),d.bc(g.b))},v.\u0275cmp=d.Vb({type:v,selectors:[["app-subscription"]],decls:84,vars:59,consts:[[3,"color"],["slot","start"],[1,"ion-padding"],[1,"ycontainer"],[1,"headerbox"],[1,"displaydetailbox"],[1,"yrow"],[1,"ylable"],[1,"ytext"],[1,"showdayschange"],[1,"ycricle"],[1,"counter"],[1,"dte1"],[4,"ngIf"],[1,"pricetable1"],[1,"offer"],[1,"myheadx","basic"],[2,"text-align","center","font-weight","bolder"],[2,"font-weight","bold","font-family","cursive"],[2,"text-align","center"],[1,"myheadx","basic",3,"click"],[1,"myheadx","premimum"],[1,"myheadx","premimum",3,"click"],[1,"action"],["mat-button","","color","warning","routerLink","/dashboard"],[1,"addgrace"],["style","padding: 20px;display: flex; flex-direction: column; align-items: center;",4,"ngIf"],["class","example-card",4,"ngFor","ngForOf"],[2,"padding","20px","display","flex","flex-direction","column","align-items","center"],[2,"font-size","xxx-large"],["min","1","max","360","type","number","placeholder","Add number of days",3,"ngModel","ngModelChange"],["mat-button","","color","warn",3,"click"],[1,"example-card"],[1,"container"],[1,"item","ylable"],[1,"item","ytext"]],template:function(t,e){1&t&&(d.hc(0,"ion-toolbar",0),d.hc(1,"ion-buttons",1),d.cc(2,"ion-menu-button"),d.gc(),d.hc(3,"ion-buttons",1),d.cc(4,"ion-back-button"),d.gc(),d.hc(5,"ion-title"),d.Xc(6),d.uc(7,"translate"),d.gc(),d.gc(),d.hc(8,"ion-content",2),d.hc(9,"div",3),d.hc(10,"div",4),d.Xc(11),d.uc(12,"translate"),d.gc(),d.hc(13,"div",5),d.hc(14,"div",6),d.hc(15,"div",7),d.Xc(16),d.uc(17,"translate"),d.gc(),d.hc(18,"div",8),d.Xc(19),d.gc(),d.gc(),d.hc(20,"div",6),d.hc(21,"div",7),d.Xc(22),d.uc(23,"translate"),d.gc(),d.hc(24,"div",8),d.Xc(25),d.gc(),d.gc(),d.hc(26,"div",6),d.hc(27,"div",7),d.Xc(28),d.uc(29,"translate"),d.gc(),d.hc(30,"div",8),d.Xc(31),d.gc(),d.gc(),d.gc(),d.hc(32,"div",9),d.hc(33,"div",10),d.hc(34,"div",11),d.Xc(35),d.gc(),d.gc(),d.hc(36,"div",12),d.Xc(37),d.uc(38,"translate"),d.gc(),d.gc(),d.Vc(39,y,4,3,"div",13),d.hc(40,"div",14),d.hc(41,"div",15),d.hc(42,"div",16),d.Xc(43),d.uc(44,"translate"),d.gc(),d.hc(45,"div",17),d.Xc(46),d.uc(47,"translate"),d.gc(),d.hc(48,"div"),d.hc(49,"div",18),d.Xc(50),d.uc(51,"translate"),d.gc(),d.hc(52,"div",19),d.hc(53,"b"),d.Xc(54),d.gc(),d.gc(),d.gc(),d.hc(55,"div",20),d.pc("click",(function(){return e.renew(6)})),d.Xc(56),d.uc(57,"translate"),d.gc(),d.gc(),d.hc(58,"div",15),d.hc(59,"div",21),d.Xc(60),d.uc(61,"translate"),d.gc(),d.hc(62,"div",17),d.Xc(63),d.uc(64,"translate"),d.gc(),d.hc(65,"div"),d.hc(66,"div",18),d.Xc(67),d.uc(68,"translate"),d.gc(),d.hc(69,"div",19),d.hc(70,"b"),d.Xc(71),d.gc(),d.gc(),d.gc(),d.hc(72,"div",22),d.pc("click",(function(){return e.renew(12)})),d.Xc(73),d.uc(74,"translate"),d.gc(),d.gc(),d.gc(),d.hc(75,"div",23),d.hc(76,"button",24),d.Xc(77),d.uc(78,"translate"),d.gc(),d.gc(),d.hc(79,"div",25),d.hc(80,"div"),d.Vc(81,m,8,4,"div",26),d.gc(),d.gc(),d.gc(),d.Vc(82,f,24,16,"mat-card",27),d.uc(83,"async"),d.gc()),2&t&&(d.Cc("color","warning"),d.Ob(6),d.Yc(d.vc(7,27,"Subscription Information")),d.Ob(5),d.Yc(d.vc(12,29,"Your Store Subscription")),d.Ob(5),d.Yc(d.vc(17,31,"Store Launch on")),d.Ob(3),d.Zc("",e.ygen.formatTimestampToDate(e.subscription.lanunchdate)," "),d.Ob(3),d.Yc(d.vc(23,33,"Subscription End Date")),d.Ob(3),d.Zc("",e.ygen.formatTimestampToDate(e.subscription.subscriptiondate)," "),d.Ob(3),d.Yc(d.vc(29,35,"Current Subscription")),d.Ob(3),d.Zc("",e.ygen.getSubscriptionType()," "),d.Ob(4),d.Zc(" ",e.subscription.subscriptiondaysremaining," "),d.Ob(2),d.Yc(d.vc(38,37,"Days to Expiry")),d.Ob(2),d.Cc("ngIf",!e.subscription.issubscriptionon),d.Ob(4),d.Yc(d.vc(44,39,"Basic")),d.Ob(3),d.Yc(d.vc(47,41,"6 Months")),d.Ob(4),d.Yc(d.vc(51,43,"Your Store will be activated for 06 months in")),d.Ob(4),d.ad("",e.ygen.getcurrencysymbol()," ",e.priceitem.appsix,""),d.Ob(2),d.Zc(" ",d.vc(57,45,"Renew")," "),d.Ob(4),d.Yc(d.vc(61,47,"Premium")),d.Ob(3),d.Yc(d.vc(64,49,"12 Months")),d.Ob(4),d.Yc(d.vc(68,51,"Your Store will be activated for 12 months in")),d.Ob(4),d.ad("",e.ygen.getcurrencysymbol()," ",e.priceitem.apptwelve,""),d.Ob(2),d.Zc(" ",d.vc(74,53,"Renew")," "),d.Ob(4),d.Yc(d.vc(78,55,"Cancel")),d.Ob(4),d.Cc("ngIf",e.ygen.isSuperAdmin()),d.Ob(1),d.Cc("ngForOf",d.vc(83,57,e.renewlist)))},directives:[o.hb,o.j,o.N,o.f,o.g,o.fb,o.s,n.m,b.a,o.sb,a.l,n.l,i.u,i.c,i.p,i.s,l.a,l.d,l.f,l.c],pipes:[h.c,n.b],styles:[".example-card[_ngcontent-%COMP%]{max-width:400px;margin:auto}.container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.containerb[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.item[_ngcontent-%COMP%]{font-size:15px}.ytext[_ngcontent-%COMP%]{font-weight:700}.counter[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .ytext[_ngcontent-%COMP%]{font-size:small}.ycricle[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:50%;font-size:40px;line-height:200px;text-align:center;background:#000;color:#fff;margin:10px auto}.priceclass[_ngcontent-%COMP%]{margin-right:5px;background:rgba(0,0,0,.17)}.md-padding[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myhead[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin-bottom:10px;text-align:center;padding:10px}.basic[_ngcontent-%COMP%], .myhead[_ngcontent-%COMP%]{background:rgba(0,255,255,.2)}.premimum[_ngcontent-%COMP%]{background:rgba(255,0,0,.32)}.premimumback[_ngcontent-%COMP%]{background:rgba(16,3,3,.17)}.basicback[_ngcontent-%COMP%]{background:rgba(0,0,2,.11)}.mat-card-footer[_ngcontent-%COMP%]{background:#ffb6c1}.dte[_ngcontent-%COMP%]{position:absolute;left:41%;top:42%;color:#7fffd4}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{opacity:1;font-size:xxx-large}.ycontainer[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center;gap:10px;max-width:400px;margin:auto;padding:2px;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.headerbox[_ngcontent-%COMP%]{font-size:large;font-weight:700}.displaydetailbox[_ngcontent-%COMP%]{width:100%}.ylable[_ngcontent-%COMP%]{font-size:small}.yrow[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between}.showdayschange[_ngcontent-%COMP%], .yrow[_ngcontent-%COMP%]{display:flex;align-items:center}.showdayschange[_ngcontent-%COMP%]{flex-direction:column;position:relative}.dte1[_ngcontent-%COMP%]{position:absolute;bottom:49px;color:#fff}.pricetable1[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-evenly;gap:4px}.offer[_ngcontent-%COMP%]{box-shadow:2px 2px 2px rgba(0,0,0,.2),0 1px 3px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.myheadx[_ngcontent-%COMP%]{font-size:20px;font-weight:700;text-align:center;padding:10px}"]}),v)}],w=((x=function t(){_classCallCheck(this,t)}).\u0275mod=d.Zb({type:x}),x.\u0275inj=d.Yb({factory:function(t){return new(t||x)},imports:[[n.c,i.j,o.ib,r.H,r.o,r.b,a.n.forChild(O)]]}),x)}}]);