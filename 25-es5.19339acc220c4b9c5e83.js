function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{upr6:function(e,t,r){"use strict";r.r(t),r.d(t,"CheckoutdetailPageModule",(function(){return $}));var o=r("ofXK"),n=r("3Pt+"),i=r("tyNb"),a=r("TEn/"),c=r("LeCc"),s=r("i2Ty"),b=r("dMTE"),d=r("rIxz"),l=r("ybIa"),u=r("+DAS"),g=r("PWOX"),m=r("sH8K"),y=r("0nTO"),p=r("cBbZ"),f=r("fXoL"),h=r("0IaG"),v=r("QibW"),W=r("kmnG"),V=r("qFsG"),x=r("/per"),D=r("gX7p"),M=r("sYmb");function S(e,t){if(1&e&&(f.Wb(0,"div",13),f.Wb(1,"h3"),f.Mc(2),f.jc(3,"translate"),f.Vb(),f.Wb(4,"p"),f.Mc(5),f.Vb(),f.Wb(6,"div",14),f.Rb(7,"app-callphone",15),f.Vb(),f.Vb()),2&e){var r=f.ic();f.Db(2),f.Nc(f.kc(3,3,"Store's Instructions")),f.Db(3),f.Nc(r.ygen.getSettings().checkoutordermsg),f.Db(2),f.rc("mobile",r.ygen.getSettings().oncallsupport)}}function C(e,t){if(1&e&&(f.Wb(0,"div",16),f.Rb(1,"ion-icon",17),f.Wb(2,"h3"),f.Mc(3,"No more Orders or Shop Subscription Expired"),f.Vb(),f.Wb(4,"p"),f.Mc(5),f.Vb(),f.Rb(6,"app-callphone",15),f.Wb(7,"ion-button",18),f.Mc(8,"Come back again "),f.Vb(),f.Vb()),2&e){var r=f.ic();f.Db(5),f.Nc(r.ygen.getSettings().stopordersmessage),f.Db(1),f.rc("mobile",r.ygen.getSettings().oncallsupport)}}function I(e,t){if(1&e&&(f.Wb(0,"div"),f.Wb(1,"label",6),f.Mc(2,"Pick your Delivery option"),f.Vb(),f.Wb(3,"mat-radio-group",7),f.Wb(4,"mat-radio-button",19),f.Mc(5,"Home Delivery"),f.Vb(),f.Wb(6,"mat-radio-button",20),f.Mc(7,"Store Pickup"),f.Vb(),f.Vb(),f.Vb()),2&e){var r=f.ic();f.Db(3),f.rc("formControl",r.deliveryType)}}function k(e,t){if(1&e&&(f.Wb(0,"div"),f.Wb(1,"label",6),f.Mc(2,"Pick your Delivery option"),f.Vb(),f.Wb(3,"mat-radio-group",7),f.Wb(4,"mat-radio-button",20),f.Mc(5,"Store Pickup"),f.Vb(),f.Vb(),f.Vb()),2&e){var r=f.ic();f.Db(3),f.rc("formControl",r.deliveryType)}}function O(e,t){1&e&&(f.Wb(0,"mat-radio-button",21),f.Mc(1,"Pay Now "),f.Vb())}function w(e,t){if(1&e&&(f.Wb(0,"mat-error"),f.Mc(1),f.Vb()),2&e){var r=f.ic(2);f.Db(1),f.Oc(" ",r.getErrorMessage(r.addressForm.controls.userName,"Name"),"")}}function N(e,t){if(1&e&&(f.Wb(0,"mat-error"),f.Mc(1),f.Vb()),2&e){var r=f.ic(2);f.Db(1),f.Oc(" ",r.getErrorMessage(r.addressForm.controls.mobile,"mobile"),"")}}function P(e,t){if(1&e&&(f.Wb(0,"mat-error"),f.Mc(1),f.Vb()),2&e){var r=f.ic(2);f.Db(1),f.Oc(" ",r.getErrorMessage(r.addressForm.controls.unitName,"Building Name"),"")}}function T(e,t){if(1&e&&(f.Wb(0,"mat-error"),f.Mc(1),f.Vb()),2&e){var r=f.ic(2);f.Db(1),f.Oc(" ",r.getErrorMessage(r.addressForm.controls.address,"Address"),"")}}function q(e,t){if(1&e&&(f.Wb(0,"mat-error"),f.Mc(1),f.Vb()),2&e){var r=f.ic(2);f.Db(1),f.Oc(" ",r.getErrorMessage(r.addressForm.controls.city,"City"),"")}}function E(e,t){if(1&e&&(f.Wb(0,"mat-error"),f.Mc(1),f.Vb()),2&e){var r=f.ic(2);f.Db(1),f.Oc(" ",r.getErrorMessage(r.addressForm.controls.state,"State"),"")}}function F(e,t){if(1&e&&(f.Wb(0,"mat-error"),f.Mc(1),f.Vb()),2&e){var r=f.ic(2);f.Db(1),f.Oc(" ",r.getErrorMessage(r.addressForm.controls.zip,"Postal Code"),"")}}function K(e,t){if(1&e&&(f.Wb(0,"div"),f.Wb(1,"form",22),f.Wb(2,"fieldset"),f.Wb(3,"legend"),f.Mc(4,"Delivery Address"),f.Vb(),f.Wb(5,"table",23),f.Wb(6,"tr"),f.Wb(7,"td"),f.Wb(8,"mat-form-field",11),f.Wb(9,"mat-label"),f.Mc(10,"Name"),f.Vb(),f.Rb(11,"input",24),f.Kc(12,w,2,1,"mat-error",5),f.Vb(),f.Vb(),f.Vb(),f.Wb(13,"tr"),f.Wb(14,"td"),f.Wb(15,"mat-form-field",11),f.Wb(16,"mat-label"),f.Mc(17,"mobile"),f.Vb(),f.Rb(18,"input",25),f.Kc(19,N,2,1,"mat-error",5),f.Vb(),f.Vb(),f.Vb(),f.Wb(20,"tr"),f.Wb(21,"td"),f.Wb(22,"mat-form-field",11),f.Wb(23,"mat-label"),f.Mc(24,"Building Name"),f.Vb(),f.Rb(25,"input",26),f.Kc(26,P,2,1,"mat-error",5),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Wb(27,"p"),f.Wb(28,"mat-form-field",11),f.Wb(29,"mat-label"),f.Mc(30,"Address"),f.Vb(),f.Wb(31,"textarea",27),f.Mc(32,"\n              "),f.Vb(),f.Kc(33,T,2,1,"mat-error",5),f.Vb(),f.Vb(),f.Wb(34,"table",23),f.Wb(35,"tr"),f.Wb(36,"td"),f.Wb(37,"mat-form-field",11),f.Wb(38,"mat-label"),f.Mc(39,"City"),f.Vb(),f.Rb(40,"input",28),f.Kc(41,q,2,1,"mat-error",5),f.Vb(),f.Vb(),f.Wb(42,"td"),f.Wb(43,"mat-form-field",11),f.Wb(44,"mat-label"),f.Mc(45,"State"),f.Vb(),f.Rb(46,"input",29),f.Kc(47,E,2,1,"mat-error",5),f.Vb(),f.Vb(),f.Vb(),f.Wb(48,"tr"),f.Wb(49,"td"),f.Wb(50,"mat-form-field",11),f.Wb(51,"mat-label"),f.Mc(52,"Postal Code"),f.Vb(),f.Rb(53,"input",30,31),f.Wb(55,"mat-hint",32),f.Mc(56),f.Vb(),f.Kc(57,F,2,1,"mat-error",5),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Vb()),2&e){var r=f.zc(54),o=f.ic();f.Db(1),f.rc("formGroup",o.addressForm),f.Db(11),f.rc("ngIf",o.addressForm.controls.userName.invalid),f.Db(7),f.rc("ngIf",o.addressForm.controls.mobile.invalid),f.Db(7),f.rc("ngIf",o.addressForm.controls.unitName.invalid),f.Db(7),f.rc("ngIf",o.addressForm.controls.address.invalid),f.Db(8),f.rc("ngIf",o.addressForm.controls.city.invalid),f.Db(6),f.rc("ngIf",o.addressForm.controls.state.invalid),f.Db(9),f.Oc("",r.value.length,"/5"),f.Db(1),f.rc("ngIf",o.addressForm.controls.zip.invalid)}}function L(e,t){1&e&&(f.Wb(0,"div",16),f.Rb(1,"ion-icon",17),f.Wb(2,"h3"),f.Mc(3,"Your Cart is Empty"),f.Vb(),f.Wb(4,"p"),f.Mc(5,"Lets get you started"),f.Vb(),f.Wb(6,"ion-button",18),f.Mc(7,"Start shopping "),f.Vb(),f.Vb())}function R(e,t){if(1&e&&(f.Wb(0,"ion-toolbar"),f.Wb(1,"div",34),f.Wb(2,"ion-text"),f.Wb(3,"h3"),f.Mc(4,"Delivery Charges"),f.Vb(),f.Vb(),f.Wb(5,"ion-text"),f.Wb(6,"h3"),f.Mc(7),f.Vb(),f.Vb(),f.Vb(),f.Vb()),2&e){var r=f.ic(2);f.Db(7),f.Oc(" \u20b9 ",r.ygen.getSettings().deliverycharges," ")}}function _(e,t){if(1&e){var r=f.Xb();f.Wb(0,"ion-button",38),f.ec("click",(function(){f.Cc(r);var e=f.ic(3);return e.payoptions(e.ycat.getcart())})),f.Mc(1),f.jc(2,"translate"),f.Vb()}if(2&e){var o=f.ic(3);f.rc("disabled",o.isReady()),f.Db(1),f.Oc(" ",f.kc(2,2,"Complete Order"),"")}}function A(e,t){1&e&&(f.Wb(0,"ion-button",39),f.Mc(1),f.jc(2,"translate"),f.Vb()),2&e&&(f.Db(1),f.Oc(" ",f.kc(2,1,"No More Orders"),""))}function j(e,t){if(1&e&&(f.Wb(0,"ion-toolbar",0),f.Wb(1,"div",35),f.Wb(2,"ion-text"),f.Wb(3,"h3"),f.Mc(4,"Total"),f.Vb(),f.Vb(),f.Kc(5,_,3,4,"ion-button",36),f.Kc(6,A,3,3,"ion-button",37),f.Wb(7,"ion-text"),f.Wb(8,"h3"),f.Mc(9),f.Vb(),f.Vb(),f.Vb(),f.Vb()),2&e){var r=f.ic(2);f.rc("color","warning"),f.Db(5),f.rc("ngIf",!r.ygen.getSettings().stoporders&&r.ygen.isActiveSubscription()),f.Db(1),f.rc("ngIf",r.ygen.getSettings().stoporders&&!r.ygen.isActiveSubscription()),f.Db(3),f.Oc(" \u20b9 ",r.getTotal()," ")}}function Q(e,t){if(1&e&&(f.Wb(0,"ion-footer"),f.Kc(1,R,8,1,"ion-toolbar",5),f.Kc(2,j,10,4,"ion-toolbar",33),f.Vb()),2&e){var r=f.ic();f.Db(1),f.rc("ngIf","HD"==r.deliveryType.value&&!r.ygen.getSettings().freedelivery&&r.ygen.getSettings().freedeliveryoveramount&&r.ygen.getSettings().freedeliveryamount>r.ycat.getTotal()||!r.ygen.getSettings().freedeliveryoveramount&&!r.ygen.getSettings().freedelivery),f.Db(1),f.rc("ngIf",r.ycat.getcartcount()>0)}}var H,z,B=((H=function(){function e(t,r,o,n,i,a,c,s,b,d,u){_classCallCheck(this,e),this.ynotification=t,this.yovalidation=r,this.yauth=o,this.ydata=n,this.router=i,this.ygen=a,this.events=c,this.ycat=s,this.alertme=b,this.ypay=d,this.dialog=u,this.orderlist=new l.a("/shop/orders",this.ydata.getDatabase(),!0,this.ygen.getUid())}return _createClass(e,[{key:"buildForm",value:function(e){this.addressForm=new n.g({userName:new n.d(e.userName,[n.u.required,n.u.minLength(2),n.u.maxLength(30)]),mobile:new n.d(e.mobile,[n.u.required,n.u.minLength(2),n.u.maxLength(30)]),unitName:new n.d(e.unitName,[n.u.required,n.u.minLength(2),n.u.maxLength(30)]),address:new n.d(e.address,[n.u.required,n.u.minLength(2),n.u.maxLength(100)]),city:new n.d(e.city,[n.u.required,n.u.minLength(2),n.u.maxLength(30)]),state:new n.d(e.state,[n.u.required,n.u.minLength(2),n.u.maxLength(30)]),zip:new n.d(e.zip,[n.u.required,n.u.minLength(2),n.u.maxLength(30)])});var t="HD";this.ygen.getSettings().onlystorepickup&&(t="SP"),this.deliveryType=new n.d(t,[n.u.required,n.u.max(2)]),this.paymentType=new n.d("COD",[n.u.required,n.u.max(3)]),this.deliveryNote=new n.d("",[n.u.required,n.u.max(100)])}},{key:"ngOnInit",value:function(){this.ygen.getUid()?(this.payer=this.yauth.getcurrentuserProfile(),this.payer&&this.buildForm(this.payer)):(this.yauth.setlanding("/checkoutdetail"),this.router.navigate(["/login"],{}))}},{key:"addtocart",value:function(e,t,r){r&&(t.orderqty=0);var o=t.orderqty?t.orderqty+e:1;o>t.maxqty?this.alertme.openSnackBar("Maximum quantiy you can order is ".concat(t.maxqty),"Ok"):(Object.assign(t,{orderqty:o}),this.ycat.iscartItem(t)?this.ycat.updatequantity(t):1==o&&(this.alertme.openSnackBar("Your shopping cart updated with ".concat(t.orderqty," quantity"),"Ok"),this.ycat.addtocart(t))),0==t.orderqty&&this.ycat.delete(t)}},{key:"pay",value:function(e){var t=this,r=""+ +new Date,o=this.ygen.randomletter()+this.ygen.randomletter()+~~(1e3*Math.random())+r.substring(r.length-4);e.forEach((function(e){e.$key?e.originalkey=e.$key:console.warn("no Key.."),delete e.$key}));var n={sendorderid:o,isorder:!0,payload:e,amount:this.getTotal(),orderByName:this.addressForm.controls.userName.value,orderByPhone:this.addressForm.controls.mobile.value,deliveryAddress:this.ygen.getAddress(this.addressForm.value),wheredelivery:this.deliveryType.value,deliverynote:this.deliveryNote.value,storename:this.ygen.communityName()+" | "+this.ygen.communityId()};this.ydata.getDatabase().object("/profiles/"+this.yauth.getCurrentUserId()).update(this.addressForm.value),this.events.subscribe("order:success["+o+"]",(function(e){t.yauth.setlanding(null),t.events.unsubscribe("order:success["+o+"]");var r=t.ydata.getDatabase().createPushId();t.orderlist.getListRefer().set(r,e),t.ynotification.sendNotificationToTakeUser(t.payer.uid,{message:"Order Successfully placed with, OrderID=["+o+"]",path:"order?orderid="+r},"Order Success",!0,!0,!0),t.alertme.successdata("Order Successfully placed with, OrderID=["+o+"]").then((function(e){console.log("done",e)})),t.router.navigate(["/order"],{queryParams:{orderid:r,orderkey:o,orderplaced:!0}}),t.ycat.emptycart(),t.ycat.updateProductQuantity()})),"COD"==this.paymentType.value?(n.paymentmethod="COD",Object.assign(n,{orderedBy:this.payer.uid,odt:+new Date,ostatus:"NEW"}),this.events.publish("order:success["+n.sendorderid+"]",n)):this.ypay.pay(n)}},{key:"payoptions",value:function(e){this.pay(e)}},{key:"getErrorMessage",value:function(e,t){var r="",o=this.getMeErrors({placeholder:t});return Object.keys(o).some((function(t){if(e.errors[t])return r=o[t],!0})),console.log(e),r}},{key:"getMeErrors",value:function(e){return this.yovalidation.genericErrors(e)}},{key:"getTotal",value:function(){var e=this.ycat.getTotal();return"HD"!=this.deliveryType.value||this.ygen.getSettings().freedelivery||(this.ygen.getSettings().freedeliveryoveramount&&this.ygen.getSettings().freedeliveryamount>this.ycat.getTotal()?e+=this.ygen.getSettings().deliverycharges:this.ygen.getSettings().freedeliveryoveramount||(e+=this.ygen.getSettings().deliverycharges)),e}},{key:"isReady",value:function(){var e=!0;return"HD"==this.deliveryType.value?e=!this.addressForm.valid:"SP"==this.deliveryType.value&&(e=!1),e}}]),e}()).\u0275fac=function(e){return new(e||H)(f.Qb(y.a),f.Qb(m.a),f.Qb(g.a),f.Qb(u.a),f.Qb(i.j),f.Qb(d.a),f.Qb(p.a),f.Qb(c.a),f.Qb(s.a),f.Qb(b.a),f.Qb(h.b))},H.\u0275cmp=f.Kb({type:H,selectors:[["app-checkoutdetail"]],decls:30,vars:11,consts:[[3,"color"],["slot","start"],[1,"ion-padding"],["text-center","","class","msgTextSection",4,"ngIf"],["text-center","","class","cartTextSection",4,"ngIf"],[4,"ngIf"],["id","example-radio-group-label"],["aria-label","Select an option",1,"example-radio-group",3,"formControl"],["value","COD",1,"example-radio-button"],["class","example-radio-button","value","PNO",4,"ngIf"],[1,"example-form"],[1,"example-full-width"],["matInput","","placeholder","Ex. Thanks...",3,"formControl"],["text-center","",1,"msgTextSection"],[2,"right","10px","position","absolute"],[3,"mobile"],["text-center","",1,"cartTextSection"],["name","cart","role","img","aria-label","cart",1,"cartIcon"],["color","success","routerLink","/products"],["value","HD",1,"example-radio-button"],["value","SP",1,"example-radio-button"],["value","PNO",1,"example-radio-button"],[1,"example-form",3,"formGroup"],["cellspacing","0",1,"example-full-width"],["yogagainv2InputUpper","","matInput","","formControlName","userName"],["type","tel","matInput","","formControlName","mobile"],["yogagainv2InputUpper","","matInput","","formControlName","unitName"],["matInput","","placeholder","Ex. CIVIL LINES","formControlName","address"],["matInput","","placeholder","Ex. GONDIA","formControlName","city"],["matInput","","placeholder","Ex. MAHARASHTRA","formControlName","state"],["type","number","matInput","","maxlength","5","placeholder","Ex. 94105","formControlName","zip"],["postalCode",""],["align","end"],[3,"color",4,"ngIf"],[1,"delivery"],[1,"footerCartSection"],["color","danger",3,"disabled","click",4,"ngIf"],["color","danger",4,"ngIf"],["color","danger",3,"disabled","click"],["color","danger"]],template:function(e,t){1&e&&(f.Wb(0,"ion-header"),f.Wb(1,"ion-toolbar",0),f.Wb(2,"ion-buttons",1),f.Rb(3,"ion-back-button"),f.Vb(),f.Wb(4,"ion-title"),f.Mc(5,"Payment/Delivery"),f.Vb(),f.Vb(),f.Vb(),f.Wb(6,"ion-content",2),f.Kc(7,S,8,5,"div",3),f.Kc(8,C,9,2,"div",4),f.Wb(9,"div"),f.Kc(10,I,8,1,"div",5),f.Kc(11,k,6,1,"div",5),f.Wb(12,"div"),f.Wb(13,"label",6),f.Mc(14,"Pick your Payment option"),f.Vb(),f.Wb(15,"mat-radio-group",7),f.Wb(16,"mat-radio-button",8),f.Mc(17,"Cash on Delivery"),f.Vb(),f.Kc(18,O,2,0,"mat-radio-button",9),f.Vb(),f.Vb(),f.Wb(19,"form",10),f.Wb(20,"fieldset"),f.Wb(21,"legend"),f.Mc(22,"Delivery Note"),f.Vb(),f.Wb(23,"mat-form-field",11),f.Wb(24,"mat-label"),f.Mc(25,"Leave a note about order"),f.Vb(),f.Rb(26,"textarea",12),f.Vb(),f.Vb(),f.Vb(),f.Kc(27,K,58,9,"div",5),f.Vb(),f.Kc(28,L,8,0,"div",4),f.Vb(),f.Kc(29,Q,3,2,"ion-footer",5)),2&e&&(f.Db(1),f.rc("color","warning"),f.Db(6),f.rc("ngIf",t.ygen.getSettings().checkoutordermsg&&t.ygen.getSettings().checkoutordermsg.length>0),f.Db(1),f.rc("ngIf",t.ygen.getSettings().stoporders||!t.ygen.isActiveSubscription()),f.Db(2),f.rc("ngIf",!t.ygen.getSettings().onlystorepickup),f.Db(1),f.rc("ngIf",t.ygen.getSettings().onlystorepickup),f.Db(4),f.rc("formControl",t.paymentType),f.Db(3),f.rc("ngIf",t.ygen.getSettings().onlinepay),f.Db(8),f.rc("formControl",t.deliveryNote),f.Db(1),f.rc("ngIf","HD"==t.deliveryType.value),f.Db(1),f.rc("ngIf",0==t.ycat.getcartcount()),f.Db(1),f.rc("ngIf",t.ycat.getcartcount()>0))},directives:[a.y,a.fb,a.j,a.f,a.g,a.db,a.s,o.m,v.b,n.n,n.e,v.a,n.v,n.o,n.p,W.c,W.g,V.b,n.b,x.a,a.z,a.i,a.qb,i.l,n.h,D.a,n.f,n.r,n.j,W.f,W.b,a.w,a.ab],pipes:[M.c],styles:[".delivery[_ngcontent-%COMP%], .footerCartSection[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.mat-form-field-infix[_ngcontent-%COMP%]{width:150px;max-width:150px}  .mat-form-field-infix{width:150px!important}.example-form[_ngcontent-%COMP%]{padding:20px}.example-full-width[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%]{padding-right:8px}.example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.example-radio-button[_ngcontent-%COMP%]{margin:5px}.msgTextSection[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:20px}"]}),H),U=r("hVaU"),G=r("IZvt"),X=r("4pxM"),Y=[{path:"",component:B}],$=((z=function e(){_classCallCheck(this,e)}).\u0275mod=f.Ob({type:z}),z.\u0275inj=f.Nb({factory:function(e){return new(e||z)},imports:[[o.c,n.i,a.gb,U.a,G.a,X.a,n.s,i.n.forChild(Y)]]}),z)}}]);