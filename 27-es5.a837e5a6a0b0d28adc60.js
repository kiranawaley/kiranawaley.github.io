function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"8roW":function(t,e,n){"use strict";n.r(e),n.d(e,"CatalogwebPageModule",(function(){return W}));var i=n("ofXK"),o=n("3Pt+"),a=n("TEn/"),r=n("tyNb"),c=n("LRne"),s=n("q3Kh"),l=n("OJQs"),u=n("JIr8"),d=n("un/a"),b=n("fXoL"),h=n("gren"),p=n("tk/3"),g=n("1jcm"),f=n("hV0v"),v=n("sYmb");function m(t,e){1&t&&b.Rb(0,"ion-progress-bar",8)}function y(t,e){if(1&t){var n=b.Xb();b.Wb(0,"ion-item"),b.Wb(1,"mat-slide-toggle",9),b.ec("ngModelChange",(function(t){return b.Cc(n),b.ic().saveonlytoglobal=t})),b.Mc(2),b.jc(3,"translate"),b.Vb(),b.Vb()}if(2&t){var i=b.ic();b.Db(1),b.rc("ngModel",i.saveonlytoglobal),b.Db(1),b.Oc("",b.kc(3,2,"Save only to Global")," ")}}function k(t,e){1&t&&(b.Wb(0,"div"),b.Mc(1),b.jc(2,"translate"),b.Vb()),2&t&&(b.Db(1),b.Oc(" ",b.kc(2,1,"No Product Found")," "))}function w(t,e){if(1&t){var n=b.Xb();b.Wb(0,"app-productcard-grandbazar",13),b.ec("actionevent",(function(t){return b.Cc(n),b.ic(3).perform(t)})),b.Vb()}if(2&t){var i=e.$implicit,o=b.ic(3);b.rc("product",i)("webcatalogupload",!0)("productlist",o.crudList)("onpage","catalogweb")}}function C(t,e){if(1&t&&(b.Wb(0,"div",11),b.Kc(1,k,3,3,"div",5),b.Kc(2,w,1,4,"app-productcard-grandbazar",12),b.Vb()),2&t){var n=e.ngIf,i=b.ic(2);b.Db(1),b.rc("ngIf",0==n.length),b.Db(1),b.rc("ngForOf",i.processlist(n,i.whatsize))}}function j(t,e){if(1&t&&(b.Wb(0,"div"),b.Kc(1,C,3,2,"div",10),b.jc(2,"searchproducts"),b.Vb()),2&t){var n=b.ic(),i=b.zc(9);b.Db(1),b.rc("ngIf",b.mc(2,1,n.productlist,n.searchstring,i.value))}}function O(t,e){if(1&t){var n=b.Xb();b.Wb(0,"ion-infinite-scroll",14),b.ec("ionInfinite",(function(t){return b.Cc(n),b.ic().loadData(t)})),b.Rb(1,"ion-infinite-scroll-content",15),b.jc(2,"translate"),b.Vb()}2&t&&(b.Db(1),b.sc("loadingText",b.kc(2,1,"Loading more data...")))}var D,P,I,S=[{path:"",component:(D=function(){function t(e,n,i,o,a,r){_classCallCheck(this,t),this.ngxUiLoaderService=e,this.alertme=n,this.http=i,this.centerdb=o,this.ydata=a,this.ygen=r,this.addItemList=[],this.productlistcount=0,this.totalproducts=0,this.showscroll=!1,this.productlimit=50,this.saveonlytoglobal=!1,this.whatsize=50,this.queryText="",this.searchstring="{}"}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.centerdb.currenttenant.subscribe((function(e){e&&(t.crudList=new l.p(l.P.getpath()+"/shop/products",t.ydata.getDatabase(),!0,t.ygen.getUid()),t.crudList.getList().subscribe((function(e){t.productlimit=e.length})))})),this.ngxUiLoaderService.start(),this.centerdb.currenttenant.subscribe((function(e){t.crudList=new l.p(l.P.getpath()+"/shop/products",t.ydata.getDatabase(),!0,t.ygen.getUid())})),this.webcatalogs=this.http.get("https://bandhanmaratha.firebaseio.com/catalogmaster.json").pipe(Object(s.map)((function(e){return t.productlistcount=Object.keys(e).length,t.showscroll=!0,Object.keys(e).map((function(t){return Object.assign({maxqty:10,key:t},e[t])}))})),Object(u.a)((function(e){return t.alertme.errordata("Error Retriving the Web Catalog From Remote Server...Please refresh.."),t.ngxUiLoaderService.stop(),Object(c.a)([])})),Object(d.a)(2)),this.webcatalogs.subscribe((function(e){t.productlist=e,t.ngxUiLoaderService.stop()}))}},{key:"addtolist",value:function(t){this.addItemList.push(t)}},{key:"processlist",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return t.length<e&&(e=t.length),t.slice(0,e)}},{key:"loadData",value:function(t){var e=this;setTimeout((function(){console.log("Done"),t.target.complete(),e.whatsize>=e.productlistcount?t.target.disabled=!0:(t.target.disabled=!1,e.whatsize=e.whatsize+50)}),500)}},{key:"trimObjValues",value:function(t){return Object.keys(t).reduce((function(e,n){return e[n]="string"==typeof t[n]?t[n].trim():t[n],e}),{})}},{key:"saveItem",value:function(t){var e=(t=this.trimObjValues(t)).key;delete t.key,this.saveonlytoglobal||(this.ygen.canAddProducts()?this.crudList.addtolist(t):this.alertme.openSnackBar("Reach ".concat(this.productlimit," maxlimit of Products will not be added"),"OK")),this.globalsave(t,e)}},{key:"globalsave",value:function(t,e){e&&e.length>0&&this.ygen.isSuperAdmin()&&this.http.put("https://bandhanmaratha.firebaseio.com/catalogmaster/"+e+".json",t).subscribe((function(t){}))}},{key:"globaldelete",value:function(t,e){e&&e.length>0&&this.ygen.isSuperAdmin()&&this.http.delete("https://bandhanmaratha.firebaseio.com/catalogmaster/"+e+".json").subscribe((function(t){}))}},{key:"perform",value:function(t){switch(t.what){case"add":t.event.discount=this.getDiscount(t.event),this.saveItem(t.event),this.productlist=this.productlist.filter((function(e){return e.key!=t.event.key})),this.alertme.openSnackBar("Product Added to Your Catalog","Ok");break;case"delete":this.productlist=this.productlist.filter((function(e){return e.key!=t.event.key})),this.alertme.openSnackBar("Product deleted","Ok");break;case"deletex":this.productlist=this.productlist.filter((function(e){return e.key!=t.event.key})),this.globaldelete(t.event,t.event.key),this.alertme.openSnackBar("Product deleted","Ok");break;case"copy":t.event.discount=this.getDiscount(t.event),this.productlist.push(t.event),this.alertme.openSnackBar("Product copied","Ok")}}},{key:"getDiscount",value:function(t){var e=t.mrp?t.mrp:200;return(100*(e-(t.price?t.price:100))/e).toFixed(0)}},{key:"getItems",value:function(t){console.log(t)}},{key:"setSearchedProducts",value:function(t){this.totalproducts=t.length}}]),t}(),D.\u0275fac=function(t){return new(t||D)(b.Qb(h.c),b.Qb(l.a),b.Qb(p.b),b.Qb(l.P),b.Qb(l.Q),b.Qb(l.T))},D.\u0275cmp=b.Kb({type:D,selectors:[["app-catalogweb"]],decls:20,vars:17,consts:[[3,"color"],["slot","start"],["debounce","100",3,"placeholder","ngModel","ionChange","ngModelChange"],["mySearchbar",""],["loading",""],[4,"ngIf"],[4,"ngIf","ngIfElse"],["threshold","100px",3,"ionInfinite",4,"ngIf"],["type"," indeterminate","reversed","true"],[3,"ngModel","ngModelChange"],["class","productlist",4,"ngIf"],[1,"productlist"],[3,"product","webcatalogupload","productlist","onpage","actionevent",4,"ngFor","ngForOf"],[3,"product","webcatalogupload","productlist","onpage","actionevent"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles",3,"loadingText"]],template:function(t,e){if(1&t&&(b.Wb(0,"ion-header"),b.Wb(1,"ion-toolbar",0),b.Wb(2,"ion-buttons",1),b.Rb(3,"ion-back-button"),b.Vb(),b.Wb(4,"ion-title"),b.Mc(5),b.jc(6,"translate"),b.Vb(),b.Vb(),b.Wb(7,"ion-toolbar",0),b.Wb(8,"ion-searchbar",2,3),b.ec("ionChange",(function(t){return e.getItems(t)}))("ngModelChange",(function(t){return e.queryText=t})),b.jc(10,"translate"),b.Vb(),b.Vb(),b.Vb(),b.Wb(11,"ion-content"),b.Kc(12,m,1,0,"ng-template",null,4,b.Lc),b.Wb(14,"ion-item"),b.Mc(15),b.Vb(),b.Kc(16,y,4,4,"ion-item",5),b.Kc(17,j,3,5,"div",6),b.jc(18,"async"),b.Kc(19,O,3,3,"ion-infinite-scroll",7),b.Vb()),2&t){var n=b.zc(13);b.Db(1),b.rc("color","warning"),b.Db(4),b.Nc(b.kc(6,11,"Web Catalog")),b.Db(2),b.rc("color","warning"),b.Db(1),b.sc("placeholder",b.kc(10,13,"Search Products")),b.rc("ngModel",e.queryText),b.Db(7),b.Pc(' You are using "',e.ygen.getSubscriptionType(),'" subscription; You can add max ',e.ygen.maxproductsCanAdded()," products; "),b.Db(1),b.rc("ngIf",e.ygen.isSuperAdmin()),b.Db(1),b.rc("ngIf",b.kc(18,15,e.webcatalogs))("ngIfElse",n),b.Db(2),b.rc("ngIf",e.showscroll)}},directives:[a.y,a.hb,a.j,a.f,a.g,a.fb,a.S,a.ub,o.p,o.s,a.s,a.D,i.m,a.P,g.a,i.l,f.a,a.A,a.B],pipes:[v.c,i.b,l.F],styles:[".productCardSection[_ngcontent-%COMP%]{white-space:nowrap;height:auto;overflow-X:scroll;overflow-y:hidden}.mytopsaver[_ngcontent-%COMP%]{display:flex}.productlist[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}"]}),D)}],x=((P=function t(){_classCallCheck(this,t)}).\u0275mod=b.Ob({type:P}),P.\u0275inj=b.Nb({factory:function(t){return new(t||P)},imports:[[r.n.forChild(S)],r.n]}),P),V=n("uUdd"),W=((I=function t(){_classCallCheck(this,t)}).\u0275mod=b.Ob({type:I}),I.\u0275inj=b.Nb({factory:function(t){return new(t||I)},imports:[[i.c,o.j,a.ib,l.H,l.o,l.b,V.a,x]]}),I)}}]);