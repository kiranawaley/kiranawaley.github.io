(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{WTVw:function(e,t,i){"use strict";i.r(t),i.d(t,"EventsPageModule",(function(){return z}));var n=i("ofXK"),o=i("3Pt+"),c=i("tyNb"),a=i("TEn/"),s=i("X/JO"),r=i("+DAS"),l=i("ybIa"),d=i("0IaG"),b=i("YKLQ"),p=i("i2Ty"),g=i("rIxz"),h=i("Yej2"),u=i("h3ty"),f=i("MTSo"),m=i("fXoL"),v=i("7EHt"),y=i("YCbS"),w=i("/per"),x=i("sYmb"),C=i("/t3+"),k=i("bTqV"),V=i("NFeN");const W=["yocameraelement"];function O(e,t){if(1&e){const e=m.Xb();m.Wb(0,"ion-buttons",5),m.Wb(1,"ion-button",6),m.ec("click",(function(){return m.Cc(e),m.ic().navigate("addevent",{})})),m.Rb(2,"ion-icon",7),m.Vb(),m.Vb()}}function M(e,t){if(1&e&&m.Rb(0,"img",28),2&e){const e=m.ic().$implicit;m.rc("src",e.image,m.Ec)}}function P(e,t){if(1&e){const e=m.Xb();m.Wb(0,"div",31),m.Wb(1,"div"),m.Wb(2,"img",32),m.ec("click",(function(){m.Cc(e);const i=t.$implicit;return m.ic(3).ygen.openimage(i.src,"need to be upload")})),m.Vb(),m.Vb(),m.Wb(3,"span"),m.Wb(4,"ion-button",33),m.ec("click",(function(){m.Cc(e);const i=t.$implicit;return m.ic(3).deletephoto(i)})),m.Rb(5,"ion-icon",34),m.Vb(),m.Wb(6,"ion-button",35),m.ec("click",(function(){m.Cc(e);const i=t.$implicit;return m.ic(3).savePhoto(i)})),m.Rb(7,"ion-icon",36),m.Vb(),m.Vb(),m.Vb()}if(2&e){const e=t.$implicit;m.Db(2),m.rc("src",e.src,m.Ec)}}function _(e,t){if(1&e){const e=m.Xb();m.Wb(0,"span"),m.Wb(1,"ion-button",33),m.ec("click",(function(){m.Cc(e);const t=m.ic().$implicit,i=m.ic(2).$implicit;return m.ic().deletesaved(t,i.$key)})),m.Rb(2,"ion-icon",34),m.Vb(),m.Vb()}}function D(e,t){if(1&e){const e=m.Xb();m.Wb(0,"div",31),m.Wb(1,"div"),m.Wb(2,"img",32),m.ec("click",(function(){m.Cc(e);const i=t.$implicit;return m.ic(3).ygen.openimage(i.value.photo,"")})),m.Vb(),m.Vb(),m.Jc(3,_,3,0,"span",37),m.Vb()}if(2&e){const e=t.$implicit,i=m.ic(3);m.Db(2),m.sc("src",e.value.photo,m.Ec),m.Db(1),m.rc("ngIf",i.ygen.canI(e.createdBy,"event"))}}function I(e,t){if(1&e&&(m.Wb(0,"div",29),m.Jc(1,P,8,1,"div",30),m.Jc(2,D,4,2,"div",30),m.jc(3,"keyvalue"),m.Vb()),2&e){const e=m.ic().$implicit,t=m.ic();m.Db(1),m.rc("ngForOf",t.getstrip(e.$key,t.mystrip)),m.Db(1),m.rc("ngForOf",m.kc(3,2,e.images))}}function $(e,t){1&e&&(m.Wb(0,"div"),m.Lc(1),m.jc(2,"translate"),m.Vb()),2&e&&(m.Db(1),m.Nc(" ",m.kc(2,1,"No Addtional Photos, click photos icon to add it"),". "))}function E(e,t){if(1&e){const e=m.Xb();m.Wb(0,"app-appicon",18),m.ec("actionEvent",(function(){m.Cc(e);const t=m.ic(2).$implicit;return m.ic().inactive(t)})),m.Vb()}2&e&&m.rc("color","danger")("icon","visibility_off")("icontext","Disable")("isiconwithtext",!0)}function L(e,t){if(1&e&&(m.Wb(0,"div",17),m.Jc(1,E,1,4,"app-appicon",38),m.Vb()),2&e){const e=m.ic().$implicit;m.Db(1),m.rc("ngIf",e.active)}}function J(e,t){if(1&e){const e=m.Xb();m.Wb(0,"div",17),m.Wb(1,"app-appicon",18),m.ec("actionEvent",(function(){m.Cc(e);const t=m.ic().$implicit;return m.ic().active(t)})),m.Vb(),m.Vb()}2&e&&(m.Db(1),m.rc("color","warn")("icon","visibility")("icontext","Enable")("isiconwithtext",!0))}function N(e,t){if(1&e){const e=m.Xb();m.Wb(0,"app-appicon",40),m.ec("actionEvent",(function(){m.Cc(e);const t=m.ic(2).$implicit;return m.ic().closeEvent(t)})),m.Vb()}2&e&&m.rc("icon","done_all")("icontext","Close")("isiconwithtext",!0)}function S(e,t){if(1&e&&(m.Wb(0,"div",17),m.Jc(1,N,1,3,"app-appicon",39),m.Vb()),2&e){const e=m.ic().$implicit;m.Db(1),m.rc("ngIf",!e.eventOver)}}function Q(e,t){if(1&e){const e=m.Xb();m.Wb(0,"div",17),m.Wb(1,"app-appicon",18),m.ec("actionEvent",(function(){m.Cc(e);const t=m.ic().$implicit;return m.ic().delete(t)})),m.Vb(),m.Vb()}2&e&&(m.Db(1),m.rc("color","accent")("icon","delete")("icontext","Delete")("isiconwithtext",!0))}function R(e,t){if(1&e){const e=m.Xb();m.Wb(0,"div",17),m.Wb(1,"app-yocamera",41,42),m.ec("imagetobeuploaded",(function(t){m.Cc(e);const i=m.ic().$implicit;return m.ic().showpreview(t,i.$key)})),m.Vb(),m.Vb()}if(2&e){const e=m.ic().$implicit;m.Db(1),m.rc("whatkey",e.$key)}}function X(e,t){if(1&e){const e=m.Xb();m.Wb(0,"ion-button",27),m.ec("click",(function(){m.Cc(e);const t=m.ic().$implicit;return m.ic().viewEntry(t)})),m.Lc(1,"View Entries "),m.Vb()}}function j(e,t){if(1&e){const e=m.Xb();m.Wb(0,"ion-card"),m.Jc(1,M,1,1,"img",8),m.Wb(2,"div",9),m.Jc(3,I,4,4,"div",10),m.Vb(),m.Jc(4,$,3,3,"ng-template",null,11,m.Kc),m.Wb(6,"ion-item",12),m.ec("click",(function(){m.Cc(e);const i=t.$implicit;return m.ic().navigate("addevent",{key:i.$key})})),m.Wb(7,"ion-label",13),m.Lc(8),m.Vb(),m.Vb(),m.Wb(9,"ion-item"),m.Wb(10,"mat-expansion-panel",14),m.Wb(11,"mat-expansion-panel-header"),m.Wb(12,"mat-panel-title"),m.Lc(13),m.jc(14,"date"),m.Vb(),m.Vb(),m.Wb(15,"div",15),m.Jc(16,L,2,1,"div",16),m.Jc(17,J,2,4,"div",16),m.Jc(18,S,2,1,"div",16),m.Jc(19,Q,2,4,"div",16),m.Jc(20,R,3,1,"div",16),m.Wb(21,"div",17),m.Wb(22,"app-appicon",18),m.ec("actionEvent",(function(){return m.Cc(e),m.ic().ygen.shareMessage("dada","","")})),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Wb(23,"ion-card-content"),m.Lc(24),m.Vb(),m.Wb(25,"ion-item"),m.Wb(26,"div",19),m.Wb(27,"div",20),m.Wb(28,"div",21),m.Lc(29,"Organizer"),m.Vb(),m.Wb(30,"div",22),m.Lc(31),m.Vb(),m.Vb(),m.Wb(32,"div",23),m.Wb(33,"div",24),m.Rb(34,"app-callphone",25),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Wb(35,"ion-item"),m.Jc(36,X,2,0,"ion-button",26),m.Wb(37,"ion-button",27),m.ec("click",(function(){m.Cc(e);const i=t.$implicit;return m.ic().navigate("registerforevent",{key:i.$key})})),m.Lc(38,"Register For Event "),m.Vb(),m.Vb(),m.Vb()}if(2&e){const e=t.$implicit,i=m.ic();m.Db(1),m.rc("ngIf",e.imageuploaded),m.Db(2),m.rc("ngIf",i.getstrip(e.$key,i.mystrip).length>0||e.images),m.Db(5),m.Nc(" ",e.title," "),m.Db(5),m.Nc(" ",m.lc(14,17,e.startdate,"MMM dd yyyy hh:mm a")," "),m.Db(3),m.rc("ngIf",i.ygen.canI("","event")),m.Db(1),m.rc("ngIf",!e.active&&i.ygen.canI("","event")),m.Db(1),m.rc("ngIf",i.ygen.canI("","event")),m.Db(1),m.rc("ngIf",i.ygen.canI("","event")),m.Db(1),m.rc("ngIf",i.ygen.canI("","event")),m.Db(2),m.rc("color","primary")("icon","share")("icontext","share")("isiconwithtext",!0),m.Db(2),m.Nc(" ",e.description," "),m.Db(7),m.Nc(" ",e.contactname," "),m.Db(3),m.rc("mobile",null==e?null:e.contactnumber),m.Db(2),m.rc("ngIf",e.registration)}}let A=(()=>{class e{constructor(e,t,i,n,o,c,a,s,r,d){this.photoUploadService=e,this.ycamera=t,this.ygen=i,this.alertme=n,this.route=o,this.router=c,this.boardService=a,this.ysharedata=s,this.ydata=r,this.dialog=d,this.imagescapturedComp=new Map,this.screenrefresh=!0,this.mystrip=[],this.showre=!1,this.sourcere="",this.refreshme=!1,this.crudList=new l.a("/board/events",r.getDatabase(),!0,i.getUid()),this.events=this.crudList.getList(),this.crudData=new l.a("/items",r.getDatabase(),!1,i.getUid()),this.settingItems=this.crudData.getData()}ngOnInit(){this.refreshCamera()}viewEntry(e){let t=[];e.registration&&(t=Object.keys(e.registration).map(t=>Object.assign(e.registration[t],{$key:t}))),this.openDialog(t)}navigate(e,t){this.ysharedata.setData("currentevent",t),this.router.navigate([e],{queryParams:t})}openDialog(e){this.dialog.open(T,{panelClass:"myapp-no-padding-dialog",height:"90%",width:"90%",data:e}).afterClosed().subscribe(e=>{console.log("The dialog was closed",e)})}takeAcion(e){console.log("yeah",e)}doit(e,t){setTimeout(()=>{this.crudList.updateList(t?{$key:e.$key,active:!0,eventOver:!1}:{$key:e.$key,active:!1})},1e3)}closeEvent(e){this.screenrefresh=!1,this.alertme.question("Are You Sure?","Close Event","No").then(t=>{t.value&&setTimeout(()=>{this.crudList.updateList({$key:e.$key,active:!1,eventOver:!0})},1e3),this.screenrefresh=!0})}active(e){this.alertme.question("Are You Sure?","Activate Event","No").then(t=>{t.value&&this.doit(e,!0)})}inactive(e){this.alertme.question("Are You Sure?","Disable Event","No").then(t=>{t.value&&this.doit(e,!1)})}edit(e){this.alertme.question("Are You Sure?","Delete","No").then(t=>{t.value&&this.crudList.removefromList(e)})}delete(e){this.alertme.question("Are You Sure?","Delete","No").then(t=>{t.value&&setTimeout(()=>{this.crudList.removefromList(e)},1e3)})}showpreview(e,t){this.showre=!0,this.sourcere=e,this.mystrip.push(e)}showstrip(e){return this.mystrip.some(t=>t.whatfor===e)}getstrip(e,t){let i=t.filter(t=>t.whatfor===e);return console.log(i.length),i}deletfromStrip(e){this.mystrip=this.mystrip.filter(t=>t.filename!=e)}deletephoto(e){this.deletfromStrip(e.filename),this.refreshCamera()}refreshCamera(){this.refreshme=!1,setTimeout(()=>{this.refreshme=!0},100)}saveImage(e){return this.photoUploadService.uploadImage(e)}saveMobileImage(e){return this.photoUploadService.uploadAPicture(e)}savePhoto(e){this.refreshCamera(),this.ygen.ismobile()?(this.alertme.infodata("Uploading and saving photo.."),this.saveMobileImage(e.src).then(t=>{console.log("what we have recieved image 1 "+t),console.log("what we have recieved image 1 "+t);const i=JSON.parse(t.response);console.log("we got the url...."+t.response),console.log("we got the url...."+i.secure_url),this.addImages(e.whatfor,{photo:i.secure_url}),this.deletephoto(e),this.alertme.successdata("Saved...")})):this.saveImage(e.files).then(t=>{console.log("what we have recieved image 2 "+t.secure_url),this.addImages(e.whatfor,{photo:t.secure_url}),this.deletephoto(e)})}addImages(e,t){new l.a("/board/events/"+e+"/images",this.ydata.getDatabase(),!0,this.ygen.getUid()).addtolist(t)}deletesaved(e,t){this.alertme.question("Are You Sure?","Delete","No").then(i=>{i.value&&setTimeout(()=>{new l.a("/board/events/"+t+"/images",this.ydata.getDatabase(),!0,this.ygen.getUid()).removefromList({$key:e.key})},1e3)})}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(f.a),m.Qb(h.a),m.Qb(g.a),m.Qb(p.a),m.Qb(c.a),m.Qb(c.g),m.Qb(s.a),m.Qb(b.a),m.Qb(r.a),m.Qb(d.b))},e.\u0275cmp=m.Kb({type:e,selectors:[["app-events"]],viewQuery:function(e,t){var i;1&e&&(m.Rc(W,!0),m.Rc(W,!0)),2&e&&(m.yc(i=m.fc())&&(t.yocam=i.first),m.yc(i=m.fc())&&(t.yocamViewChildren=i))},decls:10,vars:5,consts:[[3,"color"],["slot","start"],["slot","end","color","secondary",4,"ngIf"],["padding",""],[4,"ngFor","ngForOf"],["slot","end","color","secondary"],[3,"click"],["slot","icon-only","name","add"],["class","imageshow",3,"src",4,"ngIf"],[1,"roll"],["id","scrolly",4,"ngIf"],["nophotos",""],["button","",3,"click"],[1,"ion-text-wrap"],[2,"width","100%"],[1,"container"],["class","item",4,"ngIf"],[1,"item"],[3,"color","icon","icontext","isiconwithtext","actionEvent"],[1,"infocontainer"],[1,"item","atstart"],[1,"whatlable"],[1,"forlable"],[1,"item","atend"],[2,"float","right","padding","5px"],[3,"mobile"],["fill","outline","slot","end",3,"click",4,"ngIf"],["fill","outline","slot","end",3,"click"],[1,"imageshow",3,"src"],["id","scrolly"],["class","imgds",4,"ngFor","ngForOf"],[1,"imgds"],[1,"imgc",3,"src","click"],["color","danger","size","small",1,"delete",3,"click"],["slot","icon-only","name","trash"],["size","small",1,"save",3,"click"],["slot","icon-only","name","save"],[4,"ngIf"],[3,"color","icon","icontext","isiconwithtext","actionEvent",4,"ngIf"],[3,"icon","icontext","isiconwithtext","actionEvent",4,"ngIf"],[3,"icon","icontext","isiconwithtext","actionEvent"],[3,"whatkey","imagetobeuploaded"],["yocameraelement",""]],template:function(e,t){1&e&&(m.Wb(0,"ion-header"),m.Wb(1,"ion-toolbar",0),m.Wb(2,"ion-buttons",1),m.Rb(3,"ion-back-button"),m.Vb(),m.Wb(4,"ion-title"),m.Lc(5,"Events"),m.Vb(),m.Jc(6,O,3,0,"ion-buttons",2),m.Vb(),m.Vb(),m.Wb(7,"ion-content",3),m.Jc(8,j,39,20,"ion-card",4),m.jc(9,"async"),m.Vb()),2&e&&(m.Db(1),m.rc("color","warning"),m.Db(5),m.rc("ngIf",t.ygen.canI("","event")),m.Db(2),m.rc("ngForOf",m.kc(9,3,t.events)))},directives:[a.y,a.fb,a.j,a.f,a.g,a.db,n.m,a.s,n.l,a.i,a.z,a.k,a.B,a.H,v.c,v.e,v.f,y.a,a.l,w.a,u.a],pipes:[n.b,n.e,n.g,x.c],styles:["table[_ngcontent-%COMP%]{width:100%}.example-icon[_ngcontent-%COMP%]{padding:0 14px}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.mat-dialog-container[_ngcontent-%COMP%]{padding:0}.dada[_ngcontent-%COMP%]{position:absolute;width:375px;height:594px;left:-161.02px;top:471.39px;background:#f41515;border-radius:56px;transform:rotate(-50.6deg)}.container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;width:100%}.item[_ngcontent-%COMP%]{flex-grow:1}.infocontainer[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;width:100%}.atstart[_ngcontent-%COMP%]{align-self:flex-start}.atend[_ngcontent-%COMP%]{align-self:flex-end}mat-expansion-panel[_ngcontent-%COMP%]{background:#eff7f6}.imageshow[_ngcontent-%COMP%]{max-height:300px;max-width:500px;height:auto;width:auto;margin:auto;padding-bottom:10px}.addphotos[_ngcontent-%COMP%]{padding:0}#scrolly[_ngcontent-%COMP%]{width:100%;height:120px;overflow:auto;overflow-y:hidden;margin:0 auto;white-space:nowrap;display:inline-flex}.imgc[_ngcontent-%COMP%]{height:100px;width:100px;margin:2px 1px;display:inline;border:1px solid #ddd;border-radius:4px;padding:5px}.roll[_ngcontent-%COMP%]{background-color:#000;padding:5px}.imgds[_ngcontent-%COMP%]{height:100px;display:inline}.imagearea[_ngcontent-%COMP%]{overflow-x:scroll;overflow-y:hidden;-webkit-overflow-scrolling:touch;display:-webkit-inline-box;border:#0f03f4;border-style:solid;border-width:2px}.delete[_ngcontent-%COMP%], .save[_ngcontent-%COMP%]{position:relative;top:-37px}.whatlable[_ngcontent-%COMP%]{font-size:12px;font-family:cursive}"]}),e})(),T=(()=>{class e{constructor(e,t){this.dialogRef=e,this.data=t,this.displayedColumns=["id","name","mobile"],console.log("data ==>",t),this.dataSource=t}onNoClick(){this.dialogRef.close()}gotoExternal(e){window.location.href=e}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(d.h),m.Qb(d.a))},e.\u0275cmp=m.Kb({type:e,selectors:[["dialog-overview-example-dialog"]],decls:8,vars:0,consts:[["color","primary"],[1,"example-spacer"],["mat-mini-fab","","aria-label","Example icon-button with a heart icon",3,"click"]],template:function(e,t){1&e&&(m.Wb(0,"mat-toolbar",0),m.Wb(1,"mat-toolbar-row"),m.Wb(2,"span"),m.Lc(3,"Registration"),m.Vb(),m.Rb(4,"span",1),m.Wb(5,"button",2),m.ec("click",(function(){return t.onNoClick()})),m.Wb(6,"mat-icon"),m.Lc(7,"close"),m.Vb(),m.Vb(),m.Vb(),m.Vb())},directives:[C.a,C.c,k.a,V.a],styles:["table[_ngcontent-%COMP%]{width:100%}.example-icon[_ngcontent-%COMP%]{padding:0 14px}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.mat-dialog-container[_ngcontent-%COMP%]{padding:0}.dada[_ngcontent-%COMP%]{position:absolute;width:375px;height:594px;left:-161.02px;top:471.39px;background:#f41515;border-radius:56px;transform:rotate(-50.6deg)}.container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;width:100%}.item[_ngcontent-%COMP%]{flex-grow:1}.infocontainer[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;width:100%}.atstart[_ngcontent-%COMP%]{align-self:flex-start}.atend[_ngcontent-%COMP%]{align-self:flex-end}mat-expansion-panel[_ngcontent-%COMP%]{background:#eff7f6}.imageshow[_ngcontent-%COMP%]{max-height:300px;max-width:500px;height:auto;width:auto;margin:auto;padding-bottom:10px}.addphotos[_ngcontent-%COMP%]{padding:0}#scrolly[_ngcontent-%COMP%]{width:100%;height:120px;overflow:auto;overflow-y:hidden;margin:0 auto;white-space:nowrap;display:inline-flex}.imgc[_ngcontent-%COMP%]{height:100px;width:100px;margin:2px 1px;display:inline;border:1px solid #ddd;border-radius:4px;padding:5px}.roll[_ngcontent-%COMP%]{background-color:#000;padding:5px}.imgds[_ngcontent-%COMP%]{height:100px;display:inline}.imagearea[_ngcontent-%COMP%]{overflow-x:scroll;overflow-y:hidden;-webkit-overflow-scrolling:touch;display:-webkit-inline-box;border:#0f03f4;border-style:solid;border-width:2px}.delete[_ngcontent-%COMP%], .save[_ngcontent-%COMP%]{position:relative;top:-37px}.whatlable[_ngcontent-%COMP%]{font-size:12px;font-family:cursive}"]}),e})();var Y=i("hVaU"),F=i("IZvt"),U=i("4pxM");const q=[{path:"",component:A}];let z=(()=>{class e{}return e.\u0275mod=m.Ob({type:e}),e.\u0275inj=m.Nb({factory:function(t){return new(t||e)},imports:[[n.c,o.i,a.gb,Y.a,F.a,U.a,c.k.forChild(q)]]}),e})()}}]);