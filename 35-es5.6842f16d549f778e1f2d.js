function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{fOxN:function(e,t,a){"use strict";a.r(t),a.d(t,"PresentdirPageModule",(function(){return N}));var n=a("ofXK"),i=a("3Pt+"),r=a("tyNb"),o=a("TEn/"),s=a("X/JO"),c=a("DzsY"),h=a("D+2S"),l=a("mLjM"),u=a("PWOX"),d=a("wd/R"),b=a("DVUX"),m=a("YKLQ"),p=a("fXoL"),f=a("Wp6s"),g=a("iEmi"),y=a("sYmb");function v(e,t){1&e&&(p.Wb(0,"ion-item"),p.Wb(1,"b"),p.Mc(2,"No Resident Found"),p.Vb(),p.Vb())}function w(e,t){if(1&e&&(p.Wb(0,"ion-item"),p.Wb(1,"b"),p.Mc(2),p.Vb(),p.Vb()),2&e){var a=p.ic(2);p.Db(2),p.Oc("[",a.tempItems.length,"] Residents found")}}function k(e,t){if(1&e){var a=p.Xb();p.Wb(0,"ion-item",7),p.Wb(1,"ion-label"),p.Mc(2),p.Vb(),p.Wb(3,"ion-checkbox",8),p.ec("ngModelChange",(function(e){return p.Cc(a),t.$implicit.checked=e}))("ionChange",(function(){p.Cc(a);var e=t.$implicit;return p.ic(2).putInSendRequest(e)})),p.Vb(),p.Vb()}if(2&e){var n=t.$implicit;p.Db(2),p.Pc("",n.userName," | ",n.unitName,""),p.Db(1),p.rc("ngModel",n.checked)}}function C(e,t){if(1&e&&(p.Wb(0,"div"),p.Kc(1,v,3,0,"ion-item",3),p.Kc(2,w,3,1,"ion-item",3),p.Kc(3,k,4,3,"ion-item",6),p.Vb()),2&e){var a=p.ic();p.Db(1),p.rc("ngIf",0==a.tempItems.length),p.Db(1),p.rc("ngIf",a.tempItems.length>0),p.Db(1),p.rc("ngForOf",a.tempItems)}}function I(e,t){if(1&e){var a=p.Xb();p.Wb(0,"yogagainv2-dyanamic-page",9),p.ec("actionEvent",(function(e){return p.Cc(a),p.ic().send(e)}))("cancelEvent",(function(e){return p.Cc(a),p.ic().cancel(e)})),p.Vb()}if(2&e){var n=p.ic();p.rc("captchaOn",!1)("captchaName","registercaptcha")("whatform",n.whatcontrolsmap)("whatformgroup",n.inwhatformgroup)("whichbuttons",n.mybuttons)}}var W,x,O=((W=function(){function e(t,a,n,i,r,o,s){var c=this;_classCallCheck(this,e),this.activatedRoute=t,this.route=a,this.ydataservice=n,this.toasterservice=i,this.boardService=r,this.yobuilderservice=o,this.yauthservice=s,this.needcaptcha=!1,this.whatcontrolsmap=new Map,this.mybuttons=new Map,this.prof=new Array,this.items=new Array,this.toSendItems=new Array,this.tempItems=new Array,this.searchQuery="",this.searchobj={name:"",mobile:"",category:"",photo:""},r.getProfiles().valueChanges().forEach((function(e){c.prof=e,c.items=e})),this.workers=r.getWorkers()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=null;this.ydataservice.getData("editme")&&(e=Object.assign({},this.ydataservice.getData("editme"))),this.startObject(e),this.ydataservice.setData("editme",null)}},{key:"getItems",value:function(e){this.toSendItems=new Array,this.tempItems=new Array;var t=e.target.value;this.searchQuery=t,t&&""!=t.trim()?this.tempItems=this.items.filter("*all"==t?function(e){return e.checked=!1,!0}:function(e){return e.checked=!1,console.log("item",e),e.unitName?e.userid.toLowerCase().indexOf(t.toLowerCase())>-1||e.userName.toLowerCase().indexOf(t.toLowerCase())>-1||e.unitName.toLowerCase().indexOf(t.toLowerCase())>-1:e.userid.toLowerCase().indexOf(t.toLowerCase())>-1||e.userName.toLowerCase().indexOf(t.toLowerCase())>-1}):this.startObject(null)}},{key:"startObject",value:function(e){var t=this;this.clear=!1,this.whatcontrolsmap=new Map,this.inwhatformgroup=null;var a=new Map,n=[],i=0,r=d(new Date).format("YYYY-MM-DD");n[i]=new l.b(i,"name",e?e.name:"",l.a.text),n[i].placeholder="Name",n[i].required=!0,n[++i]=new l.b(i,"mobile",e?e.mobile:"",l.a.phone),n[i].placeholder="Enter Phone",n[i].required=!0,n[++i]=new l.b(i,"regdate",r,l.a.date),n[i].enabled=!1,n[i].showme=!0,n[++i]=new l.b(i,"image",e?e.image:"https://res.cloudinary.com/ideasyogi/image/upload/v1589964651/default_qkhcdj.jpg",l.a.image),n[i].placeholder="Profile Picture",n[i].required=!1,n[++i]=new l.b(i,"category","",l.a.select),n[i].placeholder="Category",n[i].value={selected:e?e.category:"",options:["Maid","Delivery Boy","Car Washer","Staff","Resident","Member","Visitor","Tanker","Other"]},n[i].required=!0,n[++i]=new l.b(i,"statusdate",r,l.a.date),n[i].enabled=!1,n[i].required=!1,n[i].showme=!1,n[++i]=new l.b(i,"in",{selected:e?e.in:"true",options:["true","false"]},l.a.radio),n[i].placeholder="IN",n[i].enabled=!1,n[i].required=!1,n[i].showme=!1,n[++i]=new l.b(i,"createdBy",this.yauthservice.getCurrentUserId(),l.a.text),n[i].placeholder="createdBy",n[i].enabled=!1,n[i].showme=!1,n[i].required=!1,e&&e.$key&&(n[++i]=new l.b(i,"$key",e.$key,l.a.text),n[i].placeholder="editkey",n[i].enabled=!1,n[i].showme=!1,n[i].required=!1),n.forEach((function(e){a.set(e.name,e)})),this.inwhatformgroup=this.yobuilderservice.createFormGroup(a),this.whatcontrolsmap=this.yobuilderservice.createMap(a,this.inwhatformgroup);var o=new h.a("Cancel","cancel","cancel_presentation","secondary",!1),s=new h.a("Add User","register","lock_open","primary",!1);this.mybuttons.set("Action2",s),this.mybuttons.set("Action1",o),setTimeout((function(){t.clear=!0}),50)}},{key:"putInSendRequest",value:function(e){if(this.tempItems=new Array,e.checked?(this.searchobj.name=this.processUserName(e.userName),this.searchobj.mobile=this.processMobile(e.userName),this.searchobj.category="Resident",this.searchobj.photo=e.photo&&e.photo.length>0?e.photo:"https://res.cloudinary.com/ideasyogi/image/upload/v1589964651/default_qkhcdj.jpg",this.getItems({target:{value:e.email}}),this.startObject(this.searchobj)):this.startObject(null),this.toSendItems.find((function(t){return t.email==e.email}))){if(!e.checked)for(var t=0;t<this.toSendItems.length;t++)if(e.email===this.toSendItems[t].email){this.toSendItems.splice(t,1);break}}else e.checked&&this.toSendItems.push(e)}},{key:"processUserName",value:function(e){return e?e.split("|")[0]:""}},{key:"processMobile",value:function(e){if(e){var t=e.split("|");if(t.length>=2)return t[1]}return""}},{key:"send",value:function(e){var t=this;this.yobuilderservice.enableformcontrols(e.data.controls);var a=Object.assign(Object.assign({},e.data.value),{in:!1,createdBy:this.yauthservice.getCurrentUserId()});console.log("xxxxxxxxxxxx",e);var n=!!a.$key;this.boardService.addWorker(a,n).then((function(e){t.toasterservice.pop("success","Success","Entry added successfully \n Add details of visit.."),n||(a.$key=e.key),t.ydataservice.setData("update",t.boardService.getWorkersCrud()),t.ydataservice.setData("comingin",a),t.route.navigateByUrl("/enterdetail")}))}},{key:"ionViewWillEnter",value:function(){}},{key:"cancel",value:function(e){this.ydataservice.getData("comingfrom")&&"outpage"==this.ydataservice.getData("comingfrom")?(this.ydataservice.clearData("comingfrom"),this.route.navigateByUrl("/inout/out")):this.route.navigateByUrl("/inout/in")}}]),e}()).\u0275fac=function(e){return new(e||W)(p.Qb(r.a),p.Qb(r.j),p.Qb(m.a),p.Qb(b.d),p.Qb(s.a),p.Qb(c.a),p.Qb(u.a))},W.\u0275cmp=p.Kb({type:W,selectors:[["app-presentdir"]],decls:17,vars:5,consts:[["slot","start"],[3,"placeholder","ionInput"],["padding",""],[4,"ngIf"],[1,"box"],[3,"captchaOn","captchaName","whatform","whatformgroup","whichbuttons","actionEvent","cancelEvent",4,"ngIf"],["text-wrap","","class","searcheditems",4,"ngFor","ngForOf"],["text-wrap","",1,"searcheditems"],["color","dark","checked","false",3,"ngModel","ngModelChange","ionChange"],[3,"captchaOn","captchaName","whatform","whatformgroup","whichbuttons","actionEvent","cancelEvent"]],template:function(e,t){1&e&&(p.Wb(0,"ion-header"),p.Wb(1,"ion-toolbar"),p.Wb(2,"ion-buttons",0),p.Rb(3,"ion-back-button"),p.Vb(),p.Wb(4,"ion-title"),p.Mc(5,"Gate Entry"),p.Vb(),p.Vb(),p.Wb(6,"ion-toolbar"),p.Wb(7,"ion-searchbar",1),p.ec("ionInput",(function(e){return t.getItems(e)})),p.jc(8,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(9,"ion-content",2),p.Kc(10,C,4,3,"div",3),p.Wb(11,"ion-grid"),p.Wb(12,"ion-row"),p.Wb(13,"ion-col"),p.Wb(14,"mat-card"),p.Wb(15,"mat-card-content",4),p.Kc(16,I,1,5,"yogagainv2-dyanamic-page",5),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&e&&(p.Db(7),p.sc("placeholder",p.kc(8,3,"Search Society Resident")),p.Db(3),p.rc("ngIf",(null==t.searchQuery?null:t.searchQuery.length)>=1),p.Db(6),p.rc("ngIf",t.clear))},directives:[o.y,o.fb,o.j,o.f,o.g,o.db,o.Q,o.sb,o.s,n.m,o.x,o.P,o.r,f.a,f.d,n.l,o.B,o.H,o.p,o.c,i.n,i.q,g.a],pipes:[y.c],styles:[""]}),W),V=a("hVaU"),j=a("IZvt"),D=a("4pxM"),M=[{path:"",component:O}],N=((x=function e(){_classCallCheck(this,e)}).\u0275mod=p.Ob({type:x}),x.\u0275inj=p.Nb({factory:function(e){return new(e||x)},imports:[[n.c,i.i,o.gb,V.a,j.a,D.a,r.n.forChild(M)]]}),x)}}]);