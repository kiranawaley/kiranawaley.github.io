(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{fOxN:function(e,t,i){"use strict";i.r(t),i.d(t,"PresentdirPageModule",(function(){return w}));var a=i("ofXK"),r=i("3Pt+"),s=i("tyNb"),n=i("TEn/"),o=i("OJQs"),c=i("wd/R"),h=i("DVUX"),l=i("fXoL"),d=i("Wp6s"),u=i("sYmb");function m(e,t){1&e&&(l.Wb(0,"ion-item"),l.Wb(1,"b"),l.Mc(2,"No Resident Found"),l.Vb(),l.Vb())}function b(e,t){if(1&e&&(l.Wb(0,"ion-item"),l.Wb(1,"b"),l.Mc(2),l.Vb(),l.Vb()),2&e){const e=l.ic(2);l.Db(2),l.Oc("[",e.tempItems.length,"] Residents found")}}function p(e,t){if(1&e){const e=l.Xb();l.Wb(0,"ion-item",7),l.Wb(1,"ion-label"),l.Mc(2),l.Vb(),l.Wb(3,"ion-checkbox",8),l.ec("ngModelChange",(function(i){return l.Cc(e),t.$implicit.checked=i}))("ionChange",(function(){l.Cc(e);const i=t.$implicit;return l.ic(2).putInSendRequest(i)})),l.Vb(),l.Vb()}if(2&e){const e=t.$implicit;l.Db(2),l.Pc("",e.userName," | ",e.unitName,""),l.Db(1),l.rc("ngModel",e.checked)}}function g(e,t){if(1&e&&(l.Wb(0,"div"),l.Kc(1,m,3,0,"ion-item",3),l.Kc(2,b,3,1,"ion-item",3),l.Kc(3,p,4,3,"ion-item",6),l.Vb()),2&e){const e=l.ic();l.Db(1),l.rc("ngIf",0==e.tempItems.length),l.Db(1),l.rc("ngIf",e.tempItems.length>0),l.Db(1),l.rc("ngForOf",e.tempItems)}}function f(e,t){if(1&e){const e=l.Xb();l.Wb(0,"yogagainv2-dyanamic-page",9),l.ec("actionEvent",(function(t){return l.Cc(e),l.ic().send(t)}))("cancelEvent",(function(t){return l.Cc(e),l.ic().cancel(t)})),l.Vb()}if(2&e){const e=l.ic();l.rc("captchaOn",!1)("captchaName","registercaptcha")("whatform",e.whatcontrolsmap)("whatformgroup",e.inwhatformgroup)("whichbuttons",e.mybuttons)}}const y=[{path:"",component:(()=>{class e{constructor(e,t,i,a,r,s,n){this.activatedRoute=e,this.route=t,this.ydataservice=i,this.toasterservice=a,this.boardService=r,this.yobuilderservice=s,this.yauthservice=n,this.needcaptcha=!1,this.whatcontrolsmap=new Map,this.mybuttons=new Map,this.prof=new Array,this.items=new Array,this.toSendItems=new Array,this.tempItems=new Array,this.searchQuery="",this.searchobj={name:"",mobile:"",category:"",photo:""},r.getProfiles().valueChanges().forEach(e=>{this.prof=e,this.items=e}),this.workers=r.getWorkers()}ngOnInit(){let e=null;this.ydataservice.getData("editme")&&(e=Object.assign({},this.ydataservice.getData("editme"))),this.startObject(e),this.ydataservice.setData("editme",null)}getItems(e){this.toSendItems=new Array,this.tempItems=new Array;let t=e.target.value;this.searchQuery=t,t&&""!=t.trim()?this.tempItems=this.items.filter("*all"==t?e=>(e.checked=!1,!0):e=>(e.checked=!1,console.log("item",e),e.unitName?e.userid.toLowerCase().indexOf(t.toLowerCase())>-1||e.userName.toLowerCase().indexOf(t.toLowerCase())>-1||e.unitName.toLowerCase().indexOf(t.toLowerCase())>-1:e.userid.toLowerCase().indexOf(t.toLowerCase())>-1||e.userName.toLowerCase().indexOf(t.toLowerCase())>-1)):this.startObject(null)}startObject(e){this.clear=!1,this.whatcontrolsmap=new Map,this.inwhatformgroup=null;let t=new Map,i=[],a=0,r=c(new Date).format("YYYY-MM-DD");i[a]=new o.W(a,"name",e?e.name:"",o.V.text),i[a].placeholder="Name",i[a].required=!0,a++,i[a]=new o.W(a,"mobile",e?e.mobile:"",o.V.phone),i[a].placeholder="Enter Phone",i[a].required=!0,a++,i[a]=new o.W(a,"regdate",r,o.V.date),i[a].enabled=!1,i[a].showme=!0,a++,i[a]=new o.W(a,"image",e?e.image:"https://res.cloudinary.com/ideasyogi/image/upload/v1589964651/default_qkhcdj.jpg",o.V.image),i[a].placeholder="Profile Picture",i[a].required=!1,a++,i[a]=new o.W(a,"category","",o.V.select),i[a].placeholder="Category",i[a].value={selected:e?e.category:"",options:["Maid","Delivery Boy","Car Washer","Staff","Resident","Member","Visitor","Tanker","Other"]},i[a].required=!0,a++,i[a]=new o.W(a,"statusdate",r,o.V.date),i[a].enabled=!1,i[a].required=!1,i[a].showme=!1,a++,i[a]=new o.W(a,"in",{selected:e?e.in:"true",options:["true","false"]},o.V.radio),i[a].placeholder="IN",i[a].enabled=!1,i[a].required=!1,i[a].showme=!1,a++,i[a]=new o.W(a,"createdBy",this.yauthservice.getCurrentUserId(),o.V.text),i[a].placeholder="createdBy",i[a].enabled=!1,i[a].showme=!1,i[a].required=!1,e&&e.$key&&(a++,i[a]=new o.W(a,"$key",e.$key,o.V.text),i[a].placeholder="editkey",i[a].enabled=!1,i[a].showme=!1,i[a].required=!1),i.forEach(e=>{t.set(e.name,e)}),this.inwhatformgroup=this.yobuilderservice.createFormGroup(t),this.whatcontrolsmap=this.yobuilderservice.createMap(t,this.inwhatformgroup);let s=new o.A("Cancel","cancel","cancel_presentation","secondary",!1),n=new o.A("Add User","register","lock_open","primary",!1);this.mybuttons.set("Action2",n),this.mybuttons.set("Action1",s),setTimeout(()=>{this.clear=!0},50)}putInSendRequest(e){if(this.tempItems=new Array,e.checked?(this.searchobj.name=this.processUserName(e.userName),this.searchobj.mobile=this.processMobile(e.userName),this.searchobj.category="Resident",this.searchobj.photo=e.photo&&e.photo.length>0?e.photo:"https://res.cloudinary.com/ideasyogi/image/upload/v1589964651/default_qkhcdj.jpg",this.getItems({target:{value:e.email}}),this.startObject(this.searchobj)):this.startObject(null),this.toSendItems.find(t=>t.email==e.email)){if(!e.checked)for(let t=0;t<this.toSendItems.length;t++)if(e.email===this.toSendItems[t].email){this.toSendItems.splice(t,1);break}}else e.checked&&this.toSendItems.push(e)}processUserName(e){return e?e.split("|")[0]:""}processMobile(e){if(e){let t=e.split("|");if(t.length>=2)return t[1]}return""}send(e){this.yobuilderservice.enableformcontrols(e.data.controls);let t=Object.assign(Object.assign({},e.data.value),{in:!1,createdBy:this.yauthservice.getCurrentUserId()});console.log("xxxxxxxxxxxx",e);let i=!!t.$key;this.boardService.addWorker(t,i).then(e=>{this.toasterservice.pop("success","Success","Entry added successfully \n Add details of visit.."),i||(t.$key=e.key),this.ydataservice.setData("update",this.boardService.getWorkersCrud()),this.ydataservice.setData("comingin",t),this.route.navigateByUrl("/enterdetail")})}ionViewWillEnter(){}cancel(e){this.ydataservice.getData("comingfrom")&&"outpage"==this.ydataservice.getData("comingfrom")?(this.ydataservice.clearData("comingfrom"),this.route.navigateByUrl("/inout/out")):this.route.navigateByUrl("/inout/in")}}return e.\u0275fac=function(t){return new(t||e)(l.Qb(s.a),l.Qb(s.j),l.Qb(o.R),l.Qb(h.d),l.Qb(o.i),l.Qb(o.S),l.Qb(o.M))},e.\u0275cmp=l.Kb({type:e,selectors:[["app-presentdir"]],decls:17,vars:5,consts:[["slot","start"],[3,"placeholder","ionInput"],["padding",""],[4,"ngIf"],[1,"box"],[3,"captchaOn","captchaName","whatform","whatformgroup","whichbuttons","actionEvent","cancelEvent",4,"ngIf"],["text-wrap","","class","searcheditems",4,"ngFor","ngForOf"],["text-wrap","",1,"searcheditems"],["color","dark","checked","false",3,"ngModel","ngModelChange","ionChange"],[3,"captchaOn","captchaName","whatform","whatformgroup","whichbuttons","actionEvent","cancelEvent"]],template:function(e,t){1&e&&(l.Wb(0,"ion-header"),l.Wb(1,"ion-toolbar"),l.Wb(2,"ion-buttons",0),l.Rb(3,"ion-back-button"),l.Vb(),l.Wb(4,"ion-title"),l.Mc(5,"Gate Entry"),l.Vb(),l.Vb(),l.Wb(6,"ion-toolbar"),l.Wb(7,"ion-searchbar",1),l.ec("ionInput",(function(e){return t.getItems(e)})),l.jc(8,"translate"),l.Vb(),l.Vb(),l.Vb(),l.Wb(9,"ion-content",2),l.Kc(10,g,4,3,"div",3),l.Wb(11,"ion-grid"),l.Wb(12,"ion-row"),l.Wb(13,"ion-col"),l.Wb(14,"mat-card"),l.Wb(15,"mat-card-content",4),l.Kc(16,f,1,5,"yogagainv2-dyanamic-page",5),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb()),2&e&&(l.Db(7),l.sc("placeholder",l.kc(8,3,"Search Society Resident")),l.Db(3),l.rc("ngIf",(null==t.searchQuery?null:t.searchQuery.length)>=1),l.Db(6),l.rc("ngIf",t.clear))},directives:[n.y,n.hb,n.j,n.f,n.g,n.fb,n.S,n.ub,n.s,a.m,n.x,n.R,n.r,d.a,d.c,a.l,n.D,n.J,n.p,n.c,r.p,r.s,o.q],pipes:[u.c],styles:[""]}),e})()}];let w=(()=>{class e{}return e.\u0275mod=l.Ob({type:e}),e.\u0275inj=l.Nb({factory:function(t){return new(t||e)},imports:[[a.c,r.j,n.ib,o.H,o.o,o.b,s.n.forChild(y)]]}),e})()}}]);