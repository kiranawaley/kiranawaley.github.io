function _slicedToArray(i,t){return _arrayWithHoles(i)||_iterableToArrayLimit(i,t)||_unsupportedIterableToArray(i,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(i,t){if(i){if("string"==typeof i)return _arrayLikeToArray(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);return"Object"===e&&i.constructor&&(e=i.constructor.name),"Map"===e||"Set"===e?Array.from(i):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(i,t):void 0}}function _arrayLikeToArray(i,t){(null==t||t>i.length)&&(t=i.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=i[e];return n}function _iterableToArrayLimit(i,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(i)){var e=[],n=!0,c=!1,r=void 0;try{for(var o,a=i[Symbol.iterator]();!(n=(o=a.next()).done)&&(e.push(o.value),!t||e.length!==t);n=!0);}catch(s){c=!0,r=s}finally{try{n||null==a.return||a.return()}finally{if(c)throw r}}return e}}function _arrayWithHoles(i){if(Array.isArray(i))return i}function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function _createClass(i,t,e){return t&&_defineProperties(i.prototype,t),e&&_defineProperties(i,e),i}(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{EfXs:function(i,t,e){"use strict";e.r(t),e.d(t,"InPageModule",(function(){return H}));var n=e("ofXK"),c=e("3Pt+"),r=e("tyNb"),o=e("TEn/"),a=e("mrSG"),s=e("PWOX"),b=e("X/JO"),l=e("lJxs"),u=e("rIxz"),f=e("YKLQ"),h=e("fXoL"),m=e("sYmb"),d=e("qd/x"),p=["mySearchbar"],y=["ocontent"];function g(i,t){if(1&i){var e=h.Xb();h.Wb(0,"ion-item"),h.Wb(1,"ion-avatar",8),h.ec("click",(function(){h.Cc(e);var i=t.$implicit;return h.ic(2).showPhoto(i.image,i.name)})),h.Rb(2,"img",9),h.Vb(),h.Wb(3,"h2"),h.Mc(4),h.Vb(),h.Wb(5,"p"),h.Mc(6),h.jc(7,"translate"),h.Vb(),h.Wb(8,"p"),h.Mc(9),h.Vb(),h.Wb(10,"button",10),h.ec("click",(function(){h.Cc(e);var i=t.$implicit;return h.ic(2).gotoExternal("tel:"+i.mobile)})),h.Rb(11,"ion-icon",11),h.Mc(12),h.jc(13,"translate"),h.Vb(),h.Vb()}if(2&i){var n=t.$implicit,c=h.ic(2);h.Db(2),h.rc("src",c.ygen.getConditionalPhoto(n.image),h.Ec),h.Db(2),h.Oc("",n.name," "),h.Db(2),h.Nc(h.kc(7,5,n.category)),h.Db(3),h.Nc(n.vehicalnum),h.Db(3),h.Oc(" ",h.kc(13,7,"Call")," ")}}var v=function(){return{check:!0,property:"needParking"}};function k(i,t){if(1&i&&(h.Wb(0,"ion-row"),h.Wb(1,"ion-col",7),h.Wb(2,"ion-list"),h.Wb(3,"ion-item"),h.Wb(4,"h2"),h.Mc(5),h.jc(6,"translate"),h.Vb(),h.Vb(),h.Kc(7,g,14,9,"ion-item",6),h.jc(8,"inpipe"),h.jc(9,"async"),h.Vb(),h.Vb(),h.Vb()),2&i){var e=h.ic();h.Db(5),h.Nc(h.kc(6,2,"Occupied Visitor Parking")),h.Db(2),h.rc("ngForOf",h.lc(8,4,h.kc(9,7,e.workers),h.uc(9,v)))}}function V(i,t){if(1&i&&(h.Wb(0,"p"),h.Mc(1),h.jc(2,"translate"),h.Vb()),2&i){var e=h.ic().$implicit;h.Db(1),h.Pc("",h.kc(2,2,"Vehical Number")," :",e.vehicalnum,"")}}function W(i,t){1&i&&(h.Wb(0,"p"),h.Mc(1,"\xa0\xa0"),h.Wb(2,"b",17),h.Mc(3),h.jc(4,"translate"),h.Vb(),h.Vb()),2&i&&(h.Db(3),h.Nc(h.kc(4,1,"Out")))}function D(i,t){1&i&&(h.Wb(0,"p"),h.Mc(1,"\xa0\xa0"),h.Wb(2,"b",18),h.Mc(3),h.jc(4,"translate"),h.Vb(),h.Vb()),2&i&&(h.Db(3),h.Nc(h.kc(4,1,"In")))}function w(i,t){if(1&i){var e=h.Xb();h.Wb(0,"ion-button",19),h.ec("click",(function(){h.Cc(e);var i=h.ic().$implicit;return h.ic(2).in(i)})),h.Rb(1,"ion-icon",20),h.Mc(2),h.jc(3,"translate"),h.Vb()}2&i&&(h.Db(2),h.Oc(" ",h.kc(3,1,"Entering In")," "))}function I(i,t){if(1&i){var e=h.Xb();h.Wb(0,"ion-button",21),h.ec("click",(function(){h.Cc(e);var i=h.ic().$implicit;return h.ic(2).out(i)})),h.Rb(1,"ion-icon",22),h.Mc(2),h.jc(3,"translate"),h.Vb()}2&i&&(h.Db(2),h.Oc(" ",h.kc(3,1,"Exiting Out")," "))}function C(i,t){if(1&i){var e=h.Xb();h.Wb(0,"ion-item-options",23),h.Wb(1,"ion-item-option",24),h.ec("click",(function(){h.Cc(e);var i=h.ic().$implicit;return h.ic(2).history(i)})),h.Rb(2,"ion-icon",25),h.Vb(),h.Vb()}}function M(i,t){if(1&i){var e=h.Xb();h.Wb(0,"ion-item-options",26),h.Wb(1,"ion-item-option",27),h.ec("click",(function(){h.Cc(e);var i=h.ic().$implicit;return h.ic(2).gotoExternal("tel:"+i.mobile)})),h.Rb(2,"ion-icon",28),h.Vb(),h.Wb(3,"ion-item-option",21),h.ec("click",(function(){h.Cc(e);var i=h.ic().$implicit;return h.ic(2).delete(i)})),h.Rb(4,"ion-icon",29),h.Vb(),h.Wb(5,"ion-item-option",30),h.ec("click",(function(){h.Cc(e);var i=h.ic().$implicit;return h.ic(2).editMe(i)})),h.Rb(6,"ion-icon",31),h.Vb(),h.Vb()}}function O(i,t){if(1&i){var e=h.Xb();h.Wb(0,"ion-item-sliding"),h.Wb(1,"ion-item"),h.Wb(2,"ion-avatar",12),h.ec("click",(function(){h.Cc(e);var i=t.$implicit;return h.ic(2).showPhoto(i.image,i.name)})),h.Rb(3,"img",9),h.Vb(),h.Wb(4,"ion-label"),h.Wb(5,"h2"),h.Mc(6),h.Vb(),h.Wb(7,"p"),h.Mc(8),h.jc(9,"translate"),h.Vb(),h.Kc(10,V,3,4,"p",5),h.Wb(11,"p"),h.Mc(12),h.Vb(),h.Kc(13,W,5,3,"p",5),h.Kc(14,D,5,3,"p",5),h.Kc(15,w,4,3,"ion-button",13),h.Kc(16,I,4,3,"ion-button",14),h.Vb(),h.Vb(),h.Kc(17,C,3,0,"ion-item-options",15),h.Kc(18,M,7,0,"ion-item-options",16),h.Vb()}if(2&i){var n=t.$implicit,c=h.ic(2);h.Db(3),h.rc("src",c.ygen.getConditionalPhoto(n.image),h.Ec),h.Db(3),h.Nc(n.name),h.Db(2),h.Nc(h.kc(9,11,n.category)),h.Db(2),h.rc("ngIf",n.needParking),h.Db(2),h.Nc(c.ygen.formatTimestampToDate(n.statusdate)),h.Db(1),h.rc("ngIf","false"==n.in),h.Db(1),h.rc("ngIf","true"==n.in),h.Db(1),h.rc("ngIf",c.canido&&"false"==n.in),h.Db(1),h.rc("ngIf",c.canido&&"true"==n.in),h.Db(1),h.rc("ngIf",c.canido),h.Db(1),h.rc("ngIf",c.canido)}}function j(i,t){if(1&i&&(h.Wb(0,"ion-list"),h.Wb(1,"ion-item"),h.Wb(2,"h1"),h.Mc(3),h.jc(4,"translate"),h.Wb(5,"b"),h.Mc(6),h.Vb(),h.Vb(),h.Vb(),h.Kc(7,O,19,13,"ion-item-sliding",6),h.Wb(8,"ion-row"),h.Wb(9,"h1"),h.Mc(10),h.jc(11,"translate"),h.Vb(),h.Vb(),h.Vb()),2&i){var e=h.ic();h.Db(3),h.Oc("",h.kc(4,4,"Searched list")," \xa0"),h.Db(3),h.Nc(e.tempItems.length),h.Db(1),h.rc("ngForOf",e.tempItems),h.Db(3),h.Oc(" \xa0",h.kc(11,6,"In List"),"")}}function P(i,t){if(1&i&&(h.Wb(0,"p"),h.Mc(1),h.jc(2,"translate"),h.Vb()),2&i){var e=h.ic().$implicit;h.Db(1),h.Pc("",h.kc(2,2,"Vehical Number")," :",e.vehicalnum,"")}}function $(i,t){if(1&i){var e=h.Xb();h.Wb(0,"ion-button",21),h.ec("click",(function(){h.Cc(e);var i=h.ic().$implicit;return h.ic().out(i)})),h.Rb(1,"ion-icon",22),h.Mc(2),h.jc(3,"translate"),h.Vb()}2&i&&(h.Db(2),h.Oc(" ",h.kc(3,1,"Exiting Out")," "))}function S(i,t){if(1&i){var e=h.Xb();h.Wb(0,"ion-item-options",23),h.Wb(1,"ion-item-option",24),h.ec("click",(function(){h.Cc(e);var i=h.ic().$implicit;return h.ic().history(i)})),h.Rb(2,"ion-icon",25),h.Vb(),h.Vb()}}function _(i,t){if(1&i){var e=h.Xb();h.Wb(0,"ion-item-options",26),h.Wb(1,"ion-item-option",27),h.ec("click",(function(){h.Cc(e);var i=h.ic().$implicit;return h.ic().gotoExternal("tel:"+i.mobile)})),h.Rb(2,"ion-icon",28),h.Vb(),h.Wb(3,"ion-item-option",21),h.ec("click",(function(){h.Cc(e);var i=h.ic().$implicit;return h.ic().delete(i)})),h.Rb(4,"ion-icon",29),h.Vb(),h.Wb(5,"ion-item-option",30),h.ec("click",(function(){h.Cc(e);var i=h.ic().$implicit;return h.ic().editMe(i)})),h.Rb(6,"ion-icon",31),h.Vb(),h.Vb()}}function A(i,t){if(1&i){var e=h.Xb();h.Wb(0,"ion-item-sliding"),h.Wb(1,"ion-item"),h.Wb(2,"ion-avatar",12),h.ec("click",(function(){h.Cc(e);var i=t.$implicit;return h.ic().showPhoto(i.image,i.name)})),h.Rb(3,"img",9),h.Vb(),h.Wb(4,"ion-label"),h.Wb(5,"h2"),h.Mc(6),h.Vb(),h.Wb(7,"p"),h.Mc(8),h.jc(9,"translate"),h.Vb(),h.Kc(10,P,3,4,"p",5),h.Wb(11,"p"),h.Mc(12),h.Vb(),h.Wb(13,"p"),h.Mc(14,"\xa0\xa0"),h.Wb(15,"b",18),h.Mc(16),h.jc(17,"translate"),h.Vb(),h.Vb(),h.Kc(18,$,4,3,"ion-button",14),h.Vb(),h.Vb(),h.Kc(19,S,3,0,"ion-item-options",15),h.Kc(20,_,7,0,"ion-item-options",16),h.Vb()}if(2&i){var n=t.$implicit,c=h.ic();h.Db(3),h.rc("src",c.ygen.getConditionalPhoto(n.image),h.Ec),h.Db(3),h.Nc(n.name),h.Db(2),h.Nc(h.kc(9,9,n.category)),h.Db(2),h.rc("ngIf",n.needParking),h.Db(2),h.Nc(c.ygen.formatTimestampToDate(n.statusdate)),h.Db(4),h.Nc(h.kc(17,11,"In")),h.Db(2),h.rc("ngIf",c.canido),h.Db(1),h.rc("ngIf",c.canido),h.Db(1),h.rc("ngIf",c.canido)}}var K,R,E=function(){return{check:"true",property:"in"}},T=((K=function(){function i(t,e,n,c,r,o,a,s){var b=this;_classCallCheck(this,i),this.modalCtrl=t,this.loadingCtrl=e,this.navCtrl=n,this.route=c,this.authService=r,this.boardService=o,this.ygen=a,this.ydataservice=s,this.viewHistory=!1,this.currentHistory=[],this.showOccupied=!1,this.current={name:""},this.isApp=!0,this.searchQuery="",this.tempItems=new Array,this.items=new Array,this.showButton=!0,this.occupiedVisitoParking=0,this.totalVisitoParking=0,this.showVisitorCounter=!1,this.workers=o.getWorkers(),this.workers.forEach((function(i){b.items=i})),this.workers.pipe(Object(l.a)((function(i){return b.occupiedVisitoParking=0,i.filter((function(i){return i.needParking}))}))).forEach((function(i){i.forEach((function(i){b.occupiedVisitoParking=b.occupiedVisitoParking+1}))})),r.authorizeForAction("gate")&&(this.canido=!0),o.getItems().subscribe((function(i){b.showVisitorCounter=i.istvp,b.totalVisitoParking=i.tvp}))}return _createClass(i,[{key:"ngOnInit",value:function(){}},{key:"getShowAvailable",value:function(i){return 0==i?"dadared":i<=5?"dadayellow":"dada"}},{key:"openModal",value:function(i,t){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.ydataservice.setData("current",i),this.ydataservice.setData("currentHistory",t),this.ydataservice.setData("comingfrom","inpage"),this.route.navigateByUrl("/history");case 1:case"end":return e.stop()}}),e,this)})))}},{key:"ionViewDidLoad",value:function(){}},{key:"isamember",value:function(){return!0}},{key:"out",value:function(i){var t=+new Date;this.searchbar.value="",this.boardService.updateOutHistory(this.boardService.getWorkersCrud(),i,{indate:i.statusdate,outdate:t});var e={in:"false",statusdate:t,needParking:!1};this.boardService.getWorkersCrud().update(i.$key,e)}},{key:"getOccupied",value:function(i){return i.needParking?"occu":""}},{key:"history",value:function(i){this.current=i,this.currentHistory=[];for(var t=0,e=Object.entries(i.history);t<e.length;t++){var n=_slicedToArray(e[t],2),c=(n[0],n[1]);this.currentHistory.push(c)}this.openModal(this.current,this.currentHistory)}},{key:"historyDone",value:function(){this.current={name:""},this.currentHistory=[],this.viewHistory=!1}},{key:"in",value:function(i){this.ydataservice.setData("update",this.boardService.getWorkersCrud()),this.ydataservice.setData("comingin",i),this.searchbar.value="",this.route.navigateByUrl("/enterdetail")}},{key:"removeFromSearch",value:function(i){this.tempItems.findIndex((function(t){return t.$key==i.$key}))>-1&&(this.tempItems=this.tempItems.filter((function(t){return t.$key!=i.$key})))}},{key:"delete",value:function(i){this.boardService.updateOutHistory(this.boardService.getWorkersCrud(),i,{indate:i.statusdate,outdate:""}),this.boardService.getWorkersCrud().remove(i.$key),this.removeFromSearch(i)}},{key:"editMe",value:function(i){this.ydataservice.setData("editme",i),this.route.navigateByUrl("/presentdir")}},{key:"gotoExternal",value:function(i){window.location.href=i}},{key:"showPhoto",value:function(i,t){this.ygen.openimage(i,t)}},{key:"getItems",value:function(i){this.ocontent.scrollToTop(100),console.log(" search ready ",this.items);var t=i.target.value;this.searchQuery=t,t&&""!=t.trim()&&t.length>=2&&(this.tempItems=this.items.filter((function(i){return console.log("item",i),i.name.toLowerCase().indexOf(t.toLowerCase())>-1})))}}]),i}()).\u0275fac=function(i){return new(i||K)(h.Qb(o.kb),h.Qb(o.ib),h.Qb(o.lb),h.Qb(r.j),h.Qb(s.a),h.Qb(b.a),h.Qb(u.a),h.Qb(f.a))},K.\u0275cmp=h.Kb({type:K,selectors:[["app-in"]],viewQuery:function(i,t){var e;1&i&&(h.Sc(p,!0),h.Sc(y,!0)),2&i&&(h.yc(e=h.fc())&&(t.searchbar=e.first),h.yc(e=h.fc())&&(t.ocontent=e.first))},decls:12,vars:13,consts:[[3,"color"],["debounce","100",3,"placeholder","ionChange"],["mySearchbar",""],["padding",""],["ocontent",""],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"dadao"],["item-start","",3,"click"],[3,"src"],["ion-button","","color","secondary",3,"click"],["name","call"],["slot","start",3,"click"],["color","success",3,"click",4,"ngIf"],["color","danger",3,"click",4,"ngIf"],["side","start",4,"ngIf"],["side","end",4,"ngIf"],[2,"color","red"],[2,"color","green"],["color","success",3,"click"],["slot","icon-only","name","log-in"],["color","danger",3,"click"],["slot","icon-only","name","log-out"],["side","start"],[3,"click"],["slot","icon-only","name","book"],["side","end"],["color","secondary",3,"click"],["slot","icon-only","name","call"],["slot","icon-only","name","trash"],["color","warning",3,"click"],["slot","icon-only","name","create"]],template:function(i,t){1&i&&(h.Wb(0,"ion-header"),h.Wb(1,"ion-toolbar",0),h.Wb(2,"ion-searchbar",1,2),h.ec("ionChange",(function(i){return t.getItems(i)})),h.jc(4,"translate"),h.Vb(),h.Vb(),h.Vb(),h.Wb(5,"ion-content",3,4),h.Kc(7,k,10,10,"ion-row",5),h.Kc(8,j,12,8,"ion-list",5),h.Kc(9,A,21,13,"ion-item-sliding",6),h.jc(10,"inpipe"),h.jc(11,"async"),h.Vb()),2&i&&(h.Db(1),h.rc("color","warning"),h.Db(1),h.sc("placeholder",h.kc(4,5,"Search")),h.Db(5),h.rc("ngIf",0),h.Db(1),h.rc("ngIf",(null==t.searchQuery?null:t.searchQuery.length)>=1),h.Db(1),h.rc("ngForOf",h.lc(10,7,h.kc(11,10,t.workers),h.uc(12,E))))},directives:[o.y,o.fb,o.Q,o.sb,o.s,n.m,n.l,o.P,o.r,o.I,o.B,o.e,o.z,o.G,o.H,o.i,o.F,o.E],pipes:[m.c,d.a,n.b],styles:[""]}),K),N=e("hVaU"),Q=e("IZvt"),X=e("4pxM"),x=[{path:"",component:T}],H=((R=function i(){_classCallCheck(this,i)}).\u0275mod=h.Ob({type:R}),R.\u0275inj=h.Nb({factory:function(i){return new(i||R)},imports:[[n.c,c.i,o.gb,N.a,Q.a,X.a,r.n.forChild(x)]]}),R)}}]);