(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{F4UR:function(e,t,n){"use strict";n.r(t),n.d(t,"LoginModule",(function(){return F}));var o=n("t34c"),i=n("ofXK"),r=n("3Pt+"),c=n("tyNb"),a=n("TEn/"),s=n("mrSG"),l=n("sH8K"),d=n("DzsY"),b=n("D+2S"),h=n("0nTO"),u=n("DVUX"),p=n("i2Ty"),g=n("PWOX"),f=n("gAVi"),m=n("rIxz"),w=n("Oipj"),v=n("iqUP"),y=n("ar4q"),O=n("fXoL"),P=n("Wp6s"),V=n("iEmi"),k=n("kmnG"),x=n("qFsG"),M=n("sYmb");function T(e,t){1&e&&(O.Wb(0,"mat-error"),O.Lc(1," Invalid Phone Number "),O.Vb())}function W(e,t){if(1&e){const e=O.Xb();O.Wb(0,"ion-button",17),O.ec("click",(function(){O.Cc(e),O.ic();const t=O.zc(5);return O.ic(2).askValidatePhone(t)})),O.Lc(1," Request OTP "),O.Vb()}if(2&e){const e=O.ic(3);O.rc("disabled",e.addressForm.controls.mobile.invalid)}}function C(e,t){if(1&e&&(O.Wb(0,"form",12),O.Wb(1,"mat-form-field",13),O.Wb(2,"mat-label"),O.Lc(3,"Your mobile"),O.Vb(),O.Rb(4,"input",14,15),O.Jc(6,T,2,0,"mat-error",2),O.Vb(),O.Jc(7,W,2,1,"ion-button",16),O.Rb(8,"div"),O.Vb()),2&e){const e=O.ic(2);O.rc("formGroup",e.addressForm),O.Db(6),O.rc("ngIf",e.addressForm.controls.mobile.invalid),O.Db(1),O.rc("ngIf",!e.goingon),O.Db(1),O.Hb("spinner",e.goingon)}}function I(e,t){if(1&e){const e=O.Xb();O.Wb(0,"ion-button",23),O.ec("click",(function(){return O.Cc(e),O.ic(3).reAuthenticateOtp()})),O.Lc(1," Or Ask OTP Again "),O.Vb()}}function L(e,t){if(1&e){const e=O.Xb();O.Wb(0,"div"),O.Wb(1,"mat-form-field",18),O.Wb(2,"mat-label"),O.Lc(3,"Enter OTP"),O.Vb(),O.Wb(4,"input",19,20),O.ec("ngModelChange",(function(t){return O.Cc(e),O.ic(2).verificationcode=t})),O.Vb(),O.Vb(),O.Wb(6,"ion-button",21),O.ec("click",(function(){return O.Cc(e),O.ic(2).verifySMS()})),O.Lc(7," Verify OTP "),O.Vb(),O.Jc(8,I,2,0,"ion-button",22),O.Vb()}if(2&e){const e=O.ic(2);O.Db(4),O.rc("ngModel",e.verificationcode),O.Db(4),O.rc("ngIf",e.redootp)}}function _(e,t){if(1&e&&(O.Wb(0,"mat-card"),O.Wb(1,"mat-card-header"),O.Wb(2,"mat-card-title"),O.Lc(3),O.jc(4,"translate"),O.Vb(),O.Vb(),O.Wb(5,"mat-card-content",3),O.Jc(6,C,9,5,"form",9),O.Jc(7,L,9,2,"div",2),O.Vb(),O.Wb(8,"div",10),O.Rb(9,"div",11),O.Vb(),O.Vb()),2&e){const e=O.ic();O.Db(3),O.Nc(" ",O.kc(4,3,"Login using phone"),""),O.Db(3),O.rc("ngIf",!e.windowref.confirmationResult),O.Db(1),O.rc("ngIf",e.windowref.confirmationResult)}}function R(e,t){1&e&&(O.Wb(0,"ion-button",24),O.Lc(1),O.jc(2,"translate"),O.Vb()),2&e&&(O.Db(1),O.Nc(" ",O.kc(2,1,"Signup")," "))}let S=(()=>{class e{constructor(e,t,n,o,i,c,a,s,l,d,b){this.fireauth=e,this.toastCtrl=t,this.ygen=n,this.alertme=o,this.yovalservice=i,this.yobuilderservice=c,this.ynotification=a,this.toasterService=s,this.yauth=l,this.ystorageservice=d,this.router=b,this.whatcontrolsmap=new Map,this.mybuttons=new Map,this.loadingindicator=!1,this.retry=!1,this.gototp=!1,this.redootp=!1,this.goingon=!1,this.askforotp=!1,this.OTP="",this.showOTPInput=!0,this.OTPmessage="An OTP is sent to your number. You should receive it in 15 s",this.startObject(),this.addressForm=new r.g({mobile:new r.d("",[r.u.required,r.u.minLength(2),r.u.maxLength(30),e=>{if(e.value){const n=/^\+?\d[\d -]{8,12}\d$/;if(console.log(n.test(e.value)),!n.test(e.value))return{"Invalid Phone":{value:e.value}};var t=D.parse(e.value,"IN");if(!D.isValidNumber(t))return{"Invalid Phone":{value:e.value}}}return null}])})}ngOnInit(){this.windowref=this.ygen.nativeWindow}askValidatePhone(e){this.goingon=!0;let t=this;this.windowref.RecaptchaVerifier&&(this.windowref.RecaptchaVerifier.clear(),document.getElementById("recaptcha-container")?(document.getElementById("captchwrapper").innerHTML="",document.getElementById("captchwrapper").innerHTML='<div id="recaptcha-container"></div>'):document.getElementById("captchwrapper").innerHTML='<div id="recaptcha-container"></div>'),this.windowref.RecaptchaVerifier=new v.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible",callback:function(n){t.askforotp=!0,t.validatePhone(e)},"expired-callback":function(){t.toasterService.pop("warn","Capcha Expired, Please validate captcha ","Captcha expired."),t.windowref.confirmationResult=null}}),this.windowref.RecaptchaVerifier.render(),this.windowref.RecaptchaVerifier.verify()}validatePhone(e){this.gototp=!1;var t=this.ygen.phoneNumberUtil.parse(e.value,"IN");if(this.ygen.isavalidphone(t)){var n=this.ygen.phoneE164(t);this.appVerifier=this.windowref.RecaptchaVerifier;let e=this;this.yauth.loginPhone({phonenumber:n,appverifier:this.appVerifier}).then((function(t){e.windowref.confirmationResult=t,e.gototp=!0,e.goingon=!1,e.toasterService.pop("success","OTP sent to you mobile number "+n,"OTP Success"),setTimeout(()=>{e.redootp=!0},25e3)})).catch((function(t){e.goingon=!1,e.toasterService.pop("error","Error OTP SMS not send","OTP Failure"),e.alertme.openSnackBar(t.message,"Ok"),console.log(t),e.windowref.confirmationResult=null}))}else this.toasterService.pop("error","Not a valid mobile number, please correct","Validation Failure"),this.windowref.confirmationResult=null,this.goingon=!1}verifySMS(){let e=this;this.windowref.confirmationResult.confirm(this.verificationcode).then(e=>{console.log("yeah ",e),this.windowref.confirmationResult=null,this.goingon=!1}).catch(t=>{this.toasterService.pop("error",t.message,"Validation Failure"),e.redootp=!0,this.goingon=!1,console.log(t,"Incorrect code entered??")})}reAuthenticateOtp(){this.windowref.confirmationResult=null,this.gototp=!1,this.redootp=!1}startObject(){let e=new Map;e.set("userid",this.yobuilderservice.createType("userid","Enter User Name",!0,!0,!0,"email",1,"","Your email address")),e.set("password",this.yobuilderservice.createType("password","Enter Password",!0,!0,!0,"password",2,"")),e.set("rememberuser",this.yobuilderservice.createType("rememberuser","Remember Login",!0,!0,!0,"checkbox",2,!0)),e.set("agreement",this.yobuilderservice.createType("agreement","Agreed to Terms & Condtions",!0,!0,!0,"checkbox",2,!0)),this.inwhatformgroup=this.yobuilderservice.createFormGroup(e),this.whatcontrolsmap=this.yobuilderservice.createMap(e,this.inwhatformgroup);let t=new b.a("Sign In","unlock","lock_open","primary",!1);this.mybuttons.set("Action",t)}send(e){this.login(e.data.value)}cancel(e){this.startObject()}registerToken(e){this.ynotification.registertoken()}login(e){this.yauth.login(e).subscribe(e=>{e.subscribe(e=>{e.isError?this.alertme.errordata(e.message):this.yauth.isAuthenticated().subscribe(e=>{this.ystorageservice.isTenantSelection()&&this.router.navigateByUrl("/tenants")})})})}presentToast(e,t,n,o){return Object(s.a)(this,void 0,void 0,(function*(){(yield this.toastCtrl.create({message:e,position:n,duration:o})).present()}))}next(){this.showOTPInput=!0,this.start()}start(){}stop(){}processSMS(e){const t=e.body;t&&-1!=t.indexOf("enappd_starters")&&(this.OTP=e.body.slice(0,6),console.log(this.OTP),this.OTPmessage="OTP received. Proceed to register",this.stop())}register(){""!=this.OTP?this.presentToast("You are successfully registered",!1,"top",1500):this.presentToast("Your OTP is not valid",!1,"bottom",1500)}}return e.\u0275fac=function(t){return new(t||e)(O.Qb(w.AngularFireAuth),O.Qb(a.sb),O.Qb(m.a),O.Qb(p.a),O.Qb(l.a),O.Qb(d.a),O.Qb(h.a),O.Qb(u.d),O.Qb(g.a),O.Qb(f.a),O.Qb(c.g))},e.\u0275cmp=O.Kb({type:e,selectors:[["app-login"]],decls:33,vars:16,consts:[[3,"color"],["slot","start"],[4,"ngIf"],[1,"box"],[3,"captchaOn","whatform","whatformgroup","whichbuttons","actionEvent","cancelEvent"],["color","secondary","routerLink","/forgotpass"],["color","secondary","routerLink","/register",4,"ngIf"],["color","secondary"],["text-center",""],["class","example-form",3,"formGroup",4,"ngIf"],["id","captchwrapper"],["id","recaptcha-container"],[1,"example-form",3,"formGroup"],[1,"example-full-width"],["type","text","matInput","","formControlName","mobile"],["myphone",""],["color","danger","size","small","class","delete",3,"disabled","click",4,"ngIf"],["color","danger","size","small",1,"delete",3,"disabled","click"],[1,"animated","tada"],["type","text","matInput","",3,"ngModel","ngModelChange"],["verificationcaode",""],["color","danger","size","small",1,"delete",3,"click"],["color","secondary","size","small",3,"click",4,"ngIf"],["color","secondary","size","small",3,"click"],["color","secondary","routerLink","/register"]],template:function(e,t){1&e&&(O.Wb(0,"ion-header"),O.Wb(1,"ion-toolbar",0),O.Wb(2,"ion-buttons",1),O.Rb(3,"ion-menu-button"),O.Vb(),O.Wb(4,"ion-title"),O.Lc(5),O.jc(6,"translate"),O.Vb(),O.Vb(),O.Vb(),O.Wb(7,"ion-content"),O.Wb(8,"ion-grid"),O.Rb(9,"ion-col"),O.Vb(),O.Wb(10,"ion-grid"),O.Wb(11,"ion-row"),O.Wb(12,"ion-col"),O.Jc(13,_,10,5,"mat-card",2),O.Vb(),O.Vb(),O.Wb(14,"ion-row"),O.Wb(15,"ion-col"),O.Wb(16,"mat-card"),O.Wb(17,"mat-card-header"),O.Wb(18,"mat-card-title"),O.Lc(19),O.jc(20,"translate"),O.Vb(),O.Vb(),O.Wb(21,"mat-card-content",3),O.Wb(22,"yogagainv2-dyanamic-page",4),O.ec("actionEvent",(function(e){return t.send(e)}))("cancelEvent",(function(e){return t.cancel(e)})),O.Vb(),O.Vb(),O.Vb(),O.Vb(),O.Vb(),O.Wb(23,"ion-row"),O.Wb(24,"ion-col"),O.Wb(25,"ion-button",5),O.Lc(26),O.jc(27,"translate"),O.Vb(),O.Jc(28,R,3,3,"ion-button",6),O.Vb(),O.Vb(),O.Vb(),O.Vb(),O.Wb(29,"ion-footer"),O.Wb(30,"ion-toolbar",7),O.Wb(31,"ion-title",8),O.Lc(32," Made by Ideasyogi "),O.Vb(),O.Vb(),O.Vb()),2&e&&(O.Db(1),O.rc("color",(t.ygen.isTenantSelection(),"secondary")),O.Db(4),O.Mc(O.kc(6,10,"Login")),O.Db(8),O.rc("ngIf",t.ygen.inTenant()),O.Db(6),O.Nc(" ",t.ygen.inTenant()?"OR Login via Email":O.kc(20,12,"Login via Email"),""),O.Db(3),O.rc("captchaOn",!1)("whatform",t.whatcontrolsmap)("whatformgroup",t.inwhatformgroup)("whichbuttons",t.mybuttons),O.Db(4),O.Nc(" ",O.kc(27,14,"Forgot Password")," "),O.Db(2),O.rc("ngIf",!t.ygen.isTenantSelection()))},directives:[a.y,a.fb,a.j,a.L,a.db,a.s,a.x,a.r,a.P,i.m,P.a,P.f,P.h,P.d,V.a,a.i,a.pb,c.i,a.w,r.v,r.o,r.h,k.c,k.g,x.b,r.b,r.n,r.f,k.b,r.q],pipes:[M.c],styles:['.main[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column;justify-content:center}@media screen and (min-width:767px){ion-card[_ngcontent-%COMP%]{width:600px;margin:auto}}ion-card[_ngcontent-%COMP%]{--background:#fff;box-shadow:none;-webkit-box-shadow:none;overflow:scroll}.input[_ngcontent-%COMP%]{background-color:#f0f0f0;border:1px solid #d2d2d2;border-radius:9px;font-size:.9em!important}.otpinput[_ngcontent-%COMP%]{letter-spacing:30px;-webkit-padding-end:0;--padding-end:0;font-size:30px;border:none;background:#fff}.white[_ngcontent-%COMP%]{color:#fff}.OTP-border[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-bottom:1px solid}.small[_ngcontent-%COMP%]{font-size:13px}.small[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:unset!important}.button-color[_ngcontent-%COMP%]{background-color:var(--ion-color-mytheme)}.logo[_ngcontent-%COMP%]{width:1.25em!important}.grid[_ngcontent-%COMP%]{height:100vh;flex-direction:column}.grid[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{display:flex;justify-content:center}.row[_ngcontent-%COMP%]{flex-direction:row}.img-logo[_ngcontent-%COMP%]{height:120px;width:120px}.fire-logo[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding-bottom:30px}.bold[_ngcontent-%COMP%]{font-weight:700}.block[_ngcontent-%COMP%]{display:block}.transition[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f57c00 14%,#ffca00 96%)}.btn-color[_ngcontent-%COMP%]{color:#ffa000}.error[_ngcontent-%COMP%]{color:red;text-align:center;display:block;font-weight:700}@-webkit-keyframes spinner{to{transform:rotate(1turn)}}@keyframes spinner{to{transform:rotate(1turn)}}.spinner[_ngcontent-%COMP%]:before{content:" OTP";box-sizing:border-box;position:absolute;top:50%;left:50%;width:20px;height:20px;margin-top:-10px;margin-left:-10px;border-radius:50%;border:2px solid #fff;border-top-color:#000;-webkit-animation:spinner .8s linear infinite;animation:spinner .8s linear infinite}']}),e})();const D=y.PhoneNumberUtil.getInstance();var E=n("hVaU"),j=n("4pxM"),N=n("IZvt");const z=[{path:"",component:S}];let F=(()=>{class e{}return e.\u0275mod=O.Ob({type:e}),e.\u0275inj=O.Nb({factory:function(t){return new(t||e)},imports:[[i.c,r.i,a.gb,r.s,E.a,j.a,N.a,r.s,o.a,c.k.forChild(z)]]}),e})()}}]);