(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{LWQF:function(t,e,n){"use strict";n.r(e),n.d(e,"MyordersPageModule",(function(){return j}));var o=n("ofXK"),i=n("3Pt+"),a=n("tyNb"),c=n("TEn/"),s=n("rIxz"),r=n("+DAS"),b=n("gAVi"),l=n("YKLQ"),d=n("dMTE"),g=n("ybIa"),u=n("lJxs"),p=n("i2Ty"),h=n("0nTO"),y=n("fXoL"),f=n("YCbS"),m=n("/per"),O=n("sYmb");function W(t,e){if(1&t){const t=y.Xb();y.Wb(0,"ion-toolbar",0),y.Wb(1,"ion-searchbar",18),y.ec("ngModelChange",(function(e){return y.Cc(t),y.ic().queryText=e})),y.jc(2,"translate"),y.Vb(),y.Vb()}if(2&t){const t=y.ic();y.rc("color","secondary"),y.Db(1),y.sc("placeholder",y.kc(2,3,"Search Order")),y.rc("ngModel",t.queryText)}}function C(t,e){1&t&&y.Rb(0,"ion-progress-bar",19)}function V(t,e){1&t&&(y.Wb(0,"div",31),y.Wb(1,"ion-label",32),y.Lc(2,"PAID "),y.Vb(),y.Vb())}function v(t,e){1&t&&(y.Wb(0,"div",33),y.Wb(1,"ion-label",32),y.Lc(2,"COD "),y.Vb(),y.Vb())}function k(t,e){if(1&t){const t=y.Xb();y.Wb(0,"app-appicon",34),y.ec("actionEvent",(function(){y.Cc(t);const e=y.ic().$implicit;return y.ic(2).cancelOrder(e)})),y.Vb()}2&t&&y.rc("color","accent")("icon","cancel_schedule_send")("askquestion",!0)("icontext","Cancel Order")("isiconwithtext",!0)("askquestiontext","Are you sure, you want to cancel Order?")}function L(t,e){if(1&t&&(y.Wb(0,"div",35),y.Lc(1,"Call Support "),y.Rb(2,"app-callphone",36),y.Vb()),2&t){const t=y.ic(3);y.Db(2),y.rc("mobile",t.ygen.getSettings().oncallsupport)}}function D(t,e){if(1&t){const t=y.Xb();y.Wb(0,"ion-card"),y.Jc(1,V,3,0,"div",21),y.Jc(2,v,3,0,"div",22),y.Wb(3,"ion-card-header"),y.Wb(4,"ion-card-subtitle"),y.Wb(5,"div"),y.Lc(6),y.Vb(),y.Wb(7,"div"),y.Lc(8),y.Vb(),y.Vb(),y.Wb(9,"ion-card-title"),y.Wb(10,"ion-chip",23),y.ec("click",(function(){y.Cc(t);const n=e.$implicit;return y.ic(2).ygen.routeto("/order",{orderid:n.$key})})),y.Wb(11,"ion-label"),y.Lc(12),y.Vb(),y.Rb(13,"ion-icon",24),y.Vb(),y.Wb(14,"ion-chip",25),y.ec("click",(function(){y.Cc(t);const n=e.$implicit;return y.ic(2).ygen.routeto("/order",{orderid:n.$key})})),y.Wb(15,"ion-label"),y.Lc(16),y.Vb(),y.Vb(),y.Vb(),y.Vb(),y.Wb(17,"ion-card-content"),y.Wb(18,"table",26),y.Wb(19,"tbody"),y.Wb(20,"tr"),y.Wb(21,"td",27),y.Lc(22," By "),y.Vb(),y.Wb(23,"td",28),y.Lc(24),y.Vb(),y.Vb(),y.Wb(25,"tr"),y.Wb(26,"td",27),y.Lc(27," Items "),y.Vb(),y.Wb(28,"td",28),y.Lc(29),y.Vb(),y.Vb(),y.Wb(30,"tr"),y.Wb(31,"td",27),y.Lc(32," Address "),y.Vb(),y.Wb(33,"td",28),y.Lc(34),y.Vb(),y.Vb(),y.Vb(),y.Vb(),y.Vb(),y.Wb(35,"ion-item"),y.Jc(36,k,1,6,"app-appicon",29),y.Jc(37,L,3,1,"div",30),y.Vb(),y.Vb()}if(2&t){const t=e.$implicit,n=y.ic(2);y.Db(1),y.rc("ngIf","PNO"==t.paymentmethod&&"Success"==(null==t.paymentResponse?null:t.paymentResponse.order_status)),y.Db(1),y.rc("ngIf","COD"==t.paymentmethod),y.Db(4),y.Nc("On ",n.ygen.formatTimestampToDate(t.odt),""),y.Db(2),y.Mc(n.ygen.sincewhen(t.odt)),y.Db(4),y.Mc(t.sendorderid),y.Db(4),y.Nc("Rs ",t.amount,""),y.Db(8),y.Nc(" ",t.orderByName," "),y.Db(5),y.Nc(" ",n.getItemCount(t)," "),y.Db(5),y.Nc(" ",t.deliveryAddress," "),y.Db(2),y.rc("ngIf","NEW"==n.segment),y.Db(1),y.rc("ngIf",n.ygen.getSettings())}}function M(t,e){if(1&t&&(y.Wb(0,"div"),y.Jc(1,D,38,11,"ion-card",20),y.Lc(2),y.Vb()),2&t){const t=e.ngIf,n=y.ic();y.Db(1),y.rc("ngForOf",t),y.Db(1),y.Nc(" ",n.getTotal(t)," ")}}let E=(()=>{class t{constructor(t,e,n,o,i,a,c,s,r){this.modalCtrl=t,this.router=e,this.yalert=n,this.ygen=o,this.ydataservice=i,this.ystorageservice=a,this.ypay=c,this.yds=s,this.ynoti=r,this.queryText="",this.segment="NEW",this.segmenttotal=new Map,this.total=0,this.orderlist=new g.a("/shop/orders",this.ydataservice.getDatabase(),!0,null),this.setSegmentTotal()}ngOnInit(){console.log("yeah....ngoninit")}ionViewWillEnter(){console.log("yeah....ion enter"),this.myinbox=this.getData(this.segment)}deleteNotice(t){this.orderlist.removefromList(t)}cancelOrder(t){this.takeAcion({value:"CANCELLED"},t)}takeAcion(t,e){Object.assign(e,{ostatus:t.value}),this.orderlist.updateList(e),this.yalert.openSnackBar(`Order Status changed for [${e.sendorderid}]`,"Ok"),this.ynoti.orderstatuschange(`Order Status changed to [${t.value}] for [${e.sendorderid}]`,e)}putinprocess(t){Object.assign(t,{ostatus:"INPROCESS"}),this.orderlist.updateList(t),this.ynoti.orderstatuschange(`Order Status changed to [${t.ostatus}] for [${t.sendorderid}]`,t)}completeorder(t){Object.assign(t,{ostatus:"COMPLETED"}),this.orderlist.updateList(t),this.ynoti.orderstatuschange(`Congratulation you Order Status changed to [${t.ostatus}] for [${t.sendorderid}]`,t)}getItemCount(t){return t.payload?t.payload.length:0}getTitle(t){return t.read?"Mark Unread":"Mark Read"}segmentChanged(t){console.log("segment",t),this.myinbox=this.getData(t.detail.value)}getData(t){return this.getMyOrders(t)}getOrders(t){return"NEW"===t?this.orderlist.getListRefer().snapshotChanges().pipe(Object(u.a)(e=>e.map(t=>Object.assign({$key:t.payload.key},t.payload.val())).filter(e=>e.ostatus==t||!e.ostatus)),Object(u.a)(t=>t.reverse())):this.orderlist.getListRefer().snapshotChanges().pipe(Object(u.a)(e=>e.map(t=>Object.assign({$key:t.payload.key},t.payload.val())).filter(e=>e.ostatus==t)),Object(u.a)(t=>t.reverse()))}getMyOrders(t){return"NEW"===t?this.orderlist.getListRefer().snapshotChanges().pipe(Object(u.a)(e=>e.map(t=>Object.assign({$key:t.payload.key},t.payload.val())).filter(e=>(e.ostatus==t||!e.ostatus)&&e.orderedBy==this.ygen.getUid())),Object(u.a)(t=>t.reverse())):this.orderlist.getListRefer().snapshotChanges().pipe(Object(u.a)(e=>e.map(t=>Object.assign({$key:t.payload.key},t.payload.val())).filter(e=>e.ostatus==t&&e.orderedBy==this.ygen.getUid())),Object(u.a)(t=>t.reverse()))}getTotal(t){this.total=0,t.forEach(t=>{this.total=this.total+t.amount})}setSegmentTotal(){this.orderlist.getListRefer().snapshotChanges().pipe(Object(u.a)(t=>t.map(t=>Object.assign({$key:t.payload.key},t.payload.val())).filter(t=>t.orderedBy==this.ygen.getUid()))).subscribe(t=>{this.ygen.orderstatus.forEach(e=>{this.segmenttotal.set(e.value,t.filter(t=>t.ostatus==e.value).length)})})}navigate(t,e){console.log()}}return t.\u0275fac=function(e){return new(e||t)(y.Qb(c.fb),y.Qb(a.g),y.Qb(p.a),y.Qb(s.a),y.Qb(r.a),y.Qb(b.a),y.Qb(d.a),y.Qb(l.a),y.Qb(h.a))},t.\u0275cmp=y.Kb({type:t,selectors:[["app-myorders"]],decls:39,vars:27,consts:[[3,"color"],["slot","start"],["slot","end","color","secondary"],[3,"click"],["slot","icon-only","name","search"],[3,"ngModel","ngModelChange","ionChange"],["value","NEW"],["color","danger"],["value","INPROCESS"],["color","dark"],["value","COMPLETED"],["color","success"],["value","CANCELLED"],["color","tertiary"],[3,"color",4,"ngIf"],["padding",""],["loading",""],[4,"ngIf","ngIfElse"],[3,"ngModel","placeholder","ngModelChange"],["type","indeterminate","reversed","true"],[4,"ngFor","ngForOf"],["class","paySection",4,"ngIf"],["class","codSection",4,"ngIf"],["color","secondary",3,"click"],["name","eye"],["color","primary",3,"click"],[1,"contentorder"],[1,"labelt"],[1,"valuet"],[3,"color","icon","askquestion","icontext","isiconwithtext","askquestiontext","actionEvent",4,"ngIf"],["style","padding:5px",4,"ngIf"],[1,"paySection"],["text-uppercase","",1,"sc-ion-label-md-h","sc-ion-label-md-s","hydrated"],[1,"codSection"],[3,"color","icon","askquestion","icontext","isiconwithtext","askquestiontext","actionEvent"],[2,"padding","5px"],[3,"mobile"]],template:function(t,e){if(1&t&&(y.Wb(0,"ion-header"),y.Wb(1,"ion-toolbar",0),y.Wb(2,"ion-buttons",1),y.Rb(3,"ion-back-button"),y.Vb(),y.Wb(4,"ion-title"),y.Lc(5),y.jc(6,"translate"),y.Vb(),y.Wb(7,"ion-buttons",2),y.Wb(8,"ion-button",3),y.ec("click",(function(){return e.ygen.routeto("searchorder",{})})),y.Rb(9,"ion-icon",4),y.Vb(),y.Vb(),y.Vb(),y.Vb(),y.Wb(10,"ion-header"),y.Wb(11,"ion-toolbar",0),y.Wb(12,"ion-segment",5),y.ec("ngModelChange",(function(t){return e.segment=t}))("ionChange",(function(t){return e.segmentChanged(t)})),y.Wb(13,"ion-segment-button",6),y.Lc(14),y.jc(15,"translate"),y.Wb(16,"ion-badge",7),y.Lc(17),y.Vb(),y.Vb(),y.Wb(18,"ion-segment-button",8),y.Lc(19),y.jc(20,"translate"),y.Wb(21,"ion-badge",9),y.Lc(22),y.Vb(),y.Vb(),y.Wb(23,"ion-segment-button",10),y.Lc(24),y.jc(25,"translate"),y.Wb(26,"ion-badge",11),y.Lc(27),y.Vb(),y.Vb(),y.Wb(28,"ion-segment-button",12),y.Lc(29),y.jc(30,"translate"),y.Wb(31,"ion-badge",13),y.Lc(32),y.Vb(),y.Vb(),y.Vb(),y.Vb(),y.Jc(33,W,3,5,"ion-toolbar",14),y.Vb(),y.Wb(34,"ion-content",15),y.Jc(35,C,1,0,"ng-template",null,16,y.Kc),y.Jc(37,M,3,2,"div",17),y.jc(38,"async"),y.Vb()),2&t){const t=y.zc(36);y.Db(1),y.rc("color","warning"),y.Db(4),y.Mc(y.kc(6,15,"My Order")),y.Db(6),y.rc("color","warning"),y.Db(1),y.rc("ngModel",e.segment),y.Db(2),y.Nc(" ",y.kc(15,17,"New"),""),y.Db(3),y.Mc(e.segmenttotal.get("NEW")),y.Db(2),y.Nc(" ",y.kc(20,19,"InProcess"),""),y.Db(3),y.Mc(e.segmenttotal.get("INPROCESS")),y.Db(2),y.Nc(" ",y.kc(25,21,"Completed"),""),y.Db(3),y.Mc(e.segmenttotal.get("COMPLETED")),y.Db(2),y.Nc(" ",y.kc(30,23,"Cancelled"),""),y.Db(3),y.Mc(e.segmenttotal.get("CANCELLED")),y.Db(1),y.rc("ngIf",0),y.Db(4),y.rc("ngIf",y.kc(38,25,e.myinbox))("ngIfElse",t)}},directives:[c.v,c.ab,c.j,c.f,c.g,c.Y,c.i,c.w,c.M,c.lb,i.n,i.q,c.N,c.h,o.m,c.s,c.L,c.mb,c.I,o.l,c.k,c.m,c.n,c.o,c.q,c.C,c.l,c.y,f.a,m.a],pipes:[O.c,o.b],styles:[".otitle[_ngcontent-%COMP%]{font-size:14px}.orderid[_ngcontent-%COMP%]{font-size:10px}.orderamt[_ngcontent-%COMP%]{font-size:18px}ion-card-header[_ngcontent-%COMP%]{padding-bottom:0}tbody[_ngcontent-%COMP%]{font-size:small}.labelt[_ngcontent-%COMP%]{font-weight:lighter}.valuet[_ngcontent-%COMP%]{padding-left:10px}ion-card-content[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.footerCartSection[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.paySection[_ngcontent-%COMP%]{background:#15bf15}.codSection[_ngcontent-%COMP%], .paySection[_ngcontent-%COMP%]{color:#fff;position:absolute;padding:6px 16px;border-radius:5px;font-weight:700;right:10px}.codSection[_ngcontent-%COMP%]{background:#de66cf}ion-card-title[_ngcontent-%COMP%]{padding-bottom:0;background:#f5fffa}"]}),t})();var x=n("hVaU"),N=n("IZvt"),S=n("4pxM");const I=[{path:"",component:E}];let j=(()=>{class t{}return t.\u0275mod=y.Ob({type:t}),t.\u0275inj=y.Nb({factory:function(e){return new(e||t)},imports:[[o.c,i.i,c.bb,x.a,N.a,S.a,a.k.forChild(I)]]}),t})()}}]);