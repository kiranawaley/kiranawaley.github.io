(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{EfXs:function(i,t,c){"use strict";c.r(t),c.d(t,"InPageModule",(function(){return S}));var n=c("ofXK"),e=c("3Pt+"),o=c("tyNb"),r=c("TEn/"),s=c("mrSG"),a=c("lJxs"),b=c("fXoL"),l=c("OJQs"),u=c("sYmb");const h=["mySearchbar"],m=["ocontent"];function d(i,t){if(1&i){const i=b.Xb();b.Wb(0,"ion-item"),b.Wb(1,"ion-avatar",8),b.ec("click",(function(){b.Cc(i);const c=t.$implicit;return b.ic(2).showPhoto(c.image,c.name)})),b.Rb(2,"img",9),b.Vb(),b.Wb(3,"h2"),b.Mc(4),b.Vb(),b.Wb(5,"p"),b.Mc(6),b.jc(7,"translate"),b.Vb(),b.Wb(8,"p"),b.Mc(9),b.Vb(),b.Wb(10,"button",10),b.ec("click",(function(){b.Cc(i);const c=t.$implicit;return b.ic(2).gotoExternal("tel:"+c.mobile)})),b.Rb(11,"ion-icon",11),b.Mc(12),b.jc(13,"translate"),b.Vb(),b.Vb()}if(2&i){const i=t.$implicit,c=b.ic(2);b.Db(2),b.rc("src",c.ygen.getConditionalPhoto(i.image),b.Ec),b.Db(2),b.Oc("",i.name," "),b.Db(2),b.Nc(b.kc(7,5,i.category)),b.Db(3),b.Nc(i.vehicalnum),b.Db(3),b.Oc(" ",b.kc(13,7,"Call")," ")}}const p=function(){return{check:!0,property:"needParking"}};function f(i,t){if(1&i&&(b.Wb(0,"ion-row"),b.Wb(1,"ion-col",7),b.Wb(2,"ion-list"),b.Wb(3,"ion-item"),b.Wb(4,"h2"),b.Mc(5),b.jc(6,"translate"),b.Vb(),b.Vb(),b.Kc(7,d,14,9,"ion-item",6),b.jc(8,"inpipe"),b.jc(9,"async"),b.Vb(),b.Vb(),b.Vb()),2&i){const i=b.ic();b.Db(5),b.Nc(b.kc(6,2,"Occupied Visitor Parking")),b.Db(2),b.rc("ngForOf",b.lc(8,4,b.kc(9,7,i.workers),b.uc(9,p)))}}function g(i,t){if(1&i&&(b.Wb(0,"p"),b.Mc(1),b.jc(2,"translate"),b.Vb()),2&i){const i=b.ic().$implicit;b.Db(1),b.Pc("",b.kc(2,2,"Vehical Number")," :",i.vehicalnum,"")}}function k(i,t){1&i&&(b.Wb(0,"p"),b.Mc(1,"\xa0\xa0"),b.Wb(2,"b",17),b.Mc(3),b.jc(4,"translate"),b.Vb(),b.Vb()),2&i&&(b.Db(3),b.Nc(b.kc(4,1,"Out")))}function y(i,t){1&i&&(b.Wb(0,"p"),b.Mc(1,"\xa0\xa0"),b.Wb(2,"b",18),b.Mc(3),b.jc(4,"translate"),b.Vb(),b.Vb()),2&i&&(b.Db(3),b.Nc(b.kc(4,1,"In")))}function V(i,t){if(1&i){const i=b.Xb();b.Wb(0,"ion-button",19),b.ec("click",(function(){b.Cc(i);const t=b.ic().$implicit;return b.ic(2).in(t)})),b.Rb(1,"ion-icon",20),b.Mc(2),b.jc(3,"translate"),b.Vb()}2&i&&(b.Db(2),b.Oc(" ",b.kc(3,1,"Entering In")," "))}function W(i,t){if(1&i){const i=b.Xb();b.Wb(0,"ion-button",21),b.ec("click",(function(){b.Cc(i);const t=b.ic().$implicit;return b.ic(2).out(t)})),b.Rb(1,"ion-icon",22),b.Mc(2),b.jc(3,"translate"),b.Vb()}2&i&&(b.Db(2),b.Oc(" ",b.kc(3,1,"Exiting Out")," "))}function D(i,t){if(1&i){const i=b.Xb();b.Wb(0,"ion-item-options",23),b.Wb(1,"ion-item-option",24),b.ec("click",(function(){b.Cc(i);const t=b.ic().$implicit;return b.ic(2).history(t)})),b.Rb(2,"ion-icon",25),b.Vb(),b.Vb()}}function v(i,t){if(1&i){const i=b.Xb();b.Wb(0,"ion-item-options",26),b.Wb(1,"ion-item-option",27),b.ec("click",(function(){b.Cc(i);const t=b.ic().$implicit;return b.ic(2).gotoExternal("tel:"+t.mobile)})),b.Rb(2,"ion-icon",28),b.Vb(),b.Wb(3,"ion-item-option",21),b.ec("click",(function(){b.Cc(i);const t=b.ic().$implicit;return b.ic(2).delete(t)})),b.Rb(4,"ion-icon",29),b.Vb(),b.Wb(5,"ion-item-option",30),b.ec("click",(function(){b.Cc(i);const t=b.ic().$implicit;return b.ic(2).editMe(t)})),b.Rb(6,"ion-icon",31),b.Vb(),b.Vb()}}function w(i,t){if(1&i){const i=b.Xb();b.Wb(0,"ion-item-sliding"),b.Wb(1,"ion-item"),b.Wb(2,"ion-avatar",12),b.ec("click",(function(){b.Cc(i);const c=t.$implicit;return b.ic(2).showPhoto(c.image,c.name)})),b.Rb(3,"img",9),b.Vb(),b.Wb(4,"ion-label"),b.Wb(5,"h2"),b.Mc(6),b.Vb(),b.Wb(7,"p"),b.Mc(8),b.jc(9,"translate"),b.Vb(),b.Kc(10,g,3,4,"p",5),b.Wb(11,"p"),b.Mc(12),b.Vb(),b.Kc(13,k,5,3,"p",5),b.Kc(14,y,5,3,"p",5),b.Kc(15,V,4,3,"ion-button",13),b.Kc(16,W,4,3,"ion-button",14),b.Vb(),b.Vb(),b.Kc(17,D,3,0,"ion-item-options",15),b.Kc(18,v,7,0,"ion-item-options",16),b.Vb()}if(2&i){const i=t.$implicit,c=b.ic(2);b.Db(3),b.rc("src",c.ygen.getConditionalPhoto(i.image),b.Ec),b.Db(3),b.Nc(i.name),b.Db(2),b.Nc(b.kc(9,11,i.category)),b.Db(2),b.rc("ngIf",i.needParking),b.Db(2),b.Nc(c.ygen.formatTimestampToDate(i.statusdate)),b.Db(1),b.rc("ngIf","false"==i.in),b.Db(1),b.rc("ngIf","true"==i.in),b.Db(1),b.rc("ngIf",c.canido&&"false"==i.in),b.Db(1),b.rc("ngIf",c.canido&&"true"==i.in),b.Db(1),b.rc("ngIf",c.canido),b.Db(1),b.rc("ngIf",c.canido)}}function I(i,t){if(1&i&&(b.Wb(0,"ion-list"),b.Wb(1,"ion-item"),b.Wb(2,"h1"),b.Mc(3),b.jc(4,"translate"),b.Wb(5,"b"),b.Mc(6),b.Vb(),b.Vb(),b.Vb(),b.Kc(7,w,19,13,"ion-item-sliding",6),b.Wb(8,"ion-row"),b.Wb(9,"h1"),b.Mc(10),b.jc(11,"translate"),b.Vb(),b.Vb(),b.Vb()),2&i){const i=b.ic();b.Db(3),b.Oc("",b.kc(4,4,"Searched list")," \xa0"),b.Db(3),b.Nc(i.tempItems.length),b.Db(1),b.rc("ngForOf",i.tempItems),b.Db(3),b.Oc(" \xa0",b.kc(11,6,"In List"),"")}}function C(i,t){if(1&i&&(b.Wb(0,"p"),b.Mc(1),b.jc(2,"translate"),b.Vb()),2&i){const i=b.ic().$implicit;b.Db(1),b.Pc("",b.kc(2,2,"Vehical Number")," :",i.vehicalnum,"")}}function M(i,t){if(1&i){const i=b.Xb();b.Wb(0,"ion-button",21),b.ec("click",(function(){b.Cc(i);const t=b.ic().$implicit;return b.ic().out(t)})),b.Rb(1,"ion-icon",22),b.Mc(2),b.jc(3,"translate"),b.Vb()}2&i&&(b.Db(2),b.Oc(" ",b.kc(3,1,"Exiting Out")," "))}function j(i,t){if(1&i){const i=b.Xb();b.Wb(0,"ion-item-options",23),b.Wb(1,"ion-item-option",24),b.ec("click",(function(){b.Cc(i);const t=b.ic().$implicit;return b.ic().history(t)})),b.Rb(2,"ion-icon",25),b.Vb(),b.Vb()}}function O(i,t){if(1&i){const i=b.Xb();b.Wb(0,"ion-item-options",26),b.Wb(1,"ion-item-option",27),b.ec("click",(function(){b.Cc(i);const t=b.ic().$implicit;return b.ic().gotoExternal("tel:"+t.mobile)})),b.Rb(2,"ion-icon",28),b.Vb(),b.Wb(3,"ion-item-option",21),b.ec("click",(function(){b.Cc(i);const t=b.ic().$implicit;return b.ic().delete(t)})),b.Rb(4,"ion-icon",29),b.Vb(),b.Wb(5,"ion-item-option",30),b.ec("click",(function(){b.Cc(i);const t=b.ic().$implicit;return b.ic().editMe(t)})),b.Rb(6,"ion-icon",31),b.Vb(),b.Vb()}}function $(i,t){if(1&i){const i=b.Xb();b.Wb(0,"ion-item-sliding"),b.Wb(1,"ion-item"),b.Wb(2,"ion-avatar",12),b.ec("click",(function(){b.Cc(i);const c=t.$implicit;return b.ic().showPhoto(c.image,c.name)})),b.Rb(3,"img",9),b.Vb(),b.Wb(4,"ion-label"),b.Wb(5,"h2"),b.Mc(6),b.Vb(),b.Wb(7,"p"),b.Mc(8),b.jc(9,"translate"),b.Vb(),b.Kc(10,C,3,4,"p",5),b.Wb(11,"p"),b.Mc(12),b.Vb(),b.Wb(13,"p"),b.Mc(14,"\xa0\xa0"),b.Wb(15,"b",18),b.Mc(16),b.jc(17,"translate"),b.Vb(),b.Vb(),b.Kc(18,M,4,3,"ion-button",14),b.Vb(),b.Vb(),b.Kc(19,j,3,0,"ion-item-options",15),b.Kc(20,O,7,0,"ion-item-options",16),b.Vb()}if(2&i){const i=t.$implicit,c=b.ic();b.Db(3),b.rc("src",c.ygen.getConditionalPhoto(i.image),b.Ec),b.Db(3),b.Nc(i.name),b.Db(2),b.Nc(b.kc(9,9,i.category)),b.Db(2),b.rc("ngIf",i.needParking),b.Db(2),b.Nc(c.ygen.formatTimestampToDate(i.statusdate)),b.Db(4),b.Nc(b.kc(17,11,"In")),b.Db(2),b.rc("ngIf",c.canido),b.Db(1),b.rc("ngIf",c.canido),b.Db(1),b.rc("ngIf",c.canido)}}const P=function(){return{check:"true",property:"in"}},K=[{path:"",component:(()=>{class i{constructor(i,t,c,n,e,o,r,s){this.modalCtrl=i,this.loadingCtrl=t,this.navCtrl=c,this.route=n,this.authService=e,this.boardService=o,this.ygen=r,this.ydataservice=s,this.viewHistory=!1,this.currentHistory=[],this.showOccupied=!1,this.current={name:""},this.isApp=!0,this.searchQuery="",this.tempItems=new Array,this.items=new Array,this.showButton=!0,this.occupiedVisitoParking=0,this.totalVisitoParking=0,this.showVisitorCounter=!1,this.workers=o.getWorkers(),this.workers.forEach(i=>{this.items=i}),this.workers.pipe(Object(a.a)(i=>(this.occupiedVisitoParking=0,i.filter(i=>i.needParking)))).forEach(i=>{i.forEach(i=>{this.occupiedVisitoParking=this.occupiedVisitoParking+1})}),e.authorizeForAction("gate")&&(this.canido=!0),o.getItems().subscribe(i=>{this.showVisitorCounter=i.istvp,this.totalVisitoParking=i.tvp})}ngOnInit(){}getShowAvailable(i){return 0==i?"dadared":i<=5?"dadayellow":"dada"}openModal(i,t){return Object(s.a)(this,void 0,void 0,(function*(){this.ydataservice.setData("current",i),this.ydataservice.setData("currentHistory",t),this.ydataservice.setData("comingfrom","inpage"),this.route.navigateByUrl("/history")}))}ionViewDidLoad(){}isamember(){return!0}out(i){let t=+new Date;this.searchbar.value="",this.boardService.updateOutHistory(this.boardService.getWorkersCrud(),i,{indate:i.statusdate,outdate:t});let c={in:"false",statusdate:t,needParking:!1};this.boardService.getWorkersCrud().update(i.$key,c)}getOccupied(i){return i.needParking?"occu":""}history(i){this.current=i,this.currentHistory=[];for(let[t,c]of Object.entries(i.history))this.currentHistory.push(c);this.openModal(this.current,this.currentHistory)}historyDone(){this.current={name:""},this.currentHistory=[],this.viewHistory=!1}in(i){this.ydataservice.setData("update",this.boardService.getWorkersCrud()),this.ydataservice.setData("comingin",i),this.searchbar.value="",this.route.navigateByUrl("/enterdetail")}removeFromSearch(i){this.tempItems.findIndex(t=>t.$key==i.$key)>-1&&(this.tempItems=this.tempItems.filter(t=>t.$key!=i.$key))}delete(i){this.boardService.updateOutHistory(this.boardService.getWorkersCrud(),i,{indate:i.statusdate,outdate:""}),this.boardService.getWorkersCrud().remove(i.$key),this.removeFromSearch(i)}editMe(i){this.ydataservice.setData("editme",i),this.route.navigateByUrl("/presentdir")}gotoExternal(i){window.location.href=i}showPhoto(i,t){this.ygen.openimage(i,t)}getItems(i){this.ocontent.scrollToTop(100),console.log(" search ready ",this.items);let t=i.target.value;this.searchQuery=t,t&&""!=t.trim()&&t.length>=2&&(this.tempItems=this.items.filter(i=>(console.log("item",i),i.name.toLowerCase().indexOf(t.toLowerCase())>-1)))}}return i.\u0275fac=function(t){return new(t||i)(b.Qb(r.mb),b.Qb(r.kb),b.Qb(r.nb),b.Qb(o.j),b.Qb(l.M),b.Qb(l.i),b.Qb(l.T),b.Qb(l.R))},i.\u0275cmp=b.Kb({type:i,selectors:[["app-in"]],viewQuery:function(i,t){var c;1&i&&(b.Tc(h,!0),b.Tc(m,!0)),2&i&&(b.yc(c=b.fc())&&(t.searchbar=c.first),b.yc(c=b.fc())&&(t.ocontent=c.first))},decls:12,vars:13,consts:[[3,"color"],["debounce","100",3,"placeholder","ionChange"],["mySearchbar",""],["padding",""],["ocontent",""],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"dadao"],["item-start","",3,"click"],[3,"src"],["ion-button","","color","secondary",3,"click"],["name","call"],["slot","start",3,"click"],["color","success",3,"click",4,"ngIf"],["color","danger",3,"click",4,"ngIf"],["side","start",4,"ngIf"],["side","end",4,"ngIf"],[2,"color","red"],[2,"color","green"],["color","success",3,"click"],["slot","icon-only","name","log-in"],["color","danger",3,"click"],["slot","icon-only","name","log-out"],["side","start"],[3,"click"],["slot","icon-only","name","book"],["side","end"],["color","secondary",3,"click"],["slot","icon-only","name","call"],["slot","icon-only","name","trash"],["color","warning",3,"click"],["slot","icon-only","name","create"]],template:function(i,t){1&i&&(b.Wb(0,"ion-header"),b.Wb(1,"ion-toolbar",0),b.Wb(2,"ion-searchbar",1,2),b.ec("ionChange",(function(i){return t.getItems(i)})),b.jc(4,"translate"),b.Vb(),b.Vb(),b.Vb(),b.Wb(5,"ion-content",3,4),b.Kc(7,f,10,10,"ion-row",5),b.Kc(8,I,12,8,"ion-list",5),b.Kc(9,$,21,13,"ion-item-sliding",6),b.jc(10,"inpipe"),b.jc(11,"async"),b.Vb()),2&i&&(b.Db(1),b.rc("color","warning"),b.Db(1),b.sc("placeholder",b.kc(4,5,"Search")),b.Db(5),b.rc("ngIf",0),b.Db(1),b.rc("ngIf",(null==t.searchQuery?null:t.searchQuery.length)>=1),b.Db(1),b.rc("ngForOf",b.lc(10,7,b.kc(11,10,t.workers),b.uc(12,P))))},directives:[r.y,r.hb,r.S,r.ub,r.s,n.m,n.l,r.R,r.r,r.K,r.D,r.e,r.z,r.I,r.J,r.i,r.H,r.G],pipes:[u.c,l.t,n.b],styles:[""]}),i})()}];let S=(()=>{class i{}return i.\u0275mod=b.Ob({type:i}),i.\u0275inj=b.Nb({factory:function(t){return new(t||i)},imports:[[n.c,e.j,r.ib,l.H,l.o,l.b,o.n.forChild(K)]]}),i})()}}]);