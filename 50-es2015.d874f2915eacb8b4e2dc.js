(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{dhUD:function(t,e,n){"use strict";n.r(e),n.d(e,"OrdermanagementPageModule",(function(){return A}));var o=n("ofXK"),i=n("3Pt+"),a=n("tyNb"),c=n("TEn/"),r=n("mrSG"),s=n("rIxz"),b=n("+DAS"),d=n("gAVi"),l=n("YKLQ"),g=n("dMTE"),p=n("ybIa"),u=n("lJxs"),h=n("i2Ty"),f=n("0nTO"),y=n("TIpf"),m=n("cBbZ"),O=n("fXoL"),W=n("YCbS"),v=n("tuuX"),V=n("/per"),C=n("0pdN"),k=n("sYmb");function M(t,e){if(1&t){const t=O.Xb();O.Wb(0,"app-appicon",22),O.ec("actionEvent",(function(e){return O.Cc(t),O.ic().deleteOrders(e)})),O.Vb()}2&t&&O.rc("icon","delete")("askquestion",!0)("icontext","Remove All")("isiconwithtext",!0)}function D(t,e){if(1&t){const t=O.Xb();O.Wb(0,"ion-button",23),O.ec("click",(function(){return O.Cc(t),O.ic().downloadOrders()})),O.Rb(1,"ion-icon",24),O.Vb()}}function E(t,e){if(1&t){const t=O.Xb();O.Wb(0,"ion-toolbar",0),O.Wb(1,"ion-searchbar",25),O.ec("ngModelChange",(function(e){return O.Cc(t),O.ic().queryText=e})),O.jc(2,"translate"),O.Vb(),O.Vb()}if(2&t){const t=O.ic();O.rc("color","secondary"),O.Db(1),O.sc("placeholder",O.kc(2,3,"Search Order")),O.rc("ngModel",t.queryText)}}function S(t,e){1&t&&O.Rb(0,"ion-progress-bar",26)}function w(t,e){1&t&&(O.Wb(0,"div",40),O.Wb(1,"ion-label",41),O.Mc(2,"PAID "),O.Vb(),O.Vb())}function I(t,e){1&t&&(O.Wb(0,"div",42),O.Wb(1,"ion-label",41),O.Mc(2,"COD "),O.Vb(),O.Vb())}function x(t,e){if(1&t){const t=O.Xb();O.Wb(0,"app-appdelete",43),O.ec("actionEvent",(function(){O.Cc(t);const e=O.ic().$implicit;return O.ic(2).deleteNotice(e)})),O.Vb()}}function P(t,e){if(1&t){const t=O.Xb();O.Wb(0,"ion-card"),O.Kc(1,w,3,0,"div",28),O.Kc(2,I,3,0,"div",29),O.Wb(3,"ion-card-header"),O.Wb(4,"ion-card-subtitle"),O.Wb(5,"div"),O.Mc(6),O.Vb(),O.Wb(7,"div"),O.Mc(8),O.Vb(),O.Vb(),O.Wb(9,"ion-card-title"),O.Wb(10,"ion-chip",30),O.ec("click",(function(){O.Cc(t);const n=e.$implicit;return O.ic(2).ygen.routeto("/order",{orderid:n.$key})})),O.Wb(11,"ion-label"),O.Mc(12),O.Vb(),O.Rb(13,"ion-icon",31),O.Vb(),O.Wb(14,"ion-chip",32),O.ec("click",(function(){O.Cc(t);const n=e.$implicit;return O.ic(2).ygen.routeto("/order",{orderid:n.$key})})),O.Wb(15,"ion-label"),O.Mc(16),O.Vb(),O.Vb(),O.Vb(),O.Vb(),O.Wb(17,"ion-card-content"),O.Wb(18,"table",33),O.Wb(19,"tbody"),O.Wb(20,"tr"),O.Wb(21,"td",34),O.Mc(22," By "),O.Vb(),O.Wb(23,"td",35),O.Mc(24),O.Vb(),O.Vb(),O.Wb(25,"tr"),O.Wb(26,"td",34),O.Mc(27," Items "),O.Vb(),O.Wb(28,"td",35),O.Mc(29),O.Vb(),O.Vb(),O.Wb(30,"tr"),O.Wb(31,"td",34),O.Mc(32," Address "),O.Vb(),O.Wb(33,"td",35),O.Mc(34),O.Vb(),O.Vb(),O.Vb(),O.Vb(),O.Vb(),O.Wb(35,"ion-item"),O.Kc(36,x,1,0,"app-appdelete",36),O.Wb(37,"app-apporderstatus",37),O.ec("actionEvent",(function(n){O.Cc(t);const o=e.$implicit;return O.ic(2).takeAcion(n,o)})),O.Vb(),O.Wb(38,"div",38),O.Rb(39,"app-callphone",39),O.Vb(),O.Vb(),O.Vb()}if(2&t){const t=e.$implicit,n=O.ic(2);O.Db(1),O.rc("ngIf","PNO"==t.paymentmethod&&"Success"==(null==t.paymentResponse?null:t.paymentResponse.order_status)),O.Db(1),O.rc("ngIf","COD"==t.paymentmethod),O.Db(4),O.Oc("On ",n.ygen.formatTimestampToDate(t.odt),""),O.Db(2),O.Nc(n.ygen.sincewhen(t.odt)),O.Db(4),O.Nc(t.sendorderid),O.Db(4),O.Oc("Rs ",t.amount,""),O.Db(8),O.Oc(" ",t.orderByName," "),O.Db(5),O.Oc(" ",n.getItemCount(t)," "),O.Db(5),O.Oc(" ",t.deliveryAddress," "),O.Db(2),O.rc("ngIf",!("COMPLETED"==t.ostatus||"CANCELLED"==t.ostatus)),O.Db(1),O.rc("currentvalue",t.ostatus)("orderstatus",n.ygen.orderstatus),O.Db(2),O.rc("mobile",t.orderByPhone)}}function R(t,e){if(1&t&&(O.Wb(0,"div"),O.Kc(1,P,40,13,"ion-card",27),O.Mc(2),O.Vb()),2&t){const t=e.ngIf,n=O.ic();O.Db(1),O.rc("ngForOf",t),O.Db(1),O.Oc(" ",n.getTotal(t)," ")}}function j(t,e){if(1&t){const t=O.Xb();O.Wb(0,"ion-fab",44,45),O.Wb(2,"ion-fab-button"),O.Rb(3,"ion-icon",46),O.Vb(),O.Wb(4,"ion-fab-list",47),O.Wb(5,"ion-fab-button",48),O.ec("click",(function(){return O.Cc(t),O.ic().openSocial("Vimeo")})),O.Rb(6,"ion-icon",49),O.Vb(),O.Wb(7,"ion-fab-button",50),O.ec("click",(function(){return O.Cc(t),O.ic().openSocial("Instagram")})),O.Rb(8,"ion-icon",51),O.Vb(),O.Wb(9,"ion-fab-button",52),O.ec("click",(function(){return O.Cc(t),O.ic().openSocial("Twitter")})),O.Rb(10,"ion-icon",53),O.Vb(),O.Wb(11,"ion-fab-button",54),O.ec("click",(function(){return O.Cc(t),O.ic().openSocial("Facebook")})),O.Rb(12,"ion-icon",55),O.Vb(),O.Vb(),O.Vb()}}let N=(()=>{class t{constructor(t,e,n,o,i,a,c,r,s,b,d,l){this.modalCtrl=t,this.loadingCtrl=e,this.router=n,this.yalert=o,this.ygen=i,this.ydataservice=a,this.ystorageservice=c,this.ypay=r,this.yds=s,this.ynoti=b,this.excelservice=d,this.events=l,this.queryText="",this.segment="NEW",this.segmenttotal=new Map,this.total=0,this.orderlist=new p.a("/shop/orders",this.ydataservice.getDatabase(),!0,null),this.setSegmentTotal()}ngOnInit(){console.log("yeah....ngoninit")}ionViewWillEnter(){console.log("yeah....ion enter"),this.myinbox=this.getData(this.segment)}deleteNotice(t){this.orderlist.removefromList(t)}deleteOrders(t){this.orderlist.getListRefer().remove()}takeAcion(t,e){Object.assign(e,{ostatus:t.value}),this.orderlist.updateList(e),this.yalert.openSnackBar(`Order Status changed for [${e.sendorderid}]`,"Ok"),this.ynoti.orderstatuschange(`Order Status changed to [${t.value}] for [${e.sendorderid}]`,e)}putinprocess(t){Object.assign(t,{ostatus:"INPROCESS"}),this.orderlist.updateList(t),this.ynoti.orderstatuschange(`Order Status changed to [${t.ostatus}] for [${t.sendorderid}]`,t),this.events.publish("shop:alertsubscription",{})}completeorder(t){Object.assign(t,{ostatus:"COMPLETED"}),this.orderlist.updateList(t),this.ynoti.orderstatuschange(`Congratulation you Order Status changed to [${t.ostatus}] for [${t.sendorderid}]`,t)}getItemCount(t){return t.payload?t.payload.length:0}getTitle(t){return t.read?"Mark Unread":"Mark Read"}segmentChanged(t){console.log("segment",t),this.myinbox=this.getData(t.detail.value)}getData(t){return this.ygen.isAdmin()?this.getOrders(t):this.getMyOrders(t)}getOrders(t){return"NEW"===t?this.orderlist.getListRefer().snapshotChanges().pipe(Object(u.a)(e=>e.map(t=>Object.assign({$key:t.payload.key},t.payload.val())).filter(e=>e.ostatus==t||!e.ostatus)),Object(u.a)(t=>t.reverse())):this.orderlist.getListRefer().snapshotChanges().pipe(Object(u.a)(e=>e.map(t=>Object.assign({$key:t.payload.key},t.payload.val())).filter(e=>e.ostatus==t)),Object(u.a)(t=>t.reverse()))}getMyOrders(t){return"NEW"===t?this.orderlist.getListRefer().snapshotChanges().pipe(Object(u.a)(e=>e.map(t=>Object.assign({$key:t.payload.key},t.payload.val())).filter(e=>(e.ostatus==t||!e.ostatus)&&e.orderedBy==this.ygen.getUid())),Object(u.a)(t=>t.reverse())):this.orderlist.getListRefer().snapshotChanges().pipe(Object(u.a)(e=>e.map(t=>Object.assign({$key:t.payload.key},t.payload.val())).filter(e=>e.ostatus==t&&e.orderedBy==this.ygen.getUid())),Object(u.a)(t=>t.reverse()))}getTotal(t){this.total=0,t.forEach(t=>{this.total=this.total+t.amount})}setSegmentTotal(){this.orderlist.getListRefer().snapshotChanges().pipe(Object(u.a)(t=>t.map(t=>Object.assign({$key:t.payload.key},t.payload.val())))).subscribe(t=>{this.ygen.orderstatus.forEach(e=>{this.segmenttotal.set(e.value,t.filter(t=>t.ostatus==e.value).length)})})}navigate(t,e){console.log()}downloadOrders(){let t=this.orderlist.getListRefer().snapshotChanges().pipe(Object(u.a)(t=>t.map(t=>Object.assign({$key:t.payload.key},t.payload.val())))).subscribe(e=>{console.log("list",e);let n=[];e.forEach(t=>{let e={orderid:t.sendorderid,amount:t.amount,paymentmethod:t.paymentmethod,deliveryAddress:t.deliveryAddress,name:t.orderByName,phone:t.orderByPhone,orderstatus:t.ostatus,dateoforder:this.ygen.formatTimestampToDate(t.odt),orderitems:this.getpayload(t.payload),paymentstatus:this.paymentdone(t),payment_id:this.paymentid(t)};n.push(e)}),0==n.length?this.yalert.openSnackBar("No orders for downlowd","Ok"):(this.excelservice.exportAsExcelFile(n,"orders"),this.yalert.openSnackBar("Orders will be downloaded...","Ok")),t.unsubscribe()})}getpayload(t){let e="";return t.forEach(t=>{e=e+t.title+"| "+t.description+"| Rs="+t.price+"| Total Items=["+t.orderqty+"] ||"}),e}paymentdone(t){let e="NOT PAID";return t.paymentResponse&&"Success"==t.paymentResponse.order_status&&(e="PAID"),e}paymentid(t){let e="";return t.paymentResponse&&(e=t.paymentResponse.payment_id),e}openSocial(t){return Object(r.a)(this,void 0,void 0,(function*(){const e=yield this.loadingCtrl.create({message:`Posting to ${t}`,duration:1e3*Math.random()+500});yield e.present(),yield e.onWillDismiss()}))}}return t.\u0275fac=function(e){return new(e||t)(O.Qb(c.kb),O.Qb(c.ib),O.Qb(a.j),O.Qb(h.a),O.Qb(s.a),O.Qb(b.a),O.Qb(d.a),O.Qb(g.a),O.Qb(l.a),O.Qb(f.a),O.Qb(y.a),O.Qb(m.a))},t.\u0275cmp=O.Kb({type:t,selectors:[["app-ordermanagement"]],decls:51,vars:31,consts:[[3,"color"],["slot","start"],["slot","end","color","secondary"],[3,"icon","askquestion","icontext","isiconwithtext","actionEvent",4,"ngIf"],["class","download","color","danger",3,"click",4,"ngIf"],[3,"click"],["slot","icon-only","name","search"],[3,"ngModel","ngModelChange","ionChange"],["value","NEW"],["color","danger"],["value","INPROCESS"],["color","dark"],["value","COMPLETED"],["color","success"],["value","CANCELLED"],["color","tertiary"],[3,"color",4,"ngIf"],["padding",""],["loading",""],[4,"ngIf","ngIfElse"],["slot","fixed","vertical","bottom","horizontal","end",4,"ngIf"],[1,"footerCartSection"],[3,"icon","askquestion","icontext","isiconwithtext","actionEvent"],["color","danger",1,"download",3,"click"],["slot","icon-only","name","code-download"],[3,"ngModel","placeholder","ngModelChange"],["type","indeterminate","reversed","true"],[4,"ngFor","ngForOf"],["class","paySection",4,"ngIf"],["class","codSection",4,"ngIf"],["color","secondary",3,"click"],["name","eye"],["color","primary",3,"click"],[1,"contentorder"],[1,"labelt"],[1,"valuet"],["icon","delete","message","delete",3,"actionEvent",4,"ngIf"],[3,"currentvalue","orderstatus","actionEvent"],[2,"padding","5px"],[3,"mobile"],[1,"paySection"],["text-uppercase","",1,"sc-ion-label-md-h","sc-ion-label-md-s","hydrated"],[1,"codSection"],["icon","delete","message","delete",3,"actionEvent"],["slot","fixed","vertical","bottom","horizontal","end"],["fab",""],["name","glasses-outline"],["side","top"],["color","success",3,"click"],["name","logo-whatsapp"],["color","instagram",3,"click"],["name","bar-chart-outline"],["color","twitter",3,"click"],["name","calendar-outline"],["color","facebook",3,"click"],["name","today-outline"]],template:function(t,e){if(1&t&&(O.Wb(0,"ion-header"),O.Wb(1,"ion-toolbar",0),O.Wb(2,"ion-buttons",1),O.Rb(3,"ion-back-button"),O.Vb(),O.Wb(4,"ion-title"),O.Mc(5),O.jc(6,"translate"),O.Vb(),O.Wb(7,"ion-buttons",2),O.Kc(8,M,1,4,"app-appicon",3),O.Kc(9,D,2,0,"ion-button",4),O.Wb(10,"ion-button",5),O.ec("click",(function(){return e.ygen.routeto("searchorder",{})})),O.Rb(11,"ion-icon",6),O.Vb(),O.Vb(),O.Vb(),O.Vb(),O.Wb(12,"ion-header"),O.Wb(13,"ion-toolbar",0),O.Wb(14,"ion-segment",7),O.ec("ngModelChange",(function(t){return e.segment=t}))("ionChange",(function(t){return e.segmentChanged(t)})),O.Wb(15,"ion-segment-button",8),O.Mc(16),O.jc(17,"translate"),O.Wb(18,"ion-badge",9),O.Mc(19),O.Vb(),O.Vb(),O.Wb(20,"ion-segment-button",10),O.Mc(21),O.jc(22,"translate"),O.Wb(23,"ion-badge",11),O.Mc(24),O.Vb(),O.Vb(),O.Wb(25,"ion-segment-button",12),O.Mc(26),O.jc(27,"translate"),O.Wb(28,"ion-badge",13),O.Mc(29),O.Vb(),O.Vb(),O.Wb(30,"ion-segment-button",14),O.Mc(31),O.jc(32,"translate"),O.Wb(33,"ion-badge",15),O.Mc(34),O.Vb(),O.Vb(),O.Vb(),O.Vb(),O.Kc(35,E,3,5,"ion-toolbar",16),O.Vb(),O.Wb(36,"ion-content",17),O.Kc(37,S,1,0,"ng-template",null,18,O.Lc),O.Kc(39,R,3,2,"div",19),O.jc(40,"async"),O.Kc(41,j,13,0,"ion-fab",20),O.Vb(),O.Wb(42,"ion-footer"),O.Wb(43,"ion-toolbar"),O.Wb(44,"div",21),O.Wb(45,"ion-text"),O.Wb(46,"h3"),O.Mc(47,"Total"),O.Vb(),O.Vb(),O.Wb(48,"ion-text"),O.Wb(49,"h3"),O.Mc(50),O.Vb(),O.Vb(),O.Vb(),O.Vb(),O.Vb()),2&t){const t=O.zc(38);O.Db(1),O.rc("color","warning"),O.Db(4),O.Nc(O.kc(6,19,"Order Management")),O.Db(3),O.rc("ngIf",e.ygen.isAdmin()),O.Db(1),O.rc("ngIf",e.ygen.isAdmin()),O.Db(4),O.rc("color","warning"),O.Db(1),O.rc("ngModel",e.segment),O.Db(2),O.Oc(" ",O.kc(17,21,"New"),""),O.Db(3),O.Nc(e.segmenttotal.get("NEW")),O.Db(2),O.Oc(" ",O.kc(22,23,"InProcess"),""),O.Db(3),O.Nc(e.segmenttotal.get("INPROCESS")),O.Db(2),O.Oc(" ",O.kc(27,25,"Completed"),""),O.Db(3),O.Nc(e.segmenttotal.get("COMPLETED")),O.Db(2),O.Oc(" ",O.kc(32,27,"Cancelled"),""),O.Db(3),O.Nc(e.segmenttotal.get("CANCELLED")),O.Db(1),O.rc("ngIf",0),O.Db(4),O.rc("ngIf",O.kc(40,29,e.myinbox))("ngIfElse",t),O.Db(2),O.rc("ngIf",!1),O.Db(9),O.Oc(" \u20b9 ",e.total," ")}},directives:[c.y,c.fb,c.j,c.f,c.g,c.db,o.m,c.i,c.z,c.R,c.rb,i.n,i.q,c.S,c.h,c.s,c.w,c.ab,W.a,c.Q,c.sb,c.N,o.l,c.k,c.m,c.n,c.o,c.q,c.H,c.l,c.B,v.a,V.a,C.a,c.t,c.u,c.v],pipes:[k.c,o.b],styles:[".otitle[_ngcontent-%COMP%]{font-size:14px}.orderid[_ngcontent-%COMP%]{font-size:10px}.orderamt[_ngcontent-%COMP%]{font-size:18px}ion-card-header[_ngcontent-%COMP%]{padding-bottom:0}tbody[_ngcontent-%COMP%]{font-size:small}.labelt[_ngcontent-%COMP%]{font-weight:lighter}.valuet[_ngcontent-%COMP%]{padding-left:10px}ion-card-content[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.footerCartSection[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.paySection[_ngcontent-%COMP%]{background:#15bf15}.codSection[_ngcontent-%COMP%], .paySection[_ngcontent-%COMP%]{color:#fff;position:absolute;padding:6px 16px;border-radius:5px;font-weight:700;right:10px}.codSection[_ngcontent-%COMP%]{background:#de66cf}ion-card-title[_ngcontent-%COMP%]{padding-bottom:0;background:#f5fffa}.download[_ngcontent-%COMP%]{font-size:30px;font-weight:700}ion-fab-button[_ngcontent-%COMP%]{--background:var(--ion-color-step-150,#fff);--background-hover:var(--ion-color-step-200,#f2f2f2);--background-focused:var(--ion-color-step-250,#d9d9d9);--color:var(--ion-color-primary,#3880ff)}.ios[_ngcontent-%COMP%]   ion-fab-button[_ngcontent-%COMP%]{--background-activated:var(--ion-color-step-250,#d9d9d9)}"]}),t})();var T=n("hVaU"),L=n("IZvt"),_=n("4pxM");const $=[{path:"",component:N}];let A=(()=>{class t{}return t.\u0275mod=O.Ob({type:t}),t.\u0275inj=O.Nb({factory:function(e){return new(e||t)},imports:[[o.c,i.i,c.gb,T.a,L.a,_.a,a.n.forChild($)]]}),t})()}}]);