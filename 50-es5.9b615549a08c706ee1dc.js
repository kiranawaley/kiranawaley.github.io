function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{dhUD:function(e,t,n){"use strict";n.r(t),n.d(t,"OrdermanagementPageModule",(function(){return $}));var o=n("ofXK"),a=n("3Pt+"),i=n("tyNb"),r=n("TEn/"),c=n("mrSG"),s=n("rIxz"),l=n("+DAS"),b=n("gAVi"),d=n("YKLQ"),u=n("dMTE"),g=n("ybIa"),f=n("lJxs"),p=n("i2Ty"),y=n("0nTO"),h=n("TIpf"),m=n("cBbZ"),v=n("fXoL"),k=n("YCbS"),O=n("tuuX"),C=n("/per"),W=n("0pdN"),V=n("sYmb");function M(e,t){if(1&e){var n=v.Xb();v.Wb(0,"app-appicon",22),v.ec("actionEvent",(function(e){return v.Cc(n),v.ic().deleteOrders(e)})),v.Vb()}2&e&&v.rc("icon","delete")("askquestion",!0)("icontext","Remove All")("isiconwithtext",!0)}function D(e,t){if(1&e){var n=v.Xb();v.Wb(0,"ion-button",23),v.ec("click",(function(){return v.Cc(n),v.ic().downloadOrders()})),v.Rb(1,"ion-icon",24),v.Vb()}}function w(e,t){if(1&e){var n=v.Xb();v.Wb(0,"ion-toolbar",0),v.Wb(1,"ion-searchbar",25),v.ec("ngModelChange",(function(e){return v.Cc(n),v.ic().queryText=e})),v.jc(2,"translate"),v.Vb(),v.Vb()}if(2&e){var o=v.ic();v.rc("color","secondary"),v.Db(1),v.sc("placeholder",v.kc(2,3,"Search Order")),v.rc("ngModel",o.queryText)}}function E(e,t){1&e&&v.Rb(0,"ion-progress-bar",26)}function x(e,t){1&e&&(v.Wb(0,"div",40),v.Wb(1,"ion-label",41),v.Mc(2,"PAID "),v.Vb(),v.Vb())}function P(e,t){1&e&&(v.Wb(0,"div",42),v.Wb(1,"ion-label",41),v.Mc(2,"COD "),v.Vb(),v.Vb())}function S(e,t){if(1&e){var n=v.Xb();v.Wb(0,"app-appdelete",43),v.ec("actionEvent",(function(){v.Cc(n);var e=v.ic().$implicit;return v.ic(2).deleteNotice(e)})),v.Vb()}}function I(e,t){if(1&e){var n=v.Xb();v.Wb(0,"ion-card"),v.Kc(1,x,3,0,"div",28),v.Kc(2,P,3,0,"div",29),v.Wb(3,"ion-card-header"),v.Wb(4,"ion-card-subtitle"),v.Wb(5,"div"),v.Mc(6),v.Vb(),v.Wb(7,"div"),v.Mc(8),v.Vb(),v.Vb(),v.Wb(9,"ion-card-title"),v.Wb(10,"ion-chip",30),v.ec("click",(function(){v.Cc(n);var e=t.$implicit;return v.ic(2).ygen.routeto("/order",{orderid:e.$key})})),v.Wb(11,"ion-label"),v.Mc(12),v.Vb(),v.Rb(13,"ion-icon",31),v.Vb(),v.Wb(14,"ion-chip",32),v.ec("click",(function(){v.Cc(n);var e=t.$implicit;return v.ic(2).ygen.routeto("/order",{orderid:e.$key})})),v.Wb(15,"ion-label"),v.Mc(16),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Wb(17,"ion-card-content"),v.Wb(18,"table",33),v.Wb(19,"tbody"),v.Wb(20,"tr"),v.Wb(21,"td",34),v.Mc(22," By "),v.Vb(),v.Wb(23,"td",35),v.Mc(24),v.Vb(),v.Vb(),v.Wb(25,"tr"),v.Wb(26,"td",34),v.Mc(27," Items "),v.Vb(),v.Wb(28,"td",35),v.Mc(29),v.Vb(),v.Vb(),v.Wb(30,"tr"),v.Wb(31,"td",34),v.Mc(32," Address "),v.Vb(),v.Wb(33,"td",35),v.Mc(34),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Wb(35,"ion-item"),v.Kc(36,S,1,0,"app-appdelete",36),v.Wb(37,"app-apporderstatus",37),v.ec("actionEvent",(function(e){v.Cc(n);var o=t.$implicit;return v.ic(2).takeAcion(e,o)})),v.Vb(),v.Wb(38,"div",38),v.Rb(39,"app-callphone",39),v.Vb(),v.Vb(),v.Vb()}if(2&e){var o=t.$implicit,a=v.ic(2);v.Db(1),v.rc("ngIf","PNO"==o.paymentmethod&&"Success"==(null==o.paymentResponse?null:o.paymentResponse.order_status)),v.Db(1),v.rc("ngIf","COD"==o.paymentmethod),v.Db(4),v.Oc("On ",a.ygen.formatTimestampToDate(o.odt),""),v.Db(2),v.Nc(a.ygen.sincewhen(o.odt)),v.Db(4),v.Nc(o.sendorderid),v.Db(4),v.Oc("Rs ",o.amount,""),v.Db(8),v.Oc(" ",o.orderByName," "),v.Db(5),v.Oc(" ",a.getItemCount(o)," "),v.Db(5),v.Oc(" ",o.deliveryAddress," "),v.Db(2),v.rc("ngIf",!("COMPLETED"==o.ostatus||"CANCELLED"==o.ostatus)),v.Db(1),v.rc("currentvalue",o.ostatus)("orderstatus",a.ygen.orderstatus),v.Db(2),v.rc("mobile",o.orderByPhone)}}function R(e,t){if(1&e&&(v.Wb(0,"div"),v.Kc(1,I,40,13,"ion-card",27),v.Mc(2),v.Vb()),2&e){var n=t.ngIf,o=v.ic();v.Db(1),v.rc("ngForOf",n),v.Db(1),v.Oc(" ",o.getTotal(n)," ")}}function j(e,t){if(1&e){var n=v.Xb();v.Wb(0,"ion-fab",44,45),v.Wb(2,"ion-fab-button"),v.Rb(3,"ion-icon",46),v.Vb(),v.Wb(4,"ion-fab-list",47),v.Wb(5,"ion-fab-button",48),v.ec("click",(function(){return v.Cc(n),v.ic().openSocial("Vimeo")})),v.Rb(6,"ion-icon",49),v.Vb(),v.Wb(7,"ion-fab-button",50),v.ec("click",(function(){return v.Cc(n),v.ic().openSocial("Instagram")})),v.Rb(8,"ion-icon",51),v.Vb(),v.Wb(9,"ion-fab-button",52),v.ec("click",(function(){return v.Cc(n),v.ic().openSocial("Twitter")})),v.Rb(10,"ion-icon",53),v.Vb(),v.Wb(11,"ion-fab-button",54),v.ec("click",(function(){return v.Cc(n),v.ic().openSocial("Facebook")})),v.Rb(12,"ion-icon",55),v.Vb(),v.Vb(),v.Vb()}}var N,_,T=((N=function(){function e(t,n,o,a,i,r,c,s,l,b,d,u){_classCallCheck(this,e),this.modalCtrl=t,this.loadingCtrl=n,this.router=o,this.yalert=a,this.ygen=i,this.ydataservice=r,this.ystorageservice=c,this.ypay=s,this.yds=l,this.ynoti=b,this.excelservice=d,this.events=u,this.queryText="",this.segment="NEW",this.segmenttotal=new Map,this.total=0,this.orderlist=new g.a("/shop/orders",this.ydataservice.getDatabase(),!0,null),this.setSegmentTotal()}return _createClass(e,[{key:"ngOnInit",value:function(){console.log("yeah....ngoninit")}},{key:"ionViewWillEnter",value:function(){console.log("yeah....ion enter"),this.myinbox=this.getData(this.segment)}},{key:"deleteNotice",value:function(e){this.orderlist.removefromList(e)}},{key:"deleteOrders",value:function(e){this.orderlist.getListRefer().remove()}},{key:"takeAcion",value:function(e,t){Object.assign(t,{ostatus:e.value}),this.orderlist.updateList(t),this.yalert.openSnackBar("Order Status changed for [".concat(t.sendorderid,"]"),"Ok"),this.ynoti.orderstatuschange("Order Status changed to [".concat(e.value,"] for [").concat(t.sendorderid,"]"),t)}},{key:"putinprocess",value:function(e){Object.assign(e,{ostatus:"INPROCESS"}),this.orderlist.updateList(e),this.ynoti.orderstatuschange("Order Status changed to [".concat(e.ostatus,"] for [").concat(e.sendorderid,"]"),e),this.events.publish("shop:alertsubscription",{})}},{key:"completeorder",value:function(e){Object.assign(e,{ostatus:"COMPLETED"}),this.orderlist.updateList(e),this.ynoti.orderstatuschange("Congratulation you Order Status changed to [".concat(e.ostatus,"] for [").concat(e.sendorderid,"]"),e)}},{key:"getItemCount",value:function(e){return e.payload?e.payload.length:0}},{key:"getTitle",value:function(e){return e.read?"Mark Unread":"Mark Read"}},{key:"segmentChanged",value:function(e){console.log("segment",e),this.myinbox=this.getData(e.detail.value)}},{key:"getData",value:function(e){return this.ygen.isAdmin()?this.getOrders(e):this.getMyOrders(e)}},{key:"getOrders",value:function(e){return"NEW"===e?this.orderlist.getListRefer().snapshotChanges().pipe(Object(f.a)((function(t){return t.map((function(e){return Object.assign({$key:e.payload.key},e.payload.val())})).filter((function(t){return t.ostatus==e||!t.ostatus}))})),Object(f.a)((function(e){return e.reverse()}))):this.orderlist.getListRefer().snapshotChanges().pipe(Object(f.a)((function(t){return t.map((function(e){return Object.assign({$key:e.payload.key},e.payload.val())})).filter((function(t){return t.ostatus==e}))})),Object(f.a)((function(e){return e.reverse()})))}},{key:"getMyOrders",value:function(e){var t=this;return"NEW"===e?this.orderlist.getListRefer().snapshotChanges().pipe(Object(f.a)((function(n){return n.map((function(e){return Object.assign({$key:e.payload.key},e.payload.val())})).filter((function(n){return(n.ostatus==e||!n.ostatus)&&n.orderedBy==t.ygen.getUid()}))})),Object(f.a)((function(e){return e.reverse()}))):this.orderlist.getListRefer().snapshotChanges().pipe(Object(f.a)((function(n){return n.map((function(e){return Object.assign({$key:e.payload.key},e.payload.val())})).filter((function(n){return n.ostatus==e&&n.orderedBy==t.ygen.getUid()}))})),Object(f.a)((function(e){return e.reverse()})))}},{key:"getTotal",value:function(e){var t=this;this.total=0,e.forEach((function(e){t.total=t.total+e.amount}))}},{key:"setSegmentTotal",value:function(){var e=this;this.orderlist.getListRefer().snapshotChanges().pipe(Object(f.a)((function(e){return e.map((function(e){return Object.assign({$key:e.payload.key},e.payload.val())}))}))).subscribe((function(t){e.ygen.orderstatus.forEach((function(n){e.segmenttotal.set(n.value,t.filter((function(e){return e.ostatus==n.value})).length)}))}))}},{key:"navigate",value:function(e,t){console.log()}},{key:"downloadOrders",value:function(){var e=this,t=this.orderlist.getListRefer().snapshotChanges().pipe(Object(f.a)((function(e){return e.map((function(e){return Object.assign({$key:e.payload.key},e.payload.val())}))}))).subscribe((function(n){console.log("list",n);var o=[];n.forEach((function(t){var n={orderid:t.sendorderid,amount:t.amount,paymentmethod:t.paymentmethod,deliveryAddress:t.deliveryAddress,name:t.orderByName,phone:t.orderByPhone,orderstatus:t.ostatus,dateoforder:e.ygen.formatTimestampToDate(t.odt),orderitems:e.getpayload(t.payload),paymentstatus:e.paymentdone(t),payment_id:e.paymentid(t)};o.push(n)})),0==o.length?e.yalert.openSnackBar("No orders for downlowd","Ok"):(e.excelservice.exportAsExcelFile(o,"orders"),e.yalert.openSnackBar("Orders will be downloaded...","Ok")),t.unsubscribe()}))}},{key:"getpayload",value:function(e){var t="";return e.forEach((function(e){t=t+e.title+"| "+e.description+"| Rs="+e.price+"| Total Items=["+e.orderqty+"] ||"})),t}},{key:"paymentdone",value:function(e){var t="NOT PAID";return e.paymentResponse&&"Success"==e.paymentResponse.order_status&&(t="PAID"),t}},{key:"paymentid",value:function(e){var t="";return e.paymentResponse&&(t=e.paymentResponse.payment_id),t}},{key:"openSocial",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadingCtrl.create({message:"Posting to ".concat(e),duration:1e3*Math.random()+500});case 2:return n=t.sent,t.next=5,n.present();case 5:return t.next=7,n.onWillDismiss();case 7:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||N)(v.Qb(r.kb),v.Qb(r.ib),v.Qb(i.g),v.Qb(p.a),v.Qb(s.a),v.Qb(l.a),v.Qb(b.a),v.Qb(u.a),v.Qb(d.a),v.Qb(y.a),v.Qb(h.a),v.Qb(m.a))},N.\u0275cmp=v.Kb({type:N,selectors:[["app-ordermanagement"]],decls:51,vars:31,consts:[[3,"color"],["slot","start"],["slot","end","color","secondary"],[3,"icon","askquestion","icontext","isiconwithtext","actionEvent",4,"ngIf"],["class","download","color","danger",3,"click",4,"ngIf"],[3,"click"],["slot","icon-only","name","search"],[3,"ngModel","ngModelChange","ionChange"],["value","NEW"],["color","danger"],["value","INPROCESS"],["color","dark"],["value","COMPLETED"],["color","success"],["value","CANCELLED"],["color","tertiary"],[3,"color",4,"ngIf"],["padding",""],["loading",""],[4,"ngIf","ngIfElse"],["slot","fixed","vertical","bottom","horizontal","end",4,"ngIf"],[1,"footerCartSection"],[3,"icon","askquestion","icontext","isiconwithtext","actionEvent"],["color","danger",1,"download",3,"click"],["slot","icon-only","name","code-download"],[3,"ngModel","placeholder","ngModelChange"],["type","indeterminate","reversed","true"],[4,"ngFor","ngForOf"],["class","paySection",4,"ngIf"],["class","codSection",4,"ngIf"],["color","secondary",3,"click"],["name","eye"],["color","primary",3,"click"],[1,"contentorder"],[1,"labelt"],[1,"valuet"],["icon","delete","message","delete",3,"actionEvent",4,"ngIf"],[3,"currentvalue","orderstatus","actionEvent"],[2,"padding","5px"],[3,"mobile"],[1,"paySection"],["text-uppercase","",1,"sc-ion-label-md-h","sc-ion-label-md-s","hydrated"],[1,"codSection"],["icon","delete","message","delete",3,"actionEvent"],["slot","fixed","vertical","bottom","horizontal","end"],["fab",""],["name","glasses-outline"],["side","top"],["color","success",3,"click"],["name","logo-whatsapp"],["color","instagram",3,"click"],["name","bar-chart-outline"],["color","twitter",3,"click"],["name","calendar-outline"],["color","facebook",3,"click"],["name","today-outline"]],template:function(e,t){if(1&e&&(v.Wb(0,"ion-header"),v.Wb(1,"ion-toolbar",0),v.Wb(2,"ion-buttons",1),v.Rb(3,"ion-back-button"),v.Vb(),v.Wb(4,"ion-title"),v.Mc(5),v.jc(6,"translate"),v.Vb(),v.Wb(7,"ion-buttons",2),v.Kc(8,M,1,4,"app-appicon",3),v.Kc(9,D,2,0,"ion-button",4),v.Wb(10,"ion-button",5),v.ec("click",(function(){return t.ygen.routeto("searchorder",{})})),v.Rb(11,"ion-icon",6),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Wb(12,"ion-header"),v.Wb(13,"ion-toolbar",0),v.Wb(14,"ion-segment",7),v.ec("ngModelChange",(function(e){return t.segment=e}))("ionChange",(function(e){return t.segmentChanged(e)})),v.Wb(15,"ion-segment-button",8),v.Mc(16),v.jc(17,"translate"),v.Wb(18,"ion-badge",9),v.Mc(19),v.Vb(),v.Vb(),v.Wb(20,"ion-segment-button",10),v.Mc(21),v.jc(22,"translate"),v.Wb(23,"ion-badge",11),v.Mc(24),v.Vb(),v.Vb(),v.Wb(25,"ion-segment-button",12),v.Mc(26),v.jc(27,"translate"),v.Wb(28,"ion-badge",13),v.Mc(29),v.Vb(),v.Vb(),v.Wb(30,"ion-segment-button",14),v.Mc(31),v.jc(32,"translate"),v.Wb(33,"ion-badge",15),v.Mc(34),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Kc(35,w,3,5,"ion-toolbar",16),v.Vb(),v.Wb(36,"ion-content",17),v.Kc(37,E,1,0,"ng-template",null,18,v.Lc),v.Kc(39,R,3,2,"div",19),v.jc(40,"async"),v.Kc(41,j,13,0,"ion-fab",20),v.Vb(),v.Wb(42,"ion-footer"),v.Wb(43,"ion-toolbar"),v.Wb(44,"div",21),v.Wb(45,"ion-text"),v.Wb(46,"h3"),v.Mc(47,"Total"),v.Vb(),v.Vb(),v.Wb(48,"ion-text"),v.Wb(49,"h3"),v.Mc(50),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb()),2&e){var n=v.zc(38);v.Db(1),v.rc("color","warning"),v.Db(4),v.Nc(v.kc(6,19,"Order Management")),v.Db(3),v.rc("ngIf",t.ygen.isAdmin()),v.Db(1),v.rc("ngIf",t.ygen.isAdmin()),v.Db(4),v.rc("color","warning"),v.Db(1),v.rc("ngModel",t.segment),v.Db(2),v.Oc(" ",v.kc(17,21,"New"),""),v.Db(3),v.Nc(t.segmenttotal.get("NEW")),v.Db(2),v.Oc(" ",v.kc(22,23,"InProcess"),""),v.Db(3),v.Nc(t.segmenttotal.get("INPROCESS")),v.Db(2),v.Oc(" ",v.kc(27,25,"Completed"),""),v.Db(3),v.Nc(t.segmenttotal.get("COMPLETED")),v.Db(2),v.Oc(" ",v.kc(32,27,"Cancelled"),""),v.Db(3),v.Nc(t.segmenttotal.get("CANCELLED")),v.Db(1),v.rc("ngIf",0),v.Db(4),v.rc("ngIf",v.kc(40,29,t.myinbox))("ngIfElse",n),v.Db(2),v.rc("ngIf",!1),v.Db(9),v.Oc(" \u20b9 ",t.total," ")}},directives:[r.y,r.fb,r.j,r.f,r.g,r.db,o.m,r.i,r.z,r.R,r.rb,a.n,a.q,r.S,r.h,r.s,r.w,r.ab,k.a,r.Q,r.sb,r.N,o.l,r.k,r.m,r.n,r.o,r.q,r.H,r.l,r.B,O.a,C.a,W.a,r.t,r.u,r.v],pipes:[V.c,o.b],styles:[".otitle[_ngcontent-%COMP%]{font-size:14px}.orderid[_ngcontent-%COMP%]{font-size:10px}.orderamt[_ngcontent-%COMP%]{font-size:18px}ion-card-header[_ngcontent-%COMP%]{padding-bottom:0}tbody[_ngcontent-%COMP%]{font-size:small}.labelt[_ngcontent-%COMP%]{font-weight:lighter}.valuet[_ngcontent-%COMP%]{padding-left:10px}ion-card-content[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.footerCartSection[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.paySection[_ngcontent-%COMP%]{background:#15bf15}.codSection[_ngcontent-%COMP%], .paySection[_ngcontent-%COMP%]{color:#fff;position:absolute;padding:6px 16px;border-radius:5px;font-weight:700;right:10px}.codSection[_ngcontent-%COMP%]{background:#de66cf}ion-card-title[_ngcontent-%COMP%]{padding-bottom:0;background:#f5fffa}.download[_ngcontent-%COMP%]{font-size:30px;font-weight:700}ion-fab-button[_ngcontent-%COMP%]{--background:var(--ion-color-step-150,#fff);--background-hover:var(--ion-color-step-200,#f2f2f2);--background-focused:var(--ion-color-step-250,#d9d9d9);--color:var(--ion-color-primary,#3880ff)}.ios[_ngcontent-%COMP%]   ion-fab-button[_ngcontent-%COMP%]{--background-activated:var(--ion-color-step-250,#d9d9d9)}"]}),N),L=n("hVaU"),A=n("IZvt"),Q=n("4pxM"),K=[{path:"",component:T}],$=((_=function e(){_classCallCheck(this,e)}).\u0275mod=v.Ob({type:_}),_.\u0275inj=v.Nb({factory:function(e){return new(e||_)},imports:[[o.c,a.i,r.gb,L.a,A.a,Q.a,i.k.forChild(K)]]}),_)}}]);