(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{aiMS:function(e,t,n){"use strict";n.r(t),n.d(t,"SearchorderPageModule",(function(){return A}));var o=n("ofXK"),i=n("3Pt+"),c=n("tyNb"),r=n("TEn/"),a=n("rIxz"),s=n("+DAS"),d=n("gAVi"),b=n("YKLQ"),l=n("dMTE"),p=n("ybIa"),g=n("lJxs"),u=n("i2Ty"),f=n("0nTO"),h=n("fXoL"),y=n("tuuX"),m=n("/per"),O=n("0pdN"),C=n("YCbS"),V=n("sYmb");function v(e,t){1&e&&h.Rb(0,"ion-progress-bar",7)}function W(e,t){1&e&&(h.Wb(0,"div",20),h.Wb(1,"ion-label",21),h.Mc(2,"PAID "),h.Vb(),h.Vb())}function M(e,t){1&e&&(h.Wb(0,"div",22),h.Wb(1,"ion-label",21),h.Mc(2,"COD "),h.Vb(),h.Vb())}function D(e,t){1&e&&h.Sb(0)}function I(e,t){if(1&e){const e=h.Xb();h.Wb(0,"app-appdelete",28),h.ec("actionEvent",(function(){h.Cc(e);const t=h.ic(3).$implicit;return h.ic(2).deleteNotice(t)})),h.Vb()}}function k(e,t){if(1&e){const e=h.Xb();h.Wb(0,"ion-item"),h.Kc(1,I,1,0,"app-appdelete",24),h.Wb(2,"app-apporderstatus",25),h.ec("actionEvent",(function(t){h.Cc(e);const n=h.ic(2).$implicit;return h.ic(2).takeAcion(t,n)})),h.Vb(),h.Wb(3,"div",26),h.Rb(4,"app-callphone",27),h.Vb(),h.Vb()}if(2&e){const e=h.ic(2).$implicit,t=h.ic(2);h.Db(1),h.rc("ngIf",!("COMPLETED"==e.ostatus||"CANCELLED"==e.ostatus)),h.Db(1),h.rc("currentvalue",e.ostatus)("orderstatus",t.ygen.orderstatus),h.Db(2),h.rc("mobile",e.orderByPhone)}}function x(e,t){if(1&e&&h.Kc(0,k,5,4,"ion-item",23),2&e){const e=h.ic(3);h.rc("ngIf",e.ygen.isAdmin())}}function S(e,t){if(1&e){const e=h.Xb();h.Wb(0,"app-appicon",31),h.ec("actionEvent",(function(){h.Cc(e);const t=h.ic(2).$implicit;return h.ic(2).cancelOrder(t)})),h.Vb()}2&e&&h.rc("color","accent")("icon","cancel_schedule_send")("askquestion",!0)("icontext","Cancel Order")("isiconwithtext",!0)("askquestiontext","Are you sure, you want to cancel Order?")}function P(e,t){if(1&e&&(h.Wb(0,"div",26),h.Mc(1,"Call Support "),h.Rb(2,"app-callphone",27),h.Vb()),2&e){const e=h.ic(4);h.Db(2),h.rc("mobile",e.ygen.getSettings().oncallsupport)}}function E(e,t){if(1&e&&(h.Wb(0,"ion-item"),h.Kc(1,S,1,6,"app-appicon",29),h.Kc(2,P,3,1,"div",30),h.Vb()),2&e){const e=h.ic().$implicit,t=h.ic(2);h.Db(1),h.rc("ngIf","NEW"==e.ostatus),h.Db(1),h.rc("ngIf",t.ygen.getSettings())}}function w(e,t){if(1&e){const e=h.Xb();h.Wb(0,"ion-card"),h.Kc(1,W,3,0,"div",9),h.Kc(2,M,3,0,"div",10),h.Wb(3,"ion-card-header"),h.Wb(4,"ion-card-subtitle"),h.Wb(5,"div"),h.Mc(6),h.Vb(),h.Wb(7,"div"),h.Mc(8),h.Vb(),h.Vb(),h.Wb(9,"ion-card-title"),h.Wb(10,"ion-chip",11),h.ec("click",(function(){h.Cc(e);const n=t.$implicit;return h.ic(2).ygen.routeto("/order",{orderid:n.$key})})),h.Wb(11,"ion-label"),h.Mc(12),h.Vb(),h.Rb(13,"ion-icon",12),h.Vb(),h.Wb(14,"ion-chip",13),h.ec("click",(function(){h.Cc(e);const n=t.$implicit;return h.ic(2).ygen.routeto("/order",{orderid:n.$key})})),h.Wb(15,"ion-label"),h.Mc(16),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(17,"ion-card-content"),h.Wb(18,"table",14),h.Wb(19,"tbody"),h.Wb(20,"tr"),h.Wb(21,"td",15),h.Mc(22," By "),h.Vb(),h.Wb(23,"td",16),h.Mc(24),h.Vb(),h.Vb(),h.Wb(25,"tr"),h.Wb(26,"td",15),h.Mc(27," Items "),h.Vb(),h.Wb(28,"td",16),h.Mc(29),h.Vb(),h.Vb(),h.Wb(30,"tr"),h.Wb(31,"td",15),h.Mc(32," Address "),h.Vb(),h.Wb(33,"td",16),h.Mc(34),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Kc(35,D,1,0,"ng-container",17),h.Kc(36,x,1,1,"ng-template",null,18,h.Lc),h.Kc(38,E,3,2,"ng-template",null,19,h.Lc),h.Vb()}if(2&e){const e=t.$implicit,n=h.zc(37),o=h.zc(39),i=h.ic(2);h.Db(1),h.rc("ngIf","PNO"==e.paymentmethod&&"Success"==(null==e.paymentResponse?null:e.paymentResponse.order_status)),h.Db(1),h.rc("ngIf","COD"==e.paymentmethod),h.Db(4),h.Oc("On ",i.ygen.formatTimestampToDate(e.odt),""),h.Db(2),h.Nc(i.ygen.sincewhen(e.odt)),h.Db(4),h.Nc(e.sendorderid),h.Db(4),h.Oc("Rs ",e.amount,""),h.Db(8),h.Oc(" ",e.orderByName," "),h.Db(5),h.Oc(" ",i.getItemCount(e)," "),h.Db(5),h.Oc(" ",e.deliveryAddress," "),h.Db(1),h.rc("ngIf",i.ygen.isAdmin())("ngIfThen",n)("ngIfElse",o)}}function N(e,t){if(1&e&&(h.Wb(0,"div"),h.Kc(1,w,40,12,"ion-card",8),h.Vb()),2&e){const e=t.ngIf;h.Db(1),h.rc("ngForOf",e)}}let $=(()=>{class e{constructor(e,t,n,o,i,c,r,a,s){this.modalCtrl=e,this.router=t,this.yalert=n,this.ygen=o,this.ydataservice=i,this.ystorageservice=c,this.ypay=r,this.yds=a,this.ynoti=s,this.total=0,this.orderlist=new p.a("/shop/orders",this.ydataservice.getDatabase(),!0,null)}ngOnInit(){console.log("yeah....ngoninit")}ionViewWillEnter(){console.log("yeah....ion enter"),this.myinbox=this.getData("")}deleteNotice(e){this.orderlist.removefromList(e)}takeAcion(e,t){Object.assign(t,{ostatus:e.value}),this.orderlist.updateList(t),this.yalert.openSnackBar(`Order Status changed for [${t.sendorderid}]`,"Ok"),this.ynoti.orderstatuschange(`Order Status changed to [${e.value}] for [${t.sendorderid}]`,t)}putinprocess(e){Object.assign(e,{ostatus:"INPROCESS"}),this.orderlist.updateList(e),this.ynoti.orderstatuschange(`Order Status changed to [${e.ostatus}] for [${e.sendorderid}]`,e)}completeorder(e){Object.assign(e,{ostatus:"COMPLETED"}),this.orderlist.updateList(e),this.ynoti.orderstatuschange(`Congratulation you Order Status changed to [${e.ostatus}] for [${e.sendorderid}]`,e)}getItemCount(e){return e.payload?e.payload.length:0}getTitle(e){return e.read?"Mark Unread":"Mark Read"}cancelOrder(e){this.takeAcion({value:"CANCELLED"},e)}getItems(e){console.log("segment",e),this.myinbox=this.getData(e.detail.value)}getData(e){return this.ygen.isAdmin()?this.getOrders(e):this.getMyOrders(e)}getOrders(e){let t=this.orderlist.getListRefer().snapshotChanges().pipe(Object(g.a)(e=>e.map(e=>Object.assign({$key:e.payload.key},e.payload.val()))),Object(g.a)(e=>e.reverse()));return e&&e.length>=2?t.pipe(Object(g.a)(t=>t.filter(t=>t.sendorderid.toUpperCase().indexOf(e.toUpperCase())>-1||t.orderByName&&t.orderByName.toUpperCase().indexOf(e.toUpperCase())>-1||t.orderByPhone&&t.orderByPhone.indexOf(e)>-1))):t}getMyOrders(e){let t=this.orderlist.getListRefer().snapshotChanges().pipe(Object(g.a)(t=>t.map(e=>Object.assign({$key:e.payload.key},e.payload.val())).filter(t=>t.ostatus==e&&t.orderedBy==this.ygen.getUid())),Object(g.a)(e=>e.reverse()));return e&&e.length>=2?t.pipe(Object(g.a)(t=>t.filter(t=>t.sendorderid.toUpperCase().indexOf(e.toUpperCase())>-1||t.orderByName&&t.orderByName.toUpperCase().indexOf(e.toUpperCase())>-1||t.orderByPhone&&t.orderByPhone.indexOf(e)>-1))):t}navigate(e,t){console.log()}}return e.\u0275fac=function(t){return new(t||e)(h.Qb(r.kb),h.Qb(c.j),h.Qb(u.a),h.Qb(a.a),h.Qb(s.a),h.Qb(d.a),h.Qb(l.a),h.Qb(b.a),h.Qb(f.a))},e.\u0275cmp=h.Kb({type:e,selectors:[["app-searchorder"]],decls:16,vars:12,consts:[[3,"color"],["slot","start"],["debounce","100",3,"placeholder","ionChange"],["mySearchbar",""],["padding",""],["loading",""],[4,"ngIf","ngIfElse"],["type","indeterminate","reversed","true"],[4,"ngFor","ngForOf"],["class","paySection",4,"ngIf"],["class","codSection",4,"ngIf"],["color","secondary",3,"click"],["name","eye"],["color","primary",3,"click"],[1,"contentorder"],[1,"labelt"],[1,"valuet"],[4,"ngIf","ngIfThen","ngIfElse"],["admin",""],["normaluser",""],[1,"paySection"],["text-uppercase","",1,"sc-ion-label-md-h","sc-ion-label-md-s","hydrated"],[1,"codSection"],[4,"ngIf"],["icon","delete","message","delete",3,"actionEvent",4,"ngIf"],[3,"currentvalue","orderstatus","actionEvent"],[2,"padding","5px"],[3,"mobile"],["icon","delete","message","delete",3,"actionEvent"],[3,"color","icon","askquestion","icontext","isiconwithtext","askquestiontext","actionEvent",4,"ngIf"],["style","padding:5px",4,"ngIf"],[3,"color","icon","askquestion","icontext","isiconwithtext","askquestiontext","actionEvent"]],template:function(e,t){if(1&e&&(h.Wb(0,"ion-header"),h.Wb(1,"ion-toolbar",0),h.Wb(2,"ion-buttons",1),h.Rb(3,"ion-back-button"),h.Vb(),h.Wb(4,"ion-title"),h.Mc(5),h.jc(6,"translate"),h.Vb(),h.Vb(),h.Wb(7,"ion-toolbar",0),h.Wb(8,"ion-searchbar",2,3),h.ec("ionChange",(function(e){return t.getItems(e)})),h.jc(10,"translate"),h.Vb(),h.Vb(),h.Vb(),h.Wb(11,"ion-content",4),h.Kc(12,v,1,0,"ng-template",null,5,h.Lc),h.Kc(14,N,2,1,"div",6),h.jc(15,"async"),h.Vb()),2&e){const e=h.zc(13);h.Db(1),h.rc("color","warning"),h.Db(4),h.Nc(h.kc(6,6,"Search Order")),h.Db(2),h.rc("color","warning"),h.Db(1),h.sc("placeholder",h.kc(10,8,"Search by OrderId or Name")),h.Db(6),h.rc("ngIf",h.kc(15,10,t.myinbox))("ngIfElse",e)}},directives:[r.y,r.fb,r.j,r.f,r.g,r.db,r.Q,r.sb,r.s,o.m,r.N,o.l,r.k,r.m,r.n,r.o,r.q,r.H,r.z,r.l,r.B,y.a,m.a,O.a,C.a],pipes:[V.c,o.b],styles:[".otitle[_ngcontent-%COMP%]{font-size:14px}.orderid[_ngcontent-%COMP%]{font-size:10px}.orderamt[_ngcontent-%COMP%]{font-size:18px}ion-card-header[_ngcontent-%COMP%]{padding-bottom:0}tbody[_ngcontent-%COMP%]{font-size:small}.labelt[_ngcontent-%COMP%]{font-weight:lighter}.valuet[_ngcontent-%COMP%]{padding-left:10px}ion-card-content[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.footerCartSection[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.paySection[_ngcontent-%COMP%]{background:#15bf15}.codSection[_ngcontent-%COMP%], .paySection[_ngcontent-%COMP%]{color:#fff;position:absolute;padding:6px 16px;border-radius:5px;font-weight:700;right:10px}.codSection[_ngcontent-%COMP%]{background:#de66cf}ion-card-title[_ngcontent-%COMP%]{padding-bottom:0;background:#f5fffa}"]}),e})();var j=n("hVaU"),L=n("IZvt"),_=n("4pxM");const K=[{path:"",component:$}];let A=(()=>{class e{}return e.\u0275mod=h.Ob({type:e}),e.\u0275inj=h.Nb({factory:function(t){return new(t||e)},imports:[[o.c,i.i,r.gb,j.a,L.a,_.a,c.n.forChild(K)]]}),e})()}}]);