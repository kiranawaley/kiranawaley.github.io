function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{aiMS:function(e,t,n){"use strict";n.r(t),n.d(t,"SearchorderPageModule",(function(){return T}));var o=n("ofXK"),i=n("3Pt+"),r=n("tyNb"),c=n("TEn/"),a=n("rIxz"),s=n("+DAS"),d=n("gAVi"),l=n("YKLQ"),b=n("dMTE"),u=n("ybIa"),p=n("lJxs"),f=n("i2Ty"),g=n("0nTO"),y=n("fXoL"),h=n("tuuX"),v=n("/per"),m=n("0pdN"),O=n("YCbS"),C=n("sYmb");function k(e,t){1&e&&y.Rb(0,"ion-progress-bar",7)}function V(e,t){1&e&&(y.Wb(0,"div",20),y.Wb(1,"ion-label",21),y.Lc(2,"PAID "),y.Vb(),y.Vb())}function W(e,t){1&e&&(y.Wb(0,"div",22),y.Wb(1,"ion-label",21),y.Lc(2,"COD "),y.Vb(),y.Vb())}function D(e,t){1&e&&y.Sb(0)}function I(e,t){if(1&e){var n=y.Xb();y.Wb(0,"app-appdelete",28),y.ec("actionEvent",(function(){y.Cc(n);var e=y.ic(3).$implicit;return y.ic(2).deleteNotice(e)})),y.Vb()}}function x(e,t){if(1&e){var n=y.Xb();y.Wb(0,"ion-item"),y.Jc(1,I,1,0,"app-appdelete",24),y.Wb(2,"app-apporderstatus",25),y.ec("actionEvent",(function(e){y.Cc(n);var t=y.ic(2).$implicit;return y.ic(2).takeAcion(e,t)})),y.Vb(),y.Wb(3,"div",26),y.Rb(4,"app-callphone",27),y.Vb(),y.Vb()}if(2&e){var o=y.ic(2).$implicit,i=y.ic(2);y.Db(1),y.rc("ngIf",!("COMPLETED"==o.ostatus||"CANCELLED"==o.ostatus)),y.Db(1),y.rc("currentvalue",o.ostatus)("orderstatus",i.ygen.orderstatus),y.Db(2),y.rc("mobile",o.orderByPhone)}}function P(e,t){if(1&e&&y.Jc(0,x,5,4,"ion-item",23),2&e){var n=y.ic(3);y.rc("ngIf",n.ygen.isAdmin())}}function L(e,t){if(1&e){var n=y.Xb();y.Wb(0,"app-appicon",31),y.ec("actionEvent",(function(){y.Cc(n);var e=y.ic(2).$implicit;return y.ic(2).cancelOrder(e)})),y.Vb()}2&e&&y.rc("color","accent")("icon","cancel_schedule_send")("askquestion",!0)("icontext","Cancel Order")("isiconwithtext",!0)("askquestiontext","Are you sure, you want to cancel Order?")}function S(e,t){if(1&e&&(y.Wb(0,"div",26),y.Lc(1,"Call Support "),y.Rb(2,"app-callphone",27),y.Vb()),2&e){var n=y.ic(4);y.Db(2),y.rc("mobile",n.ygen.getSettings().oncallsupport)}}function M(e,t){if(1&e&&(y.Wb(0,"ion-item"),y.Jc(1,L,1,6,"app-appicon",29),y.Jc(2,S,3,1,"div",30),y.Vb()),2&e){var n=y.ic().$implicit,o=y.ic(2);y.Db(1),y.rc("ngIf","NEW"==n.ostatus),y.Db(1),y.rc("ngIf",o.ygen.getSettings())}}function E(e,t){if(1&e){var n=y.Xb();y.Wb(0,"ion-card"),y.Jc(1,V,3,0,"div",9),y.Jc(2,W,3,0,"div",10),y.Wb(3,"ion-card-header"),y.Wb(4,"ion-card-subtitle"),y.Wb(5,"div"),y.Lc(6),y.Vb(),y.Wb(7,"div"),y.Lc(8),y.Vb(),y.Vb(),y.Wb(9,"ion-card-title"),y.Wb(10,"ion-chip",11),y.ec("click",(function(){y.Cc(n);var e=t.$implicit;return y.ic(2).ygen.routeto("/order",{orderid:e.$key})})),y.Wb(11,"ion-label"),y.Lc(12),y.Vb(),y.Rb(13,"ion-icon",12),y.Vb(),y.Wb(14,"ion-chip",13),y.ec("click",(function(){y.Cc(n);var e=t.$implicit;return y.ic(2).ygen.routeto("/order",{orderid:e.$key})})),y.Wb(15,"ion-label"),y.Lc(16),y.Vb(),y.Vb(),y.Vb(),y.Vb(),y.Wb(17,"ion-card-content"),y.Wb(18,"table",14),y.Wb(19,"tbody"),y.Wb(20,"tr"),y.Wb(21,"td",15),y.Lc(22," By "),y.Vb(),y.Wb(23,"td",16),y.Lc(24),y.Vb(),y.Vb(),y.Wb(25,"tr"),y.Wb(26,"td",15),y.Lc(27," Items "),y.Vb(),y.Wb(28,"td",16),y.Lc(29),y.Vb(),y.Vb(),y.Wb(30,"tr"),y.Wb(31,"td",15),y.Lc(32," Address "),y.Vb(),y.Wb(33,"td",16),y.Lc(34),y.Vb(),y.Vb(),y.Vb(),y.Vb(),y.Vb(),y.Jc(35,D,1,0,"ng-container",17),y.Jc(36,P,1,1,"ng-template",null,18,y.Kc),y.Jc(38,M,3,2,"ng-template",null,19,y.Kc),y.Vb()}if(2&e){var o=t.$implicit,i=y.zc(37),r=y.zc(39),c=y.ic(2);y.Db(1),y.rc("ngIf","PNO"==o.paymentmethod&&"Success"==(null==o.paymentResponse?null:o.paymentResponse.order_status)),y.Db(1),y.rc("ngIf","COD"==o.paymentmethod),y.Db(4),y.Nc("On ",c.ygen.formatTimestampToDate(o.odt),""),y.Db(2),y.Mc(c.ygen.sincewhen(o.odt)),y.Db(4),y.Mc(o.sendorderid),y.Db(4),y.Nc("Rs ",o.amount,""),y.Db(8),y.Nc(" ",o.orderByName," "),y.Db(5),y.Nc(" ",c.getItemCount(o)," "),y.Db(5),y.Nc(" ",o.deliveryAddress," "),y.Db(1),y.rc("ngIf",c.ygen.isAdmin())("ngIfThen",i)("ngIfElse",r)}}function _(e,t){if(1&e&&(y.Wb(0,"div"),y.Jc(1,E,40,12,"ion-card",8),y.Vb()),2&e){var n=t.ngIf;y.Db(1),y.rc("ngForOf",n)}}var w,N,j=((w=function(){function e(t,n,o,i,r,c,a,s,d){_classCallCheck(this,e),this.modalCtrl=t,this.router=n,this.yalert=o,this.ygen=i,this.ydataservice=r,this.ystorageservice=c,this.ypay=a,this.yds=s,this.ynoti=d,this.total=0,this.orderlist=new u.a("/shop/orders",this.ydataservice.getDatabase(),!0,null)}return _createClass(e,[{key:"ngOnInit",value:function(){console.log("yeah....ngoninit")}},{key:"ionViewWillEnter",value:function(){console.log("yeah....ion enter"),this.myinbox=this.getData("")}},{key:"deleteNotice",value:function(e){this.orderlist.removefromList(e)}},{key:"takeAcion",value:function(e,t){Object.assign(t,{ostatus:e.value}),this.orderlist.updateList(t),this.yalert.openSnackBar("Order Status changed for [".concat(t.sendorderid,"]"),"Ok"),this.ynoti.orderstatuschange("Order Status changed to [".concat(e.value,"] for [").concat(t.sendorderid,"]"),t)}},{key:"putinprocess",value:function(e){Object.assign(e,{ostatus:"INPROCESS"}),this.orderlist.updateList(e),this.ynoti.orderstatuschange("Order Status changed to [".concat(e.ostatus,"] for [").concat(e.sendorderid,"]"),e)}},{key:"completeorder",value:function(e){Object.assign(e,{ostatus:"COMPLETED"}),this.orderlist.updateList(e),this.ynoti.orderstatuschange("Congratulation you Order Status changed to [".concat(e.ostatus,"] for [").concat(e.sendorderid,"]"),e)}},{key:"getItemCount",value:function(e){return e.payload?e.payload.length:0}},{key:"getTitle",value:function(e){return e.read?"Mark Unread":"Mark Read"}},{key:"cancelOrder",value:function(e){this.takeAcion({value:"CANCELLED"},e)}},{key:"getItems",value:function(e){console.log("segment",e),this.myinbox=this.getData(e.detail.value)}},{key:"getData",value:function(e){return this.ygen.isAdmin()?this.getOrders(e):this.getMyOrders(e)}},{key:"getOrders",value:function(e){var t=this.orderlist.getListRefer().snapshotChanges().pipe(Object(p.a)((function(e){return e.map((function(e){return Object.assign({$key:e.payload.key},e.payload.val())}))})),Object(p.a)((function(e){return e.reverse()})));return e&&e.length>=2?t.pipe(Object(p.a)((function(t){return t.filter((function(t){return t.sendorderid.toUpperCase().indexOf(e.toUpperCase())>-1||t.orderByName&&t.orderByName.toUpperCase().indexOf(e.toUpperCase())>-1||t.orderByPhone&&t.orderByPhone.indexOf(e)>-1}))}))):t}},{key:"getMyOrders",value:function(e){var t=this,n=this.orderlist.getListRefer().snapshotChanges().pipe(Object(p.a)((function(n){return n.map((function(e){return Object.assign({$key:e.payload.key},e.payload.val())})).filter((function(n){return n.ostatus==e&&n.orderedBy==t.ygen.getUid()}))})),Object(p.a)((function(e){return e.reverse()})));return e&&e.length>=2?n.pipe(Object(p.a)((function(t){return t.filter((function(t){return t.sendorderid.toUpperCase().indexOf(e.toUpperCase())>-1||t.orderByName&&t.orderByName.toUpperCase().indexOf(e.toUpperCase())>-1||t.orderByPhone&&t.orderByPhone.indexOf(e)>-1}))}))):n}},{key:"navigate",value:function(e,t){console.log()}}]),e}()).\u0275fac=function(e){return new(e||w)(y.Qb(c.kb),y.Qb(r.g),y.Qb(f.a),y.Qb(a.a),y.Qb(s.a),y.Qb(d.a),y.Qb(b.a),y.Qb(l.a),y.Qb(g.a))},w.\u0275cmp=y.Kb({type:w,selectors:[["app-searchorder"]],decls:16,vars:12,consts:[[3,"color"],["slot","start"],["debounce","100",3,"placeholder","ionChange"],["mySearchbar",""],["padding",""],["loading",""],[4,"ngIf","ngIfElse"],["type","indeterminate","reversed","true"],[4,"ngFor","ngForOf"],["class","paySection",4,"ngIf"],["class","codSection",4,"ngIf"],["color","secondary",3,"click"],["name","eye"],["color","primary",3,"click"],[1,"contentorder"],[1,"labelt"],[1,"valuet"],[4,"ngIf","ngIfThen","ngIfElse"],["admin",""],["normaluser",""],[1,"paySection"],["text-uppercase","",1,"sc-ion-label-md-h","sc-ion-label-md-s","hydrated"],[1,"codSection"],[4,"ngIf"],["icon","delete","message","delete",3,"actionEvent",4,"ngIf"],[3,"currentvalue","orderstatus","actionEvent"],[2,"padding","5px"],[3,"mobile"],["icon","delete","message","delete",3,"actionEvent"],[3,"color","icon","askquestion","icontext","isiconwithtext","askquestiontext","actionEvent",4,"ngIf"],["style","padding:5px",4,"ngIf"],[3,"color","icon","askquestion","icontext","isiconwithtext","askquestiontext","actionEvent"]],template:function(e,t){if(1&e&&(y.Wb(0,"ion-header"),y.Wb(1,"ion-toolbar",0),y.Wb(2,"ion-buttons",1),y.Rb(3,"ion-back-button"),y.Vb(),y.Wb(4,"ion-title"),y.Lc(5),y.jc(6,"translate"),y.Vb(),y.Vb(),y.Wb(7,"ion-toolbar",0),y.Wb(8,"ion-searchbar",2,3),y.ec("ionChange",(function(e){return t.getItems(e)})),y.jc(10,"translate"),y.Vb(),y.Vb(),y.Vb(),y.Wb(11,"ion-content",4),y.Jc(12,k,1,0,"ng-template",null,5,y.Kc),y.Jc(14,_,2,1,"div",6),y.jc(15,"async"),y.Vb()),2&e){var n=y.zc(13);y.Db(1),y.rc("color","warning"),y.Db(4),y.Mc(y.kc(6,6,"Search Order")),y.Db(2),y.rc("color","warning"),y.Db(1),y.sc("placeholder",y.kc(10,8,"Search by OrderId or Name")),y.Db(6),y.rc("ngIf",y.kc(15,10,t.myinbox))("ngIfElse",n)}},directives:[c.y,c.fb,c.j,c.f,c.g,c.db,c.Q,c.rb,c.s,o.m,c.N,o.l,c.k,c.m,c.n,c.o,c.q,c.H,c.z,c.l,c.B,h.a,v.a,m.a,O.a],pipes:[C.c,o.b],styles:[".otitle[_ngcontent-%COMP%]{font-size:14px}.orderid[_ngcontent-%COMP%]{font-size:10px}.orderamt[_ngcontent-%COMP%]{font-size:18px}ion-card-header[_ngcontent-%COMP%]{padding-bottom:0}tbody[_ngcontent-%COMP%]{font-size:small}.labelt[_ngcontent-%COMP%]{font-weight:lighter}.valuet[_ngcontent-%COMP%]{padding-left:10px}ion-card-content[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.footerCartSection[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.paySection[_ngcontent-%COMP%]{background:#15bf15}.codSection[_ngcontent-%COMP%], .paySection[_ngcontent-%COMP%]{color:#fff;position:absolute;padding:6px 16px;border-radius:5px;font-weight:700;right:10px}.codSection[_ngcontent-%COMP%]{background:#de66cf}ion-card-title[_ngcontent-%COMP%]{padding-bottom:0;background:#f5fffa}"]}),w),J=n("hVaU"),A=n("IZvt"),B=n("4pxM"),R=[{path:"",component:j}],T=((N=function e(){_classCallCheck(this,e)}).\u0275mod=y.Ob({type:N}),N.\u0275inj=y.Nb({factory:function(e){return new(e||N)},imports:[[o.c,i.i,c.gb,J.a,A.a,B.a,r.k.forChild(R)]]}),N)}}]);