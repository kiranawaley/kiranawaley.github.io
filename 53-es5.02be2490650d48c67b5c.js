function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{dhUD:function(e,t,n){"use strict";n.r(t),n.d(t,"OrdermanagementPageModule",(function(){return B}));var o=n("ofXK"),a=n("3Pt+"),r=n("tyNb"),i=n("TEn/"),c=n("mrSG"),s=n("rIxz"),l=n("+DAS"),b=n("gAVi"),d=n("YKLQ"),u=n("dMTE"),g=n("ybIa"),f=n("lJxs"),p=n("i2Ty"),y=n("0nTO"),h=n("TIpf"),m=n("cBbZ"),v=n("G2i7"),k=n("fXoL"),O=n("YCbS"),C=n("tuuX"),W=n("/per"),V=n("0pdN"),M=n("sYmb");function D(e,t){if(1&e){var n=k.Xb();k.Wb(0,"app-appicon",22),k.ec("actionEvent",(function(e){return k.Cc(n),k.ic().deleteOrders(e)})),k.Vb()}2&e&&k.rc("icon","delete")("askquestion",!0)("icontext","Remove All")("isiconwithtext",!0)}function w(e,t){if(1&e){var n=k.Xb();k.Wb(0,"ion-button",23),k.ec("click",(function(){return k.Cc(n),k.ic().downloadOrders()})),k.Rb(1,"ion-icon",24),k.Vb()}}function x(e,t){if(1&e){var n=k.Xb();k.Wb(0,"ion-toolbar",0),k.Wb(1,"ion-searchbar",25),k.ec("ngModelChange",(function(e){return k.Cc(n),k.ic().queryText=e})),k.jc(2,"translate"),k.Vb(),k.Vb()}if(2&e){var o=k.ic();k.rc("color","secondary"),k.Db(1),k.sc("placeholder",k.kc(2,3,"Search Order")),k.rc("ngModel",o.queryText)}}function E(e,t){1&e&&k.Rb(0,"ion-progress-bar",26)}function P(e,t){1&e&&(k.Wb(0,"div",40),k.Wb(1,"ion-label",41),k.Mc(2,"PAID "),k.Vb(),k.Vb())}function S(e,t){1&e&&(k.Wb(0,"div",42),k.Wb(1,"ion-label",41),k.Mc(2,"COD "),k.Vb(),k.Vb())}function j(e,t){if(1&e){var n=k.Xb();k.Wb(0,"app-appdelete",43),k.ec("actionEvent",(function(){k.Cc(n);var e=k.ic().$implicit;return k.ic(2).deleteNotice(e)})),k.Vb()}}function I(e,t){if(1&e){var n=k.Xb();k.Wb(0,"ion-card"),k.Kc(1,P,3,0,"div",28),k.Kc(2,S,3,0,"div",29),k.Wb(3,"ion-card-header"),k.Wb(4,"ion-card-subtitle"),k.Wb(5,"div"),k.Mc(6),k.Vb(),k.Wb(7,"div"),k.Mc(8),k.Vb(),k.Vb(),k.Wb(9,"ion-card-title"),k.Wb(10,"ion-chip",30),k.ec("click",(function(){k.Cc(n);var e=t.$implicit;return k.ic(2).ygen.routeto("/order",{orderid:e.$key})})),k.Wb(11,"ion-label"),k.Mc(12),k.Vb(),k.Rb(13,"ion-icon",31),k.Vb(),k.Wb(14,"ion-chip",32),k.ec("click",(function(){k.Cc(n);var e=t.$implicit;return k.ic(2).ygen.routeto("/order",{orderid:e.$key})})),k.Wb(15,"ion-label"),k.Mc(16),k.Vb(),k.Vb(),k.Vb(),k.Vb(),k.Wb(17,"ion-card-content"),k.Wb(18,"table",33),k.Wb(19,"tbody"),k.Wb(20,"tr"),k.Wb(21,"td",34),k.Mc(22),k.jc(23,"translate"),k.Vb(),k.Wb(24,"td",35),k.Mc(25),k.Vb(),k.Vb(),k.Wb(26,"tr"),k.Wb(27,"td",34),k.Mc(28),k.jc(29,"translate"),k.Vb(),k.Wb(30,"td",35),k.Mc(31),k.Vb(),k.Vb(),k.Wb(32,"tr"),k.Wb(33,"td",34),k.Mc(34),k.jc(35,"translate"),k.Vb(),k.Wb(36,"td",35),k.Mc(37),k.Vb(),k.Vb(),k.Vb(),k.Vb(),k.Vb(),k.Wb(38,"ion-item"),k.Kc(39,j,1,0,"app-appdelete",36),k.Wb(40,"app-apporderstatus",37),k.ec("actionEvent",(function(e){k.Cc(n);var o=t.$implicit;return k.ic(2).takeAcion(e,o)})),k.Vb(),k.Wb(41,"div",38),k.Rb(42,"app-callphone",39),k.Vb(),k.Vb(),k.Vb()}if(2&e){var o=t.$implicit,a=k.ic(2);k.Db(1),k.rc("ngIf","PNO"==o.paymentmethod&&"Success"==(null==o.paymentResponse?null:o.paymentResponse.order_status)),k.Db(1),k.rc("ngIf","COD"==o.paymentmethod),k.Db(4),k.Oc("On ",a.ygen.formatTimestampToDate(o.odt),""),k.Db(2),k.Nc(a.ygen.sincewhen(o.odt)),k.Db(4),k.Nc(o.sendorderid),k.Db(4),k.Pc("",a.ygen.getcurrencysymbol()," ",o.amount,""),k.Db(6),k.Oc(" ",k.kc(23,17,"By")," "),k.Db(3),k.Oc(" ",o.orderByName," "),k.Db(3),k.Oc(" ",k.kc(29,19,"Items")," "),k.Db(3),k.Oc(" ",a.getItemCount(o)," "),k.Db(3),k.Oc(" ",k.kc(35,21,"Address")," "),k.Db(3),k.Oc(" ",o.deliveryAddress," "),k.Db(2),k.rc("ngIf",!("COMPLETED"==o.ostatus||"CANCELLED"==o.ostatus)),k.Db(1),k.rc("currentvalue",o.ostatus)("orderstatus",a.ygen.orderstatus),k.Db(2),k.rc("mobile",o.orderByPhone)}}function R(e,t){if(1&e&&(k.Wb(0,"div"),k.Kc(1,I,43,23,"ion-card",27),k.Mc(2),k.Vb()),2&e){var n=t.ngIf,o=k.ic();k.Db(1),k.rc("ngForOf",n),k.Db(1),k.Oc(" ",o.getTotal(n)," ")}}function N(e,t){if(1&e){var n=k.Xb();k.Wb(0,"ion-fab",44,45),k.Wb(2,"ion-fab-button"),k.Rb(3,"ion-icon",46),k.Vb(),k.Wb(4,"ion-fab-list",47),k.Wb(5,"ion-fab-button",48),k.ec("click",(function(){return k.Cc(n),k.ic().openSocial("Vimeo")})),k.Rb(6,"ion-icon",49),k.Vb(),k.Wb(7,"ion-fab-button",50),k.ec("click",(function(){return k.Cc(n),k.ic().openSocial("Instagram")})),k.Rb(8,"ion-icon",51),k.Vb(),k.Wb(9,"ion-fab-button",52),k.ec("click",(function(){return k.Cc(n),k.ic().openSocial("Twitter")})),k.Rb(10,"ion-icon",53),k.Vb(),k.Wb(11,"ion-fab-button",54),k.ec("click",(function(){return k.Cc(n),k.ic().openSocial("Facebook")})),k.Rb(12,"ion-icon",55),k.Vb(),k.Vb(),k.Vb()}}var _,T,L=((_=function(){function e(t,n,o,a,r,i,c,s,l,b,d,u,f){var p=this;_classCallCheck(this,e),this.modalCtrl=t,this.centerdb=n,this.loadingCtrl=o,this.router=a,this.yalert=r,this.ygen=i,this.ydataservice=c,this.ystorageservice=s,this.ypay=l,this.yds=b,this.ynoti=d,this.excelservice=u,this.events=f,this.queryText="",this.segment="NEW",this.segmenttotal=new Map,this.total=0,this.centerdb.currenttenant.subscribe((function(e){e&&(p.orderlist=new g.a(v.a.getpath()+"/shop/orders",p.ydataservice.getDatabase(),!0,null),p.setSegmentTotal(),p.myinbox=p.getData(p.segment))}))}return _createClass(e,[{key:"ngOnInit",value:function(){console.log("yeah....ngoninit")}},{key:"ionViewWillEnter",value:function(){console.log("yeah....ion enter")}},{key:"deleteNotice",value:function(e){this.orderlist.removefromList(e)}},{key:"deleteOrders",value:function(e){this.orderlist.getListRefer().remove()}},{key:"takeAcion",value:function(e,t){Object.assign(t,{ostatus:e.value}),this.orderlist.updateList(t),this.yalert.openSnackBar("Order Status changed for [".concat(t.sendorderid,"]"),"Ok"),this.ynoti.orderstatuschange("Order Status changed to [".concat(e.value,"] for [").concat(t.sendorderid,"]"),t)}},{key:"putinprocess",value:function(e){Object.assign(e,{ostatus:"INPROCESS"}),this.orderlist.updateList(e),this.ynoti.orderstatuschange("Order Status changed to [".concat(e.ostatus,"] for [").concat(e.sendorderid,"]"),e),this.events.publish("shop:alertsubscription",{})}},{key:"completeorder",value:function(e){Object.assign(e,{ostatus:"COMPLETED"}),this.orderlist.updateList(e),this.ynoti.orderstatuschange("Congratulation you Order Status changed to [".concat(e.ostatus,"] for [").concat(e.sendorderid,"]"),e)}},{key:"getItemCount",value:function(e){return e.payload?e.payload.length:0}},{key:"getTitle",value:function(e){return e.read?"Mark Unread":"Mark Read"}},{key:"segmentChanged",value:function(e){console.log("segment",e),this.myinbox=this.getData(e.detail.value)}},{key:"getData",value:function(e){return this.ygen.isAdmin()?this.getOrders(e):this.getMyOrders(e)}},{key:"getOrders",value:function(e){return"NEW"===e?this.orderlist.getListRefer().snapshotChanges().pipe(Object(f.a)((function(t){return t.map((function(e){return Object.assign({$key:e.payload.key},e.payload.val())})).filter((function(t){return t.ostatus==e||!t.ostatus}))})),Object(f.a)((function(e){return e.reverse()}))):this.orderlist.getListRefer().snapshotChanges().pipe(Object(f.a)((function(t){return t.map((function(e){return Object.assign({$key:e.payload.key},e.payload.val())})).filter((function(t){return t.ostatus==e}))})),Object(f.a)((function(e){return e.reverse()})))}},{key:"getMyOrders",value:function(e){var t=this;return"NEW"===e?this.orderlist.getListRefer().snapshotChanges().pipe(Object(f.a)((function(n){return n.map((function(e){return Object.assign({$key:e.payload.key},e.payload.val())})).filter((function(n){return(n.ostatus==e||!n.ostatus)&&n.orderedBy==t.ygen.getUid()}))})),Object(f.a)((function(e){return e.reverse()}))):this.orderlist.getListRefer().snapshotChanges().pipe(Object(f.a)((function(n){return n.map((function(e){return Object.assign({$key:e.payload.key},e.payload.val())})).filter((function(n){return n.ostatus==e&&n.orderedBy==t.ygen.getUid()}))})),Object(f.a)((function(e){return e.reverse()})))}},{key:"getTotal",value:function(e){var t=this;this.total=0,e.forEach((function(e){t.total=t.total+e.amount}))}},{key:"setSegmentTotal",value:function(){var e=this;this.orderlist.getListRefer().snapshotChanges().pipe(Object(f.a)((function(e){return e.map((function(e){return Object.assign({$key:e.payload.key},e.payload.val())}))}))).subscribe((function(t){e.ygen.orderstatus.forEach((function(n){e.segmenttotal.set(n.value,t.filter((function(e){return e.ostatus==n.value})).length)}))}))}},{key:"navigate",value:function(e,t){console.log()}},{key:"downloadOrders",value:function(){var e=this,t=this.orderlist.getListRefer().snapshotChanges().pipe(Object(f.a)((function(e){return e.map((function(e){return Object.assign({$key:e.payload.key},e.payload.val())}))}))).subscribe((function(n){console.log("list",n);var o=[];n.forEach((function(t){var n={orderid:t.sendorderid,amount:t.amount,paymentmethod:t.paymentmethod,deliveryAddress:t.deliveryAddress,name:t.orderByName,phone:t.orderByPhone,orderstatus:t.ostatus,dateoforder:e.ygen.formatTimestampToDate(t.odt),orderitems:e.getpayload(t.payload),paymentstatus:e.paymentdone(t),payment_id:e.paymentid(t)};o.push(n)})),0==o.length?e.yalert.openSnackBar("No orders for downlowd","Ok"):(e.excelservice.exportAsExcelFile(o,"orders"),e.yalert.openSnackBar("Orders will be downloaded...","Ok")),t.unsubscribe()}))}},{key:"getpayload",value:function(e){var t="";return e.forEach((function(e){t=t+e.title+"| "+e.description+"| Rs="+e.price+"| Total Items=["+e.orderqty+"] ||"})),t}},{key:"paymentdone",value:function(e){var t="NOT PAID";return e.paymentResponse&&"Success"==e.paymentResponse.order_status&&(t="PAID"),t}},{key:"paymentid",value:function(e){var t="";return e.paymentResponse&&(t=e.paymentResponse.payment_id),t}},{key:"openSocial",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadingCtrl.create({message:"Posting to ".concat(e),duration:1e3*Math.random()+500});case 2:return n=t.sent,t.next=5,n.present();case 5:return t.next=7,n.onWillDismiss();case 7:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||_)(k.Qb(i.kb),k.Qb(v.a),k.Qb(i.ib),k.Qb(r.j),k.Qb(p.a),k.Qb(s.a),k.Qb(l.a),k.Qb(b.a),k.Qb(u.a),k.Qb(d.a),k.Qb(y.a),k.Qb(h.a),k.Qb(m.a))},_.\u0275cmp=k.Kb({type:_,selectors:[["app-ordermanagement"]],decls:52,vars:34,consts:[[3,"color"],["slot","start"],["slot","end","color","secondary"],[3,"icon","askquestion","icontext","isiconwithtext","actionEvent",4,"ngIf"],["class","download","color","danger",3,"click",4,"ngIf"],[3,"click"],["slot","icon-only","name","search"],[3,"ngModel","ngModelChange","ionChange"],["value","NEW"],["color","danger"],["value","INPROCESS"],["color","dark"],["value","COMPLETED"],["color","success"],["value","CANCELLED"],["color","tertiary"],[3,"color",4,"ngIf"],["padding",""],["loading",""],[4,"ngIf","ngIfElse"],["slot","fixed","vertical","bottom","horizontal","end",4,"ngIf"],[1,"footerCartSection"],[3,"icon","askquestion","icontext","isiconwithtext","actionEvent"],["color","danger",1,"download",3,"click"],["slot","icon-only","name","code-download"],[3,"ngModel","placeholder","ngModelChange"],["type","indeterminate","reversed","true"],[4,"ngFor","ngForOf"],["class","paySection",4,"ngIf"],["class","codSection",4,"ngIf"],["color","secondary",3,"click"],["name","eye"],["color","primary",3,"click"],[1,"contentorder"],[1,"labelt"],[1,"valuet"],["icon","delete","message","delete",3,"actionEvent",4,"ngIf"],[3,"currentvalue","orderstatus","actionEvent"],[2,"padding","5px"],[3,"mobile"],[1,"paySection"],["text-uppercase","",1,"sc-ion-label-md-h","sc-ion-label-md-s","hydrated"],[1,"codSection"],["icon","delete","message","delete",3,"actionEvent"],["slot","fixed","vertical","bottom","horizontal","end"],["fab",""],["name","glasses-outline"],["side","top"],["color","success",3,"click"],["name","logo-whatsapp"],["color","instagram",3,"click"],["name","bar-chart-outline"],["color","twitter",3,"click"],["name","calendar-outline"],["color","facebook",3,"click"],["name","today-outline"]],template:function(e,t){if(1&e&&(k.Wb(0,"ion-header"),k.Wb(1,"ion-toolbar",0),k.Wb(2,"ion-buttons",1),k.Rb(3,"ion-back-button"),k.Vb(),k.Wb(4,"ion-title"),k.Mc(5),k.jc(6,"translate"),k.Vb(),k.Wb(7,"ion-buttons",2),k.Kc(8,D,1,4,"app-appicon",3),k.Kc(9,w,2,0,"ion-button",4),k.Wb(10,"ion-button",5),k.ec("click",(function(){return t.ygen.routeto("searchorder",{})})),k.Rb(11,"ion-icon",6),k.Vb(),k.Vb(),k.Vb(),k.Vb(),k.Wb(12,"ion-header"),k.Wb(13,"ion-toolbar",0),k.Wb(14,"ion-segment",7),k.ec("ngModelChange",(function(e){return t.segment=e}))("ionChange",(function(e){return t.segmentChanged(e)})),k.Wb(15,"ion-segment-button",8),k.Mc(16),k.jc(17,"translate"),k.Wb(18,"ion-badge",9),k.Mc(19),k.Vb(),k.Vb(),k.Wb(20,"ion-segment-button",10),k.Mc(21),k.jc(22,"translate"),k.Wb(23,"ion-badge",11),k.Mc(24),k.Vb(),k.Vb(),k.Wb(25,"ion-segment-button",12),k.Mc(26),k.jc(27,"translate"),k.Wb(28,"ion-badge",13),k.Mc(29),k.Vb(),k.Vb(),k.Wb(30,"ion-segment-button",14),k.Mc(31),k.jc(32,"translate"),k.Wb(33,"ion-badge",15),k.Mc(34),k.Vb(),k.Vb(),k.Vb(),k.Vb(),k.Kc(35,x,3,5,"ion-toolbar",16),k.Vb(),k.Wb(36,"ion-content",17),k.Kc(37,E,1,0,"ng-template",null,18,k.Lc),k.Kc(39,R,3,2,"div",19),k.jc(40,"async"),k.Kc(41,N,13,0,"ion-fab",20),k.Vb(),k.Wb(42,"ion-footer"),k.Wb(43,"ion-toolbar"),k.Wb(44,"div",21),k.Wb(45,"ion-text"),k.Wb(46,"h3"),k.Mc(47),k.jc(48,"translate"),k.Vb(),k.Vb(),k.Wb(49,"ion-text"),k.Wb(50,"h3"),k.Mc(51),k.Vb(),k.Vb(),k.Vb(),k.Vb(),k.Vb()),2&e){var n=k.zc(38);k.Db(1),k.rc("color","warning"),k.Db(4),k.Nc(k.kc(6,20,"Order Management")),k.Db(3),k.rc("ngIf",t.ygen.isAdmin()),k.Db(1),k.rc("ngIf",t.ygen.isAdmin()),k.Db(4),k.rc("color","warning"),k.Db(1),k.rc("ngModel",t.segment),k.Db(2),k.Oc(" ",k.kc(17,22,"New"),""),k.Db(3),k.Nc(t.segmenttotal.get("NEW")),k.Db(2),k.Oc(" ",k.kc(22,24,"InProcess"),""),k.Db(3),k.Nc(t.segmenttotal.get("INPROCESS")),k.Db(2),k.Oc(" ",k.kc(27,26,"Completed"),""),k.Db(3),k.Nc(t.segmenttotal.get("COMPLETED")),k.Db(2),k.Oc(" ",k.kc(32,28,"Cancelled"),""),k.Db(3),k.Nc(t.segmenttotal.get("CANCELLED")),k.Db(1),k.rc("ngIf",0),k.Db(4),k.rc("ngIf",k.kc(40,30,t.myinbox))("ngIfElse",n),k.Db(2),k.rc("ngIf",!1),k.Db(6),k.Nc(k.kc(48,32,"Total")),k.Db(4),k.Oc(" \u20b9 ",t.total," ")}},directives:[i.y,i.fb,i.j,i.f,i.g,i.db,o.m,i.i,i.z,i.R,i.rb,a.o,a.r,i.S,i.h,i.s,i.w,i.ab,O.a,i.Q,i.sb,i.N,o.l,i.k,i.m,i.n,i.o,i.q,i.H,i.l,i.B,C.a,W.a,V.a,i.t,i.u,i.v],pipes:[M.c,o.b],styles:[".otitle[_ngcontent-%COMP%]{font-size:14px}.orderid[_ngcontent-%COMP%]{font-size:10px}.orderamt[_ngcontent-%COMP%]{font-size:18px}ion-card-header[_ngcontent-%COMP%]{padding-bottom:0}tbody[_ngcontent-%COMP%]{font-size:small}.labelt[_ngcontent-%COMP%]{font-weight:lighter}.valuet[_ngcontent-%COMP%]{padding-left:10px}ion-card-content[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.footerCartSection[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-right:10px;margin-left:10px}.paySection[_ngcontent-%COMP%]{background:#15bf15}.codSection[_ngcontent-%COMP%], .paySection[_ngcontent-%COMP%]{color:#fff;position:absolute;padding:6px 16px;border-radius:5px;font-weight:700;right:10px}.codSection[_ngcontent-%COMP%]{background:#de66cf}ion-card-title[_ngcontent-%COMP%]{padding-bottom:0;background:#f5fffa}.download[_ngcontent-%COMP%]{font-size:30px;font-weight:700}ion-fab-button[_ngcontent-%COMP%]{--background:var(--ion-color-step-150,#fff);--background-hover:var(--ion-color-step-200,#f2f2f2);--background-focused:var(--ion-color-step-250,#d9d9d9);--color:var(--ion-color-primary,#3880ff)}.ios[_ngcontent-%COMP%]   ion-fab-button[_ngcontent-%COMP%]{--background-activated:var(--ion-color-step-250,#d9d9d9)}"]}),_),A=n("hVaU"),Q=n("IZvt"),K=n("4pxM"),$=[{path:"",component:L}],B=((T=function e(){_classCallCheck(this,e)}).\u0275mod=k.Ob({type:T}),T.\u0275inj=k.Nb({factory:function(e){return new(e||T)},imports:[[o.c,a.i,i.gb,A.a,Q.a,K.a,r.n.forChild($)]]}),T)}}]);