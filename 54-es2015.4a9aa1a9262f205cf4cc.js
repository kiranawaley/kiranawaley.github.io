(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{aiMS:function(e,t,a){"use strict";a.r(t),a.d(t,"SearchorderPageModule",(function(){return re}));var n=a("ofXK"),o=a("3Pt+"),r=a("tyNb"),i=a("TEn/"),c=a("rIxz"),s=a("+DAS"),l=a("gAVi"),d=a("YKLQ"),b=a("2Vo4"),f=a("dMTE"),u=a("ybIa"),g=a("lJxs"),h=a("i2Ty"),p=a("0nTO"),m=a("G2i7"),y=a("wd/R"),D=a("fXoL"),v=a("kmnG"),C=a("d3UM"),O=a("FKr1"),M=a("A5z7"),V=a("iadO"),W=a("bTqV"),k=a("NFeN"),w=a("tuuX"),x=a("/per"),S=a("0pdN"),I=a("YCbS"),Y=a("sYmb");const B=["cme"],P=["calendar"];function A(e,t){if(1&e&&(D.Wb(0,"small"),D.Mc(1),D.Vb()),2&e){const e=D.ic(2);D.Db(1),D.Nc(e.dateControl.value.value.sdb)}}function E(e,t){if(1&e&&(D.Wb(0,"small"),D.Wb(1,"p",15),D.Mc(2),D.Wb(3,"b"),D.Mc(4,"to"),D.Vb(),D.Mc(5),D.Vb(),D.Vb()),2&e){const e=D.ic(2);D.Db(2),D.Oc("",e.dateControl.value.value.sda," "),D.Db(3),D.Oc(" ",e.dateControl.value.value.sdb," ")}}function N(e,t){if(1&e&&(D.Wb(0,"span",13),D.Wb(1,"div"),D.Wb(2,"b"),D.Mc(3),D.Vb(),D.Rb(4,"br"),D.Kc(5,A,2,1,"small",12),D.Kc(6,E,6,2,"ng-template",null,14,D.Lc),D.Vb(),D.Vb()),2&e){const e=D.zc(7),t=D.ic();D.Db(3),D.Nc(null==t.dateControl.value?null:t.dateControl.value.name),D.Db(2),D.rc("ngIf","Today"==(null==t.dateControl.value?null:t.dateControl.value.name)||"Yesterday"==(null==t.dateControl.value?null:t.dateControl.value.name))("ngIfElse",e)}}function K(e,t){if(1&e&&(D.Wb(0,"mat-option",16),D.Mc(1),D.Vb()),2&e){const e=t.$implicit;D.rc("value",e),D.Db(1),D.Oc(" ",e.name," ")}}function j(e,t){if(1&e){const e=D.Xb();D.Wb(0,"div",17),D.Wb(1,"span",18),D.Mc(2),D.jc(3,"translate"),D.Vb(),D.Wb(4,"mat-chip-list",19),D.Wb(5,"mat-chip",20),D.ec("click",(function(){return D.Cc(e),D.ic().defaultdata()})),D.Mc(6,"Clear Search"),D.Vb(),D.Vb(),D.Vb()}2&e&&(D.Db(2),D.Nc(D.kc(3,1,"No Order found")))}function _(e,t){if(1&e){const e=D.Xb();D.Wb(0,"div",22),D.Wb(1,"mat-calendar",23,24),D.ec("selectedChange",(function(t){D.Cc(e);const a=D.zc(2);return D.ic(2).toggleStartDateDate(t,a)})),D.Vb(),D.Wb(3,"div"),D.Wb(4,"button",25),D.ec("click",(function(){return D.Cc(e),D.ic(2).searchOrders()})),D.Wb(5,"mat-icon"),D.Mc(6,"search"),D.Vb(),D.Vb(),D.Vb(),D.Vb()}if(2&e){const e=D.ic(2);D.Db(1),D.rc("dateClass",e.isStartDateSelected())}}function L(e,t){if(1&e&&(D.Wb(0,"div"),D.Kc(1,_,7,1,"div",21),D.Vb()),2&e){const e=t.ngIf;D.Db(1),D.rc("ngIf",e.flag)}}function $(e,t){1&e&&D.Rb(0,"ion-progress-bar",26)}function T(e,t){1&e&&(D.Wb(0,"div",39),D.Wb(1,"ion-label",40),D.Mc(2,"PAID "),D.Vb(),D.Vb())}function R(e,t){1&e&&(D.Wb(0,"div",41),D.Wb(1,"ion-label",40),D.Mc(2,"COD "),D.Vb(),D.Vb())}function z(e,t){1&e&&D.Sb(0)}function Q(e,t){if(1&e){const e=D.Xb();D.Wb(0,"app-appdelete",46),D.ec("actionEvent",(function(){D.Cc(e);const t=D.ic(3).$implicit;return D.ic(3).deleteNotice(t)})),D.Vb()}}function U(e,t){if(1&e){const e=D.Xb();D.Wb(0,"ion-item"),D.Kc(1,Q,1,0,"app-appdelete",42),D.Wb(2,"app-apporderstatus",43),D.ec("actionEvent",(function(t){D.Cc(e);const a=D.ic(2).$implicit;return D.ic(3).takeAcion(t,a)})),D.Vb(),D.Wb(3,"div",44),D.Rb(4,"app-callphone",45),D.Vb(),D.Vb()}if(2&e){const e=D.ic(2).$implicit,t=D.ic(3);D.Db(1),D.rc("ngIf",!("COMPLETED"==e.ostatus||"CANCELLED"==e.ostatus)),D.Db(1),D.rc("currentvalue",e.ostatus)("orderstatus",t.ygen.orderstatus),D.Db(2),D.rc("mobile",e.orderByPhone)}}function q(e,t){if(1&e&&D.Kc(0,U,5,4,"ion-item",10),2&e){const e=D.ic(4);D.rc("ngIf",e.ygen.isAdmin())}}function F(e,t){if(1&e){const e=D.Xb();D.Wb(0,"app-appicon",49),D.ec("actionEvent",(function(){D.Cc(e);const t=D.ic(2).$implicit;return D.ic(3).cancelOrder(t)})),D.Vb()}2&e&&D.rc("color","accent")("icon","cancel_schedule_send")("askquestion",!0)("icontext","Cancel Order")("isiconwithtext",!0)("askquestiontext","Are you sure, you want to cancel Order?")}function X(e,t){if(1&e&&(D.Wb(0,"div",44),D.Mc(1,"Call Support "),D.Rb(2,"app-callphone",45),D.Vb()),2&e){const e=D.ic(5);D.Db(2),D.rc("mobile",e.ygen.getSettings().oncallsupport)}}function J(e,t){if(1&e&&(D.Wb(0,"ion-item"),D.Kc(1,F,1,6,"app-appicon",47),D.Kc(2,X,3,1,"div",48),D.Vb()),2&e){const e=D.ic().$implicit,t=D.ic(3);D.Db(1),D.rc("ngIf","NEW"==e.ostatus),D.Db(1),D.rc("ngIf",t.ygen.getSettings())}}function G(e,t){if(1&e){const e=D.Xb();D.Wb(0,"ion-card"),D.Kc(1,T,3,0,"div",28),D.Kc(2,R,3,0,"div",29),D.Wb(3,"ion-card-header"),D.Wb(4,"ion-card-subtitle"),D.Wb(5,"div"),D.Mc(6),D.Vb(),D.Wb(7,"div"),D.Mc(8),D.Vb(),D.Vb(),D.Wb(9,"ion-card-title"),D.Wb(10,"ion-chip",30),D.ec("click",(function(){D.Cc(e);const a=t.$implicit;return D.ic(3).ygen.routeto("/order",{orderid:a.$key})})),D.Wb(11,"ion-label"),D.Mc(12),D.Vb(),D.Rb(13,"ion-icon",31),D.Vb(),D.Wb(14,"ion-chip",32),D.ec("click",(function(){D.Cc(e);const a=t.$implicit;return D.ic(3).ygen.routeto("/order",{orderid:a.$key})})),D.Wb(15,"ion-label"),D.Mc(16),D.Vb(),D.Vb(),D.Vb(),D.Vb(),D.Wb(17,"ion-card-content"),D.Wb(18,"table",33),D.Wb(19,"tbody"),D.Wb(20,"tr"),D.Wb(21,"td",34),D.Mc(22," By "),D.Vb(),D.Wb(23,"td",35),D.Mc(24),D.Vb(),D.Vb(),D.Wb(25,"tr"),D.Wb(26,"td",34),D.Mc(27," Items "),D.Vb(),D.Wb(28,"td",35),D.Mc(29),D.Vb(),D.Vb(),D.Wb(30,"tr"),D.Wb(31,"td",34),D.Mc(32," Address "),D.Vb(),D.Wb(33,"td",35),D.Mc(34),D.Vb(),D.Vb(),D.Vb(),D.Vb(),D.Vb(),D.Kc(35,z,1,0,"ng-container",36),D.Kc(36,q,1,1,"ng-template",null,37,D.Lc),D.Kc(38,J,3,2,"ng-template",null,38,D.Lc),D.Vb()}if(2&e){const e=t.$implicit,a=D.zc(37),n=D.zc(39),o=D.ic(3);D.Db(1),D.rc("ngIf","PNO"==e.paymentmethod&&"Success"==(null==e.paymentResponse?null:e.paymentResponse.order_status)),D.Db(1),D.rc("ngIf","COD"==e.paymentmethod),D.Db(4),D.Oc("On ",o.ygen.formatTimestampToDate(e.odt),""),D.Db(2),D.Nc(o.ygen.sincewhen(e.odt)),D.Db(4),D.Nc(e.sendorderid),D.Db(4),D.Pc("",o.ygen.getcurrencysymbol()," ",e.amount,""),D.Db(8),D.Oc(" ",e.orderByName," "),D.Db(5),D.Oc(" ",o.getItemCount(e)," "),D.Db(5),D.Oc(" ",e.deliveryAddress," "),D.Db(1),D.rc("ngIf",o.ygen.isAdmin())("ngIfThen",a)("ngIfElse",n)}}function H(e,t){if(1&e&&(D.Wb(0,"div"),D.Kc(1,G,40,13,"ion-card",27),D.Vb()),2&e){const e=D.ic().ngIf;D.Db(1),D.rc("ngForOf",e)}}function Z(e,t){if(1&e&&(D.Wb(0,"div"),D.Kc(1,H,2,1,"div",12),D.Vb()),2&e){const e=t.ngIf;D.ic();const a=D.zc(21);D.Db(1),D.rc("ngIf",e.length>0)("ngIfElse",a)}}let ee=(()=>{class e{constructor(e,t,a,n,r,i,c,s,l,d){this.modalCtrl=e,this.centerdb=t,this.router=a,this.yalert=n,this.ygen=r,this.ydataservice=i,this.ystorageservice=c,this.ypay=s,this.yds=l,this.ynoti=d,this.total=0,this.pickerModes={single:!0,multi:!0,range:!0},this.clickrefresh=new b.a({flag:!1}),this.dateControl=new o.d(void 0,o.v.required),this.datesre=[],this.centerdb.currenttenant.subscribe(e=>{e&&(this.orderlist=new u.a(m.a.getpath()+"/shop/orders",this.ydataservice.getDatabase(),!0,null),this.defaultdata())})}getDate(e){console.log(e)}ngOnInit(){console.log("yeah....ngoninit"),this.datesre=[{name:"Today",value:this.showDateDisplay("today")},{name:"Yesterday",value:this.showDateDisplay("yesterday")},{name:"Last Seven Days",value:this.showDateDisplay("week")},{name:"Last 30 days",value:this.showDateDisplay("l30days")},{name:"Select Date Range",value:this.showDateDisplay("sdr")}]}ngAfterViewInit(){setTimeout(()=>{},200)}ionViewWillEnter(){console.log("yeah....ion enter")}defaultdata(){this.myinbox=this.getData(""),this.clickrefresh.next({flag:!1}),this.dateControl.setValue(void 0)}deleteNotice(e){this.orderlist.removefromList(e)}takeAcion(e,t){Object.assign(t,{ostatus:e.value}),this.orderlist.updateList(t),this.yalert.openSnackBar(`Order Status changed for [${t.sendorderid}]`,"Ok"),this.ynoti.orderstatuschange(`Order Status changed to [${e.value}] for [${t.sendorderid}]`,t)}putinprocess(e){Object.assign(e,{ostatus:"INPROCESS"}),this.orderlist.updateList(e),this.ynoti.orderstatuschange(`Order Status changed to [${e.ostatus}] for [${e.sendorderid}]`,e)}completeorder(e){Object.assign(e,{ostatus:"COMPLETED"}),this.orderlist.updateList(e),this.ynoti.orderstatuschange(`Congratulation you Order Status changed to [${e.ostatus}] for [${e.sendorderid}]`,e)}getItemCount(e){return e.payload?e.payload.length:0}getTitle(e){return e.read?"Mark Unread":"Mark Read"}cancelOrder(e){this.takeAcion({value:"CANCELLED"},e)}getItems(e){console.log("segment",e),this.myinbox=this.getData(e.detail.value)}getData(e){return this.ygen.isAdmin()?this.getOrders(e):this.getMyOrders(e)}getOrders(e){let t=this.orderlist.getListRefer().snapshotChanges().pipe(Object(g.a)(e=>e.map(e=>Object.assign({$key:e.payload.key},e.payload.val()))),Object(g.a)(e=>e.reverse()));return e&&e.length>=2?t.pipe(Object(g.a)(t=>t.filter(t=>t.sendorderid.toUpperCase().indexOf(e.toUpperCase())>-1||t.orderByName&&t.orderByName.toUpperCase().indexOf(e.toUpperCase())>-1||t.orderByPhone&&t.orderByPhone.indexOf(e)>-1))):t}getMyOrders(e){let t=this.orderlist.getListRefer().snapshotChanges().pipe(Object(g.a)(t=>t.map(e=>Object.assign({$key:e.payload.key},e.payload.val())).filter(t=>t.ostatus==e&&t.orderedBy==this.ygen.getUid())),Object(g.a)(e=>e.reverse()));return e&&e.length>=2?t.pipe(Object(g.a)(t=>t.filter(t=>t.sendorderid.toUpperCase().indexOf(e.toUpperCase())>-1||t.orderByName&&t.orderByName.toUpperCase().indexOf(e.toUpperCase())>-1||t.orderByPhone&&t.orderByPhone.indexOf(e)>-1))):t}searchOrders(){let e=this.dateControl.value,t=this.getData("").pipe(Object(g.a)(t=>t.filter(t=>this.datecheck(t.odt,e))));this.myinbox=t}datecheck(e,t){let a=y(e).format("YYYY-MM-DD"),n=y(a);if("Today"==t.name||"Yesterday"==t.name){let e=y(t.value.sda);return n.isSame(e)}{let e=y(t.value.sda),a=y(t.value.sdb);return n.isSameOrBefore(a)&&n.isSameOrAfter(e)}}navigate(e,t){console.log()}onDateChange(e){this.clickrefresh.next({flag:!1}),console.log(e),e.value?(this.startDateAfter=e.value.value.sda,this.startDateBefore=e.value.value.sdb):(this.startDateAfter=y(new Date).format("YYYY-MM-DD"),this.startDateBefore=y(new Date).format("YYYY-MM-DD"),this.myinbox=this.getData("")),e.value&&"Select Date Range"==e.value.name?(this.clickrefresh.next({flag:!0}),setTimeout(()=>{this.calendar.updateTodaysDate()},100)):this.dateControl.value&&this.searchOrders()}showDateDisplay(e){this.clickrefresh.next({flag:!1}),y(new Date);let t=y(new Date).format("YYYY-MM-DD"),a=y(new Date).add(-1,"days"),n=y(new Date).add(-7,"days"),o=y(new Date).add(-30,"days"),r=t,i=t;switch(e){case"today":r=t,i=t;break;case"yesterday":r=a.format("YYYY-MM-DD"),i=a.format("YYYY-MM-DD");break;case"week":r=n.format("YYYY-MM-DD"),i=t;break;case"l30days":r=o.format("YYYY-MM-DD"),i=t;break;case"sdr":r=t,i=t}return{sda:r,sdb:i}}isStartDateSelected(){return e=>{const t=y(e);let a,n;return this.startDateAfter&&(a=y(this.startDateAfter)),this.startDateBefore&&(n=y(this.startDateBefore)),a&&n&&t.isBetween(a,n,"days","[]")||a&&t.isSame(a)?"date-selected":y().startOf("day").isSame(y(e).startOf("day"))?"today":void 0}}toggleStartDateDate(e,t){const a=y(e).format("YYYY-MM-DD");y(e),this.startDateAfter&&this.startDateBefore?y(e).isAfter(y(this.startDateBefore))?this.startDateBefore=a:y(e).isBefore(y(this.startDateAfter))?this.startDateAfter=a:y(e).isBetween(y(this.startDateAfter),y(this.startDateBefore))?this.startDateBefore=a:(y(e).isSame(y(this.startDateBefore))||y(e).isSame(y(this.startDateAfter)))&&(this.startDateBefore=a,this.startDateAfter=a):(this.startDateAfter=a,this.startDateBefore=a),this.datesre.pop();let n={name:"Select Date Range",value:{sda:this.startDateAfter,sdb:this.startDateBefore}};this.datesre.push(n),this.dateControl.setValue(n),t.updateTodaysDate()}}return e.\u0275fac=function(t){return new(t||e)(D.Qb(i.kb),D.Qb(m.a),D.Qb(r.j),D.Qb(h.a),D.Qb(c.a),D.Qb(s.a),D.Qb(l.a),D.Qb(f.a),D.Qb(d.a),D.Qb(p.a))},e.\u0275cmp=D.Kb({type:e,selectors:[["app-searchorder"]],viewQuery:function(e,t){var a;1&e&&(D.Hc(B,!0),D.Sc(P,!0)),2&e&&(D.yc(a=D.fc())&&(t.ele=a.first),D.yc(a=D.fc())&&(t.calendar=a.first))},decls:28,vars:18,consts:[[3,"color"],["slot","start"],["debounce","100",3,"placeholder","ionChange"],["mySearchbar",""],["padding",""],[1,"myselect"],[3,"formControl","selectionChange"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["noorders",""],[4,"ngIf"],["loading",""],[4,"ngIf","ngIfElse"],[1,"example-additional-selection"],["elseBlock",""],[2,"color","slateblue"],[3,"value"],[2,"display","flex","justify-content","center","padding","10px","flex-direction","column","align-items","center"],[2,"font-size","xx-large"],["aria-label","Fish selection"],["color","primary","selected","",3,"click"],["class","showcalnder",4,"ngIf"],[1,"showcalnder"],[3,"dateClass","selectedChange"],["calendar",""],["mat-fab","","color","primary",3,"click"],["type","indeterminate","reversed","true"],[4,"ngFor","ngForOf"],["class","paySection",4,"ngIf"],["class","codSection",4,"ngIf"],["color","secondary",3,"click"],["name","eye"],["color","primary",3,"click"],[1,"contentorder"],[1,"labelt"],[1,"valuet"],[4,"ngIf","ngIfThen","ngIfElse"],["admin",""],["normaluser",""],[1,"paySection"],["text-uppercase","",1,"sc-ion-label-md-h","sc-ion-label-md-s","hydrated"],[1,"codSection"],["icon","delete","message","delete",3,"actionEvent",4,"ngIf"],[3,"currentvalue","orderstatus","actionEvent"],[2,"padding","5px"],[3,"mobile"],["icon","delete","message","delete",3,"actionEvent"],[3,"color","icon","askquestion","icontext","isiconwithtext","askquestiontext","actionEvent",4,"ngIf"],["style","padding:5px",4,"ngIf"],[3,"color","icon","askquestion","icontext","isiconwithtext","askquestiontext","actionEvent"]],template:function(e,t){if(1&e&&(D.Wb(0,"ion-header"),D.Wb(1,"ion-toolbar",0),D.Wb(2,"ion-buttons",1),D.Rb(3,"ion-back-button"),D.Vb(),D.Wb(4,"ion-title"),D.Mc(5),D.jc(6,"translate"),D.Vb(),D.Vb(),D.Wb(7,"ion-toolbar",0),D.Wb(8,"ion-searchbar",2,3),D.ec("ionChange",(function(e){return t.getItems(e)})),D.jc(10,"translate"),D.Vb(),D.Vb(),D.Vb(),D.Wb(11,"ion-content",4),D.Wb(12,"div",5),D.Wb(13,"mat-form-field"),D.Wb(14,"mat-select",6),D.ec("selectionChange",(function(e){return t.onDateChange(e)})),D.Wb(15,"mat-select-trigger"),D.Kc(16,N,8,3,"span",7),D.Vb(),D.Wb(17,"mat-option"),D.Mc(18,"Show All Orders"),D.Vb(),D.Kc(19,K,2,2,"mat-option",8),D.Vb(),D.Vb(),D.Kc(20,j,7,3,"ng-template",null,9,D.Lc),D.Vb(),D.Kc(22,L,2,1,"div",10),D.jc(23,"async"),D.Kc(24,$,1,0,"ng-template",null,11,D.Lc),D.Kc(26,Z,2,2,"div",12),D.jc(27,"async"),D.Vb()),2&e){const e=D.zc(25);D.Db(1),D.rc("color","warning"),D.Db(4),D.Nc(D.kc(6,10,"Search Order")),D.Db(2),D.rc("color","warning"),D.Db(1),D.sc("placeholder",D.kc(10,12,"Search by OrderId or Name")),D.Db(6),D.rc("formControl",t.dateControl),D.Db(2),D.rc("ngIf",t.dateControl.value),D.Db(3),D.rc("ngForOf",t.datesre),D.Db(3),D.rc("ngIf",D.kc(23,14,t.clickrefresh)),D.Db(4),D.rc("ngIf",D.kc(27,16,t.myinbox))("ngIfElse",e)}},directives:[i.y,i.fb,i.j,i.f,i.g,i.db,i.Q,i.sb,i.s,v.c,C.a,o.o,o.e,C.c,n.m,O.n,n.l,M.b,M.a,V.a,W.a,k.a,i.N,i.k,i.m,i.n,i.o,i.q,i.H,i.z,i.l,i.B,w.a,x.a,S.a,I.a],pipes:[Y.c,n.b],styles:[".otitle[_ngcontent-%COMP%]{font-size:14px}.orderid[_ngcontent-%COMP%]{font-size:10px}.orderamt[_ngcontent-%COMP%]{font-size:18px}ion-card-header[_ngcontent-%COMP%]{padding-bottom:0}tbody[_ngcontent-%COMP%]{font-size:small}.labelt[_ngcontent-%COMP%]{font-weight:lighter}.valuet[_ngcontent-%COMP%]{padding-left:10px}ion-card-content[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.footerCartSection[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.paySection[_ngcontent-%COMP%]{background:#15bf15}.codSection[_ngcontent-%COMP%], .paySection[_ngcontent-%COMP%]{color:#fff;position:absolute;padding:6px 16px;border-radius:5px;font-weight:700;right:10px}.codSection[_ngcontent-%COMP%]{background:#de66cf}ion-card-title[_ngcontent-%COMP%]{padding-bottom:0;background:#f5fffa}  .date-selected .mat-calendar-body-cell-content{background-color:#17a2b8;color:#fff}  .date-selected.mat-calendar-body-cell:hover .mat-calendar-body-cell-content{background-color:#17a2b8!important}.myselect[_ngcontent-%COMP%], .showcalnder[_ngcontent-%COMP%]{display:flex;justify-content:center}.showcalnder[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.mat-form-field[_ngcontent-%COMP%]{width:50vw}.mat-calendar[_ngcontent-%COMP%]{display:block;width:100%;max-width:300px}"]}),e})();var te=a("hVaU"),ae=a("IZvt"),ne=a("4pxM");const oe=[{path:"",component:ee}];let re=(()=>{class e{}return e.\u0275mod=D.Ob({type:e}),e.\u0275inj=D.Nb({factory:function(t){return new(t||e)},imports:[[n.c,o.i,o.t,i.gb,te.a,ae.a,ne.a,r.n.forChild(oe)]]}),e})()}}]);