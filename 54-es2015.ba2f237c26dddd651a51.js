(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{LWQF:function(t,e,c){"use strict";c.r(e),c.d(e,"MyordersPageModule",(function(){return C}));var n=c("ofXK"),o=c("3Pt+"),i=c("tyNb"),a=c("TEn/"),s=c("pwB6"),r=c("lJxs"),g=c("fXoL"),d=c("sYmb");function l(t,e){if(1&t){const t=g.ic();g.hc(0,"ion-toolbar",0),g.hc(1,"ion-searchbar",18),g.pc("ngModelChange",(function(e){return g.Nc(t),g.tc().queryText=e})),g.uc(2,"translate"),g.gc(),g.gc()}if(2&t){const t=g.tc();g.Cc("color","secondary"),g.Ob(1),g.Dc("placeholder",g.vc(2,3,"Search Order")),g.Cc("ngModel",t.queryText)}}function h(t,e){1&t&&g.cc(0,"ion-progress-bar",19)}function u(t,e){1&t&&(g.hc(0,"div",31),g.hc(1,"ion-label",32),g.Xc(2,"PAID "),g.gc(),g.gc())}function p(t,e){1&t&&(g.hc(0,"div",33),g.hc(1,"ion-label",32),g.Xc(2,"COD "),g.gc(),g.gc())}function b(t,e){if(1&t){const t=g.ic();g.hc(0,"app-appicon",34),g.pc("actionEvent",(function(){g.Nc(t);const e=g.tc().$implicit;return g.tc(2).cancelOrder(e)})),g.gc()}2&t&&g.Cc("color","accent")("icon","cancel_schedule_send")("askquestion",!0)("icontext","Cancel Order")("isiconwithtext",!0)("askquestiontext","Are you sure, you want to cancel Order?")}function y(t,e){if(1&t&&(g.hc(0,"div",35),g.Xc(1,"Call Support "),g.cc(2,"app-callphone",36),g.gc()),2&t){const t=g.tc(3);g.Ob(2),g.Cc("mobile",t.ygen.getSettings().oncallsupport)}}function f(t,e){if(1&t){const t=g.ic();g.hc(0,"ion-card"),g.Vc(1,u,3,0,"div",21),g.Vc(2,p,3,0,"div",22),g.hc(3,"ion-card-header"),g.hc(4,"ion-card-subtitle"),g.hc(5,"div"),g.Xc(6),g.gc(),g.hc(7,"div"),g.Xc(8),g.gc(),g.gc(),g.hc(9,"ion-card-title"),g.hc(10,"ion-chip",23),g.pc("click",(function(){g.Nc(t);const c=e.$implicit;return g.tc(2).ygen.routeto("/order",{orderid:c.$key})})),g.hc(11,"ion-label"),g.Xc(12),g.gc(),g.cc(13,"ion-icon",24),g.gc(),g.hc(14,"ion-chip",25),g.pc("click",(function(){g.Nc(t);const c=e.$implicit;return g.tc(2).ygen.routeto("/order",{orderid:c.$key})})),g.hc(15,"ion-label"),g.Xc(16),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(17,"ion-card-content"),g.hc(18,"table",26),g.hc(19,"tbody"),g.hc(20,"tr"),g.hc(21,"td",27),g.Xc(22," By "),g.gc(),g.hc(23,"td",28),g.Xc(24),g.gc(),g.gc(),g.hc(25,"tr"),g.hc(26,"td",27),g.Xc(27," Items "),g.gc(),g.hc(28,"td",28),g.Xc(29),g.gc(),g.gc(),g.hc(30,"tr"),g.hc(31,"td",27),g.Xc(32," Address "),g.gc(),g.hc(33,"td",28),g.Xc(34),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(35,"ion-item"),g.Vc(36,b,1,6,"app-appicon",29),g.Vc(37,y,3,1,"div",30),g.gc(),g.gc()}if(2&t){const t=e.$implicit,c=g.tc(2);g.Ob(1),g.Cc("ngIf","PNO"==t.paymentmethod&&"Success"==(null==t.paymentResponse?null:t.paymentResponse.order_status)),g.Ob(1),g.Cc("ngIf","COD"==t.paymentmethod),g.Ob(4),g.Zc("On ",c.ygen.formatTimestampToDate(t.odt),""),g.Ob(2),g.Yc(c.ygen.sincewhen(t.odt)),g.Ob(4),g.Yc(t.sendorderid),g.Ob(4),g.ad("",c.ygen.getcurrencysymbol()," ",t.amount,""),g.Ob(8),g.Zc(" ",t.orderByName," "),g.Ob(5),g.Zc(" ",c.getItemCount(t)," "),g.Ob(5),g.Zc(" ",t.deliveryAddress," "),g.Ob(2),g.Cc("ngIf","NEW"==c.segment),g.Ob(1),g.Cc("ngIf",c.ygen.getSettings())}}function O(t,e){if(1&t&&(g.hc(0,"div"),g.Vc(1,f,38,12,"ion-card",20),g.Xc(2),g.gc()),2&t){const t=e.ngIf,c=g.tc();g.Ob(1),g.Cc("ngForOf",t),g.Ob(1),g.Zc(" ",c.getTotal(t)," ")}}const m=[{path:"",component:(()=>{class t{constructor(t,e,c,n,o,i,a,r,g,d){this.modalCtrl=t,this.centerdb=e,this.router=c,this.yalert=n,this.ygen=o,this.ydataservice=i,this.ystorageservice=a,this.ypay=r,this.yds=g,this.ynoti=d,this.queryText="",this.segment="NEW",this.segmenttotal=new Map,this.total=0,this.centerdb.currenttenant.subscribe(t=>{t&&(this.orderlist=new s.p(s.P.getpath()+"/shop/orders",this.ydataservice.getDatabase(),!0,null),this.setSegmentTotal(),this.myinbox=this.getData(this.segment))})}ngOnInit(){console.log("yeah....ngoninit")}ionViewWillEnter(){console.log("yeah....ion enter")}deleteNotice(t){this.orderlist.removefromList(t)}cancelOrder(t){this.takeAcion({value:"CANCELLED"},t)}takeAcion(t,e){Object.assign(e,{ostatus:t.value}),this.orderlist.updateList(e),this.yalert.openSnackBar(`Order Status changed for [${e.sendorderid}]`,"Ok"),this.ynoti.orderstatuschange(`Order Status changed to [${t.value}] for [${e.sendorderid}]`,e)}putinprocess(t){Object.assign(t,{ostatus:"INPROCESS"}),this.orderlist.updateList(t),this.ynoti.orderstatuschange(`Order Status changed to [${t.ostatus}] for [${t.sendorderid}]`,t)}completeorder(t){Object.assign(t,{ostatus:"COMPLETED"}),this.orderlist.updateList(t),this.ynoti.orderstatuschange(`Congratulation you Order Status changed to [${t.ostatus}] for [${t.sendorderid}]`,t)}getItemCount(t){return t.payload?t.payload.length:0}getTitle(t){return t.read?"Mark Unread":"Mark Read"}segmentChanged(t){console.log("segment",t),this.myinbox=this.getData(t.detail.value)}getData(t){return this.getMyOrders(t)}getOrders(t){return"NEW"===t?this.orderlist.getListRefer().snapshotChanges().pipe(Object(r.a)(e=>e.map(t=>Object.assign({$key:t.payload.key},t.payload.val())).filter(e=>e.ostatus==t||!e.ostatus)),Object(r.a)(t=>t.reverse())):this.orderlist.getListRefer().snapshotChanges().pipe(Object(r.a)(e=>e.map(t=>Object.assign({$key:t.payload.key},t.payload.val())).filter(e=>e.ostatus==t)),Object(r.a)(t=>t.reverse()))}getMyOrders(t){return"NEW"===t?this.orderlist.getListRefer().snapshotChanges().pipe(Object(r.a)(e=>e.map(t=>Object.assign({$key:t.payload.key},t.payload.val())).filter(e=>(e.ostatus==t||!e.ostatus)&&e.orderedBy==this.ygen.getUid())),Object(r.a)(t=>t.reverse())):this.orderlist.getListRefer().snapshotChanges().pipe(Object(r.a)(e=>e.map(t=>Object.assign({$key:t.payload.key},t.payload.val())).filter(e=>e.ostatus==t&&e.orderedBy==this.ygen.getUid())),Object(r.a)(t=>t.reverse()))}getTotal(t){this.total=0,t.forEach(t=>{this.total=this.total+t.amount})}setSegmentTotal(){this.orderlist.getListRefer().snapshotChanges().pipe(Object(r.a)(t=>t.map(t=>Object.assign({$key:t.payload.key},t.payload.val())).filter(t=>t.orderedBy==this.ygen.getUid()))).subscribe(t=>{this.ygen.orderstatus.forEach(e=>{this.segmenttotal.set(e.value,t.filter(t=>t.ostatus==e.value).length)})})}navigate(t,e){console.log()}}return t.\u0275fac=function(e){return new(e||t)(g.bc(a.mb),g.bc(s.P),g.bc(i.j),g.bc(s.a),g.bc(s.T),g.bc(s.Q),g.bc(s.db),g.bc(s.Z),g.bc(s.R),g.bc(s.U))},t.\u0275cmp=g.Vb({type:t,selectors:[["app-myorders"]],decls:39,vars:27,consts:[[3,"color"],["slot","start"],["slot","end","color","secondary"],[3,"click"],["slot","icon-only","name","search"],[3,"ngModel","ngModelChange","ionChange"],["value","NEW"],["color","danger"],["value","INPROCESS"],["color","dark"],["value","COMPLETED"],["color","success"],["value","CANCELLED"],["color","tertiary"],[3,"color",4,"ngIf"],["padding",""],["loading",""],[4,"ngIf","ngIfElse"],[3,"ngModel","placeholder","ngModelChange"],["type","indeterminate","reversed","true"],[4,"ngFor","ngForOf"],["class","paySection",4,"ngIf"],["class","codSection",4,"ngIf"],["color","secondary",3,"click"],["name","eye"],["color","primary",3,"click"],[1,"contentorder"],[1,"labelt"],[1,"valuet"],[3,"color","icon","askquestion","icontext","isiconwithtext","askquestiontext","actionEvent",4,"ngIf"],["style","padding:5px",4,"ngIf"],[1,"paySection"],["text-uppercase","",1,"sc-ion-label-md-h","sc-ion-label-md-s","hydrated"],[1,"codSection"],[3,"color","icon","askquestion","icontext","isiconwithtext","askquestiontext","actionEvent"],[2,"padding","5px"],[3,"mobile"]],template:function(t,e){if(1&t&&(g.hc(0,"ion-header"),g.hc(1,"ion-toolbar",0),g.hc(2,"ion-buttons",1),g.cc(3,"ion-back-button"),g.gc(),g.hc(4,"ion-title"),g.Xc(5),g.uc(6,"translate"),g.gc(),g.hc(7,"ion-buttons",2),g.hc(8,"ion-button",3),g.pc("click",(function(){return e.ygen.routeto("searchorder",{})})),g.cc(9,"ion-icon",4),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(10,"ion-header"),g.hc(11,"ion-toolbar",0),g.hc(12,"ion-segment",5),g.pc("ngModelChange",(function(t){return e.segment=t}))("ionChange",(function(t){return e.segmentChanged(t)})),g.hc(13,"ion-segment-button",6),g.Xc(14),g.uc(15,"translate"),g.hc(16,"ion-badge",7),g.Xc(17),g.gc(),g.gc(),g.hc(18,"ion-segment-button",8),g.Xc(19),g.uc(20,"translate"),g.hc(21,"ion-badge",9),g.Xc(22),g.gc(),g.gc(),g.hc(23,"ion-segment-button",10),g.Xc(24),g.uc(25,"translate"),g.hc(26,"ion-badge",11),g.Xc(27),g.gc(),g.gc(),g.hc(28,"ion-segment-button",12),g.Xc(29),g.uc(30,"translate"),g.hc(31,"ion-badge",13),g.Xc(32),g.gc(),g.gc(),g.gc(),g.gc(),g.Vc(33,l,3,5,"ion-toolbar",14),g.gc(),g.hc(34,"ion-content",15),g.Vc(35,h,1,0,"ng-template",null,16,g.Wc),g.Vc(37,O,3,2,"div",17),g.uc(38,"async"),g.gc()),2&t){const t=g.Kc(36);g.Ob(1),g.Cc("color","warning"),g.Ob(4),g.Yc(g.vc(6,15,"My Order")),g.Ob(6),g.Cc("color","warning"),g.Ob(1),g.Cc("ngModel",e.segment),g.Ob(2),g.Zc(" ",g.vc(15,17,"New"),""),g.Ob(3),g.Yc(e.segmenttotal.get("NEW")),g.Ob(2),g.Zc(" ",g.vc(20,19,"InProcess"),""),g.Ob(3),g.Yc(e.segmenttotal.get("INPROCESS")),g.Ob(2),g.Zc(" ",g.vc(25,21,"Completed"),""),g.Ob(3),g.Yc(e.segmenttotal.get("COMPLETED")),g.Ob(2),g.Zc(" ",g.vc(30,23,"Cancelled"),""),g.Ob(3),g.Yc(e.segmenttotal.get("CANCELLED")),g.Ob(1),g.Cc("ngIf",0),g.Ob(4),g.Cc("ngIf",g.vc(38,25,e.myinbox))("ngIfElse",t)}},directives:[a.y,a.hb,a.j,a.f,a.g,a.fb,a.i,a.z,a.T,a.tb,o.o,o.r,a.U,a.h,n.m,a.s,a.S,a.ub,a.P,n.l,a.k,a.m,a.n,a.o,a.q,a.J,a.l,a.D,s.f,s.j],pipes:[d.c,n.b],styles:[".otitle[_ngcontent-%COMP%]{font-size:14px}.orderid[_ngcontent-%COMP%]{font-size:10px}.orderamt[_ngcontent-%COMP%]{font-size:18px}ion-card-header[_ngcontent-%COMP%]{padding-bottom:0}tbody[_ngcontent-%COMP%]{font-size:small}.labelt[_ngcontent-%COMP%]{font-weight:lighter}.valuet[_ngcontent-%COMP%]{padding-left:10px}ion-card-content[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.footerCartSection[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-right:10px;margin-left:10px}.paySection[_ngcontent-%COMP%]{background:#15bf15}.codSection[_ngcontent-%COMP%], .paySection[_ngcontent-%COMP%]{color:#fff;position:absolute;padding:6px 16px;border-radius:5px;font-weight:700;right:10px}.codSection[_ngcontent-%COMP%]{background:#de66cf}ion-card-title[_ngcontent-%COMP%]{padding-bottom:0;background:#f5fffa}"]}),t})()}];let C=(()=>{class t{}return t.\u0275mod=g.Zb({type:t}),t.\u0275inj=g.Yb({factory:function(e){return new(e||t)},imports:[[n.c,o.i,a.ib,s.H,s.o,s.b,i.n.forChild(m)]]}),t})()}}]);