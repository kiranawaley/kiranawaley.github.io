(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{LWQF:function(t,e,n){"use strict";n.r(e),n.d(e,"MyordersPageModule",(function(){return M}));var o=n("ofXK"),i=n("3Pt+"),c=n("tyNb"),a=n("TEn/"),s=n("OJQs"),r=n("lJxs"),b=n("fXoL"),d=n("sYmb");function l(t,e){if(1&t){const t=b.Xb();b.Wb(0,"ion-toolbar",0),b.Wb(1,"ion-searchbar",15),b.ec("ngModelChange",(function(e){return b.Cc(t),b.ic().queryText=e})),b.jc(2,"translate"),b.Vb(),b.Vb()}if(2&t){const t=b.ic();b.rc("color","secondary"),b.Db(1),b.sc("placeholder",b.kc(2,3,"Search Order")),b.rc("ngModel",t.queryText)}}function g(t,e){1&t&&b.Rb(0,"ion-progress-bar",16)}function p(t,e){1&t&&(b.Wb(0,"div",28),b.Wb(1,"ion-label",29),b.Mc(2,"PAID "),b.Vb(),b.Vb())}function u(t,e){1&t&&(b.Wb(0,"div",30),b.Wb(1,"ion-label",29),b.Mc(2,"COD "),b.Vb(),b.Vb())}function h(t,e){if(1&t){const t=b.Xb();b.Wb(0,"app-appicon",31),b.ec("actionEvent",(function(){b.Cc(t);const e=b.ic().$implicit;return b.ic(2).cancelOrder(e)})),b.Vb()}2&t&&b.rc("color","accent")("icon","cancel_schedule_send")("askquestion",!0)("icontext","Cancel Order")("isiconwithtext",!0)("askquestiontext","Are you sure, you want to cancel Order?")}function y(t,e){if(1&t&&(b.Wb(0,"div",32),b.Mc(1,"Call Support "),b.Rb(2,"app-callphone",33),b.Vb()),2&t){const t=b.ic(3);b.Db(2),b.rc("mobile",t.ygen.getSettings().oncallsupport)}}function f(t,e){if(1&t){const t=b.Xb();b.Wb(0,"ion-card"),b.Kc(1,p,3,0,"div",18),b.Kc(2,u,3,0,"div",19),b.Wb(3,"ion-card-header"),b.Wb(4,"ion-card-subtitle"),b.Wb(5,"div"),b.Mc(6),b.Vb(),b.Wb(7,"div"),b.Mc(8),b.Vb(),b.Vb(),b.Wb(9,"ion-card-title"),b.Wb(10,"ion-chip",20),b.ec("click",(function(){b.Cc(t);const n=e.$implicit;return b.ic(2).ygen.routeto("/order",{orderid:n.$key})})),b.Wb(11,"ion-label"),b.Mc(12),b.Vb(),b.Rb(13,"ion-icon",21),b.Vb(),b.Wb(14,"ion-chip",22),b.ec("click",(function(){b.Cc(t);const n=e.$implicit;return b.ic(2).ygen.routeto("/order",{orderid:n.$key})})),b.Wb(15,"ion-label"),b.Mc(16),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Wb(17,"ion-card-content"),b.Wb(18,"table",23),b.Wb(19,"tbody"),b.Wb(20,"tr"),b.Wb(21,"td",24),b.Mc(22," By "),b.Vb(),b.Wb(23,"td",25),b.Mc(24),b.Vb(),b.Vb(),b.Wb(25,"tr"),b.Wb(26,"td",24),b.Mc(27," Items "),b.Vb(),b.Wb(28,"td",25),b.Mc(29),b.Vb(),b.Vb(),b.Wb(30,"tr"),b.Wb(31,"td",24),b.Mc(32," Address "),b.Vb(),b.Wb(33,"td",25),b.Mc(34),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Wb(35,"ion-item"),b.Kc(36,h,1,6,"app-appicon",26),b.Kc(37,y,3,1,"div",27),b.Vb(),b.Vb()}if(2&t){const t=e.$implicit,n=b.ic(2);b.Db(1),b.rc("ngIf","PNO"==t.paymentmethod&&"Success"==(null==t.paymentResponse?null:t.paymentResponse.order_status)),b.Db(1),b.rc("ngIf","COD"==t.paymentmethod),b.Db(4),b.Oc("On ",n.ygen.formatTimestampToDate(t.odt),""),b.Db(2),b.Nc(n.ygen.sincewhen(t.odt)),b.Db(4),b.Nc(t.sendorderid),b.Db(4),b.Pc("",n.ygen.getcurrencysymbol()," ",t.amount,""),b.Db(8),b.Oc(" ",t.orderByName," "),b.Db(5),b.Oc(" ",n.getItemCount(t)," "),b.Db(5),b.Oc(" ",t.deliveryAddress," "),b.Db(2),b.rc("ngIf","NEW"==n.segment),b.Db(1),b.rc("ngIf",n.ygen.getSettings())}}function m(t,e){if(1&t&&(b.Wb(0,"div"),b.Kc(1,f,38,12,"ion-card",17),b.Mc(2),b.Vb()),2&t){const t=e.ngIf,n=b.ic();b.Db(1),b.rc("ngForOf",t),b.Db(1),b.Oc(" ",n.getTotal(t)," ")}}const O=[{path:"",component:(()=>{class t{constructor(t,e,n,o,i,c,a,r,b,d){this.modalCtrl=t,this.centerdb=e,this.router=n,this.yalert=o,this.ygen=i,this.ydataservice=c,this.ystorageservice=a,this.ypay=r,this.yds=b,this.ynoti=d,this.queryText="",this.segment="NEW",this.segmenttotal=new Map,this.total=0,this.centerdb.currenttenant.subscribe(t=>{t&&(this.orderlist=new s.p(s.P.getpath()+"/shop/orders",this.ydataservice.getDatabase(),!0,null),this.setSegmentTotal(),this.myinbox=this.getData(this.segment))})}ngOnInit(){console.log("yeah....ngoninit")}ionViewWillEnter(){console.log("yeah....ion enter")}deleteNotice(t){this.orderlist.removefromList(t)}cancelOrder(t){this.takeAcion({value:"CANCELLED"},t)}takeAcion(t,e){Object.assign(e,{ostatus:t.value}),this.orderlist.updateList(e),this.yalert.openSnackBar(`Order Status changed for [${e.sendorderid}]`,"Ok"),this.ynoti.orderstatuschange(`Order Status changed to [${t.value}] for [${e.sendorderid}]`,e)}putinprocess(t){Object.assign(t,{ostatus:"INPROCESS"}),this.orderlist.updateList(t),this.ynoti.orderstatuschange(`Order Status changed to [${t.ostatus}] for [${t.sendorderid}]`,t)}completeorder(t){Object.assign(t,{ostatus:"COMPLETED"}),this.orderlist.updateList(t),this.ynoti.orderstatuschange(`Congratulation you Order Status changed to [${t.ostatus}] for [${t.sendorderid}]`,t)}getItemCount(t){return t.payload?t.payload.length:0}getTitle(t){return t.read?"Mark Unread":"Mark Read"}segmentChanged(t){console.log("segment",t),this.myinbox=this.getData(t.detail.value)}getData(t){return this.getMyOrders(t)}getOrders(t){return"NEW"===t?this.orderlist.getListRefer().snapshotChanges().pipe(Object(r.a)(e=>e.map(t=>Object.assign({$key:t.payload.key},t.payload.val())).filter(e=>e.ostatus==t||!e.ostatus)),Object(r.a)(t=>t.reverse())):this.orderlist.getListRefer().snapshotChanges().pipe(Object(r.a)(e=>e.map(t=>Object.assign({$key:t.payload.key},t.payload.val())).filter(e=>e.ostatus==t)),Object(r.a)(t=>t.reverse()))}getMyOrders(t){return"NEW"===t?this.orderlist.getListRefer().snapshotChanges().pipe(Object(r.a)(e=>e.map(t=>Object.assign({$key:t.payload.key},t.payload.val())).filter(e=>(e.ostatus==t||!e.ostatus)&&e.orderedBy==this.ygen.getUid())),Object(r.a)(t=>t.reverse())):this.orderlist.getListRefer().snapshotChanges().pipe(Object(r.a)(e=>e.map(t=>Object.assign({$key:t.payload.key},t.payload.val())).filter(e=>e.ostatus==t&&e.orderedBy==this.ygen.getUid())),Object(r.a)(t=>t.reverse()))}getTotal(t){this.total=0,t.forEach(t=>{this.total=this.total+t.amount})}setSegmentTotal(){this.orderlist.getListRefer().snapshotChanges().pipe(Object(r.a)(t=>t.map(t=>Object.assign({$key:t.payload.key},t.payload.val())).filter(t=>t.orderedBy==this.ygen.getUid()))).subscribe(t=>{this.ygen.orderstatus.forEach(e=>{this.segmenttotal.set(e.value,t.filter(t=>t.ostatus==e.value).length)})})}navigate(t,e){console.log()}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(a.mb),b.Qb(s.P),b.Qb(c.j),b.Qb(s.a),b.Qb(s.T),b.Qb(s.Q),b.Qb(s.db),b.Qb(s.Z),b.Qb(s.R),b.Qb(s.U))},t.\u0275cmp=b.Kb({type:t,selectors:[["app-myorders"]],decls:36,vars:27,consts:[[3,"color"],["slot","start"],[3,"ngModel","ngModelChange","ionChange"],["value","NEW"],["color","danger"],["value","INPROCESS"],["color","dark"],["value","COMPLETED"],["color","success"],["value","CANCELLED"],["color","tertiary"],[3,"color",4,"ngIf"],["padding",""],["loading",""],[4,"ngIf","ngIfElse"],[3,"ngModel","placeholder","ngModelChange"],["type","indeterminate","reversed","true"],[4,"ngFor","ngForOf"],["class","paySection",4,"ngIf"],["class","codSection",4,"ngIf"],["color","secondary",3,"click"],["name","eye"],["color","primary",3,"click"],[1,"contentorder"],[1,"labelt"],[1,"valuet"],[3,"color","icon","askquestion","icontext","isiconwithtext","askquestiontext","actionEvent",4,"ngIf"],["style","padding:5px",4,"ngIf"],[1,"paySection"],["text-uppercase","",1,"sc-ion-label-md-h","sc-ion-label-md-s","hydrated"],[1,"codSection"],[3,"color","icon","askquestion","icontext","isiconwithtext","askquestiontext","actionEvent"],[2,"padding","5px"],[3,"mobile"]],template:function(t,e){if(1&t&&(b.Wb(0,"ion-header"),b.Wb(1,"ion-toolbar",0),b.Wb(2,"ion-buttons",1),b.Rb(3,"ion-back-button"),b.Vb(),b.Wb(4,"ion-title"),b.Mc(5),b.jc(6,"translate"),b.Vb(),b.Vb(),b.Vb(),b.Wb(7,"ion-header"),b.Wb(8,"ion-toolbar",0),b.Wb(9,"ion-segment",2),b.ec("ngModelChange",(function(t){return e.segment=t}))("ionChange",(function(t){return e.segmentChanged(t)})),b.Wb(10,"ion-segment-button",3),b.Mc(11),b.jc(12,"translate"),b.Wb(13,"ion-badge",4),b.Mc(14),b.Vb(),b.Vb(),b.Wb(15,"ion-segment-button",5),b.Mc(16),b.jc(17,"translate"),b.Wb(18,"ion-badge",6),b.Mc(19),b.Vb(),b.Vb(),b.Wb(20,"ion-segment-button",7),b.Mc(21),b.jc(22,"translate"),b.Wb(23,"ion-badge",8),b.Mc(24),b.Vb(),b.Vb(),b.Wb(25,"ion-segment-button",9),b.Mc(26),b.jc(27,"translate"),b.Wb(28,"ion-badge",10),b.Mc(29),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Kc(30,l,3,5,"ion-toolbar",11),b.Vb(),b.Wb(31,"ion-content",12),b.Kc(32,g,1,0,"ng-template",null,13,b.Lc),b.Kc(34,m,3,2,"div",14),b.jc(35,"async"),b.Vb()),2&t){const t=b.zc(33);b.Db(1),b.rc("color","warning"),b.Db(4),b.Nc(b.kc(6,15,"My Order")),b.Db(3),b.rc("color","warning"),b.Db(1),b.rc("ngModel",e.segment),b.Db(2),b.Oc(" ",b.kc(12,17,"New"),""),b.Db(3),b.Nc(e.segmenttotal.get("NEW")),b.Db(2),b.Oc(" ",b.kc(17,19,"InProcess"),""),b.Db(3),b.Nc(e.segmenttotal.get("INPROCESS")),b.Db(2),b.Oc(" ",b.kc(22,21,"Completed"),""),b.Db(3),b.Nc(e.segmenttotal.get("COMPLETED")),b.Db(2),b.Oc(" ",b.kc(27,23,"Cancelled"),""),b.Db(3),b.Nc(e.segmenttotal.get("CANCELLED")),b.Db(1),b.rc("ngIf",0),b.Db(4),b.rc("ngIf",b.kc(35,25,e.myinbox))("ngIfElse",t)}},directives:[a.y,a.hb,a.j,a.f,a.g,a.fb,a.T,a.tb,i.p,i.s,a.U,a.h,o.m,a.s,a.S,a.ub,a.P,o.l,a.k,a.m,a.n,a.o,a.q,a.J,a.z,a.l,a.D,s.f,s.j],pipes:[d.c,o.b],styles:[".otitle[_ngcontent-%COMP%]{font-size:14px}.orderid[_ngcontent-%COMP%]{font-size:10px}.orderamt[_ngcontent-%COMP%]{font-size:18px}ion-card-header[_ngcontent-%COMP%]{padding-bottom:0}tbody[_ngcontent-%COMP%]{font-size:small}.labelt[_ngcontent-%COMP%]{font-weight:lighter}.valuet[_ngcontent-%COMP%]{padding-left:10px}ion-card-content[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.footerCartSection[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-right:10px;margin-left:10px}.paySection[_ngcontent-%COMP%]{background:#15bf15}.codSection[_ngcontent-%COMP%], .paySection[_ngcontent-%COMP%]{color:#fff;position:absolute;padding:6px 16px;border-radius:5px;font-weight:700;right:10px}.codSection[_ngcontent-%COMP%]{background:#de66cf}ion-card-title[_ngcontent-%COMP%]{padding-bottom:0;background:#f5fffa}"]}),t})()}];let M=(()=>{class t{}return t.\u0275mod=b.Ob({type:t}),t.\u0275inj=b.Nb({factory:function(e){return new(e||t)},imports:[[o.c,i.j,a.ib,s.H,s.o,s.b,c.n.forChild(O)]]}),t})()}}]);