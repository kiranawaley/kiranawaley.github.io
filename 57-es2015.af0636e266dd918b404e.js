(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{"+ltH":function(t,e,n){"use strict";n.r(e),n.d(e,"ProductsPageModule",(function(){return V}));var o=n("ofXK"),i=n("3Pt+"),c=n("tyNb"),a=n("TEn/"),r=n("X/JO"),s=n("+DAS"),d=n("ybIa"),p=n("YKLQ"),u=n("i2Ty"),l=n("rIxz"),b=n("Yej2"),g=(n("h3ty"),n("LeCc")),h=n("TIpf"),y=n("q3Kh"),m=n("fXoL"),f=n("0IaG"),x=n("64x4"),w=n("YCbS"),v=n("K88j");const O=["yocameraelement"];function P(t,e){if(1&t){const t=m.Xb();m.Wb(0,"ion-button",4),m.ec("click",(function(){return m.Cc(t),m.ic().navigate("product",{previousUrl:"products"})})),m.Rb(1,"ion-icon",8),m.Vb()}}function C(t,e){if(1&t){const t=m.Xb();m.Wb(0,"ion-item"),m.Wb(1,"div",9),m.Wb(2,"app-appicon",10),m.ec("actionEvent",(function(e){return m.Cc(t),m.ic().downloadProducts(e)})),m.Vb(),m.Wb(3,"app-appicon",10),m.ec("actionEvent",(function(e){return m.Cc(t),m.ic().deleteproducts(e)})),m.Vb(),m.Vb(),m.Vb()}2&t&&(m.Db(2),m.rc("icon","cloud_download")("askquestion",!1)("icontext","Download Products")("isiconwithtext",!0),m.Db(1),m.rc("icon","delete")("askquestion",!0)("icontext","Delete All Products")("isiconwithtext",!0))}function k(t,e){if(1&t&&m.Rb(0,"app-productcard",11),2&t){const t=e.$implicit,n=m.ic();m.rc("product",t)("productlist",n.crudList)("onpage","products")}}let M=(()=>{class t{constructor(t,e,n,o,i,c,a,r,s,p,u,l){this.ycat=t,this.ycamera=e,this.ygen=n,this.alertme=o,this.route=i,this.router=c,this.boardService=a,this.ysharedata=r,this.ydata=s,this.dialog=p,this.excelservice=u,this.yalert=l,this.imagescapturedComp=new Map,this.screenrefresh=!0,this.mystrip=[],this.showre=!1,this.sourcere="",this.refreshme=!1,this.crudList=new d.a("/shop/products",s.getDatabase(),!0,this.ygen.getUid())}deleteproduct(t){this.crudList.removefromList(t)}deleteproducts(t){this.crudList.getListRefer().remove()}copyProduct(t){let e=Object.assign({},t);delete e.$key,this.crudList.addtolist(e)}deletesubcategory(t,e){this.ydata.getDatabase().list("/shop/products/"+e+"/subcategory/"+t).remove()}navigate(t,e){this.ysharedata.setData("currentevent",e),this.router.navigate([t],{queryParams:e})}ngOnInit(){this.events=this.crudList.getList()}addtocart(t,e,n){n&&(e.orderqty=0);let o=e.orderqty?e.orderqty+t:1;o>e.maxqty?this.alertme.openSnackBar(`Maximum quantiy you can order is ${e.maxqty}`,"Ok"):(Object.assign(e,{orderqty:o}),this.ycat.iscartItem(e)?this.ycat.updatequantity(e):1==o&&(this.alertme.openSnackBar(`Your shopping cart updated with ${e.orderqty} quantity`,"Ok"),this.ycat.addtocart(e))),0==e.orderqty&&this.ycat.delete(e)}downloadProducts(t){let e=this.crudList.getListRefer().snapshotChanges().pipe(Object(y.map)(t=>t.map(t=>Object.assign({$key:t.payload.key},t.payload.val())))).subscribe(t=>{let n=[],o=0;t.forEach(t=>{o+=1;let e={$key:t.$key,category:t.category,subcategory:t.subcategory,brand:t.brand,title:t.title,description:t.description,image:t.image,imageuploaded:t.imageuploaded,isorganic:t.isorganic,istopsaver:t.istopsaver,isveg:t.isveg,maxqty:t.maxqty,mrp:t.mrp,price:t.price,outofstock:t.outofstock,uploaded:"TRUE",heavydiscount:t.heavydiscount,newarrival:t.heavydiscount};if(t.variations){let n=[];Object.values(t.variations).forEach(t=>{n.push({description:t.description,mrp:t.mrp,price:t.price,maxqty:t.maxqty})}),n.length>0&&(e.variations=JSON.stringify(Object.values(n)).replace(/,/g,"|"))}else e.variations="";n.push(e)}),0==n.length?this.yalert.openSnackBar("No products for downlowd","Ok"):(this.excelservice.exportAsExcelFile(n,"products"),this.yalert.openSnackBar("All Products will be downloaded...","Ok")),e.unsubscribe()})}}return t.\u0275fac=function(e){return new(e||t)(m.Qb(g.a),m.Qb(b.a),m.Qb(l.a),m.Qb(u.a),m.Qb(c.a),m.Qb(c.g),m.Qb(r.a),m.Qb(p.a),m.Qb(s.a),m.Qb(f.b),m.Qb(h.a),m.Qb(u.a))},t.\u0275cmp=m.Kb({type:t,selectors:[["app-products"]],viewQuery:function(t,e){var n;1&t&&(m.Rc(O,!0),m.Rc(O,!0)),2&t&&(m.yc(n=m.fc())&&(e.yocam=n.first),m.yc(n=m.fc())&&(e.yocamViewChildren=n))},decls:15,vars:6,consts:[[3,"color"],["slot","start"],["slot","end","color","secondary"],[3,"click",4,"ngIf"],[3,"click"],[4,"ngIf"],[1,"productlist"],[3,"product","productlist","onpage",4,"ngFor","ngForOf"],["slot","icon-only","name","add"],[1,"bbcontainer"],[3,"icon","askquestion","icontext","isiconwithtext","actionEvent"],[3,"product","productlist","onpage"]],template:function(t,e){1&t&&(m.Wb(0,"ion-header"),m.Wb(1,"ion-toolbar",0),m.Wb(2,"ion-buttons",1),m.Rb(3,"ion-menu-button"),m.Vb(),m.Wb(4,"ion-title"),m.Lc(5,"Products"),m.Vb(),m.Wb(6,"ion-buttons",2),m.Jc(7,P,2,0,"ion-button",3),m.Wb(8,"ion-button",4),m.ec("click",(function(){return e.navigate("checkout",{})})),m.Rb(9,"app-appcart"),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Wb(10,"ion-content"),m.Jc(11,C,4,8,"ion-item",5),m.Wb(12,"div",6),m.Jc(13,k,1,3,"app-productcard",7),m.jc(14,"async"),m.Vb(),m.Vb()),2&t&&(m.Db(1),m.rc("color","warning"),m.Db(6),m.rc("ngIf",e.ygen.isAdmin()&&e.ygen.canAddProducts()),m.Db(4),m.rc("ngIf",e.ygen.isAdmin()),m.Db(2),m.rc("ngForOf",m.kc(14,4,e.events)))},directives:[a.v,a.ab,a.j,a.G,a.Y,o.m,a.i,x.a,a.s,o.l,a.w,a.y,w.a,v.a],pipes:[o.b],styles:[".bbcontainer[_ngcontent-%COMP%]{width:100%}.bbcontainer[_ngcontent-%COMP%], .bcontainer[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.subcataction[_ngcontent-%COMP%]{display:flex}app-appicon[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%], app-appicon[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:36px}.productCard[_ngcontent-%COMP%]{display:inline-block;white-space:pre-line;padding:2px auto;width:calc(70% - 20px);height:auto;box-shadow:0 4px 16px rgba(156,153,153,.97);--box-shadow:0 4px 16px rgba(156,153,153,0.97)}.cardBorderRadius[_ngcontent-%COMP%]{--border-radius:8px;border-radius:8px;width:100%;height:100%;min-width:200px}.productImage[_ngcontent-%COMP%]{padding:0 40px;position:relative;margin-top:10px}.discountSection[_ngcontent-%COMP%]{background:#15bf15;color:#fff;position:absolute;padding:6px 16px;border-radius:5px;font-weight:700;margin-top:13px;left:10px}.soldoutSection[_ngcontent-%COMP%]{background:var(--ion-color-design);color:#db4ba4;margin-top:-16px}.outofstockSection[_ngcontent-%COMP%], .soldoutSection[_ngcontent-%COMP%]{position:absolute;padding:6px 16px;border-radius:5px;font-weight:700;right:10px}.outofstockSection[_ngcontent-%COMP%]{background:#b4b108;color:#fff;margin-top:-24%}.dFlexAlignItemCenter[_ngcontent-%COMP%]{display:flex;align-items:center}.subTitle[_ngcontent-%COMP%]{font-size:16px;text-decoration:line-through;padding-left:16px;color:#000}.productDesc[_ngcontent-%COMP%]{color:var(--ion-color-dark);padding-bottom:16px}.productQty[_ngcontent-%COMP%]{color:#000;font-weight:700}.inner-scroll[_ngcontent-%COMP%]   .scroll-y[_ngcontent-%COMP%]   .overscroll[_ngcontent-%COMP%]{padding:0}ion-card[_ngcontent-%COMP%]{width:100%;height:100%;margin-left:unset;margin-right:unset;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-bottom:0}img[_ngcontent-%COMP%]{height:180px;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;margin:auto}.button-inner[_ngcontent-%COMP%]{justify-content:space-between}ion-button[_ngcontent-%COMP%]{height:auto;color:#8b0000}.productlist[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;align-items:stretch}"]}),t})();var _=n("hVaU"),q=n("IZvt"),L=n("4pxM");const Q=[{path:"",component:M}];let V=(()=>{class t{}return t.\u0275mod=m.Ob({type:t}),t.\u0275inj=m.Nb({factory:function(e){return new(e||t)},imports:[[o.c,i.i,a.bb,_.a,q.a,L.a,c.k.forChild(Q)]]}),t})()}}]);