function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,n,e){return n&&_defineProperties(t.prototype,n),e&&_defineProperties(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{"+ltH":function(t,n,e){"use strict";e.r(n),e.d(n,"ProductsPageModule",(function(){return Q}));var o=e("ofXK"),i=e("3Pt+"),c=e("tyNb"),a=e("TEn/"),r=e("X/JO"),s=e("+DAS"),d=e("ybIa"),u=e("YKLQ"),p=e("i2Ty"),l=e("rIxz"),b=e("Yej2"),g=(e("h3ty"),e("LeCc")),f=e("TIpf"),h=e("q3Kh"),y=e("fXoL"),m=e("0IaG"),v=e("64x4"),x=e("YCbS"),C=e("1jcm"),w=e("K88j"),k=["yocameraelement"];function O(t,n){if(1&t){var e=y.Xb();y.Wb(0,"ion-button",4),y.ec("click",(function(){return y.Cc(e),y.ic().navigate("product",{previousUrl:"products"})})),y.Rb(1,"ion-icon",8),y.Vb()}}function P(t,n){if(1&t){var e=y.Xb();y.Wb(0,"ion-item"),y.Wb(1,"div",9),y.Wb(2,"app-appicon",10),y.ec("actionEvent",(function(t){return y.Cc(e),y.ic().downloadProducts(t)})),y.Vb(),y.Wb(3,"div"),y.Wb(4,"mat-slide-toggle",11),y.ec("ngModelChange",(function(t){return y.Cc(e),y.ic().uploaded=t})),y.Mc(5,"Uploaded Flag "),y.Vb(),y.Vb(),y.Wb(6,"app-appicon",10),y.ec("actionEvent",(function(t){return y.Cc(e),y.ic().deleteproducts(t)})),y.Vb(),y.Vb(),y.Vb()}if(2&t){var o=y.ic();y.Db(2),y.rc("icon","cloud_download")("askquestion",!1)("icontext","Download Products")("isiconwithtext",!0),y.Db(2),y.rc("ngModel",o.uploaded),y.Db(2),y.rc("icon","delete")("askquestion",!0)("icontext","Delete All Products")("isiconwithtext",!0)}}function M(t,n){if(1&t){var e=y.Xb();y.Wb(0,"ion-item"),y.Wb(1,"div",9),y.Wb(2,"app-appicon",10),y.ec("actionEvent",(function(){return y.Cc(e),y.ic().ygen.routeto("uploadcatalog",{})})),y.Vb(),y.Vb(),y.Vb()}2&t&&(y.Db(2),y.rc("icon","cloud_upload")("askquestion",!1)("icontext","Upload Products")("isiconwithtext",!0))}function _(t,n){if(1&t&&y.Rb(0,"app-productcard",12),2&t){var e=n.$implicit,o=y.ic();y.rc("product",e)("productlist",o.crudList)("onpage","products")}}var q,V,W=((q=function(){function t(n,e,o,i,c,a,r,s,u,p,l,b){_classCallCheck(this,t),this.ycat=n,this.ycamera=e,this.ygen=o,this.alertme=i,this.route=c,this.router=a,this.boardService=r,this.ysharedata=s,this.ydata=u,this.dialog=p,this.excelservice=l,this.yalert=b,this.imagescapturedComp=new Map,this.screenrefresh=!0,this.uploaded=!0,this.mystrip=[],this.showre=!1,this.sourcere="",this.refreshme=!1,this.crudList=new d.a("/shop/products",u.getDatabase(),!0,this.ygen.getUid())}return _createClass(t,[{key:"deleteproduct",value:function(t){this.crudList.removefromList(t)}},{key:"deleteproducts",value:function(t){this.crudList.getListRefer().remove()}},{key:"copyProduct",value:function(t){var n=Object.assign({},t);delete n.$key,this.crudList.addtolist(n)}},{key:"deletesubcategory",value:function(t,n){this.ydata.getDatabase().list("/shop/products/"+n+"/subcategory/"+t).remove()}},{key:"navigate",value:function(t,n){this.ysharedata.setData("currentevent",n),this.router.navigate([t],{queryParams:n})}},{key:"ngOnInit",value:function(){this.events=this.crudList.getList()}},{key:"addtocart",value:function(t,n,e){e&&(n.orderqty=0);var o=n.orderqty?n.orderqty+t:1;o>n.maxqty?this.alertme.openSnackBar("Maximum quantiy you can order is ".concat(n.maxqty),"Ok"):(Object.assign(n,{orderqty:o}),this.ycat.iscartItem(n)?this.ycat.updatequantity(n):1==o&&(this.alertme.openSnackBar("Your shopping cart updated with ".concat(n.orderqty," quantity"),"Ok"),this.ycat.addtocart(n))),0==n.orderqty&&this.ycat.delete(n)}},{key:"downloadProducts",value:function(t){var n=this,e=this.crudList.getListRefer().snapshotChanges().pipe(Object(h.map)((function(t){return t.map((function(t){return Object.assign({$key:t.payload.key},t.payload.val())}))}))).subscribe((function(t){var o=[];t.forEach((function(t){var e={$key:JSON.stringify(t.$key),category:t.category,subcategory:t.subcategory,brand:t.brand,title:t.title,description:t.description,image:t.image,imageuploaded:t.imageuploaded,isorganic:t.isorganic,istopsaver:t.istopsaver,isveg:t.isveg,maxqty:t.maxqty,mrp:t.mrp,price:t.price,outofstock:t.outofstock,uploaded:n.uploaded,heavydiscount:t.heavydiscount,newarrival:t.heavydiscount};if(t.variations){var i=[];Object.values(t.variations).forEach((function(t){i.push({description:t.description,mrp:t.mrp,price:t.price,maxqty:t.maxqty})})),i.length>0&&(e.variations=JSON.stringify(Object.values(i)).replace(/,/g,"|"))}else e.variations="";o.push(e)})),0==o.length?n.yalert.openSnackBar("No products for downlowd","Ok"):(n.excelservice.exportAsExcelFile(o,"products"),n.yalert.openSnackBar("All Products will be downloaded...","Ok")),e.unsubscribe()}))}}]),t}()).\u0275fac=function(t){return new(t||q)(y.Qb(g.a),y.Qb(b.a),y.Qb(l.a),y.Qb(p.a),y.Qb(c.a),y.Qb(c.g),y.Qb(r.a),y.Qb(u.a),y.Qb(s.a),y.Qb(m.b),y.Qb(f.a),y.Qb(p.a))},q.\u0275cmp=y.Kb({type:q,selectors:[["app-products"]],viewQuery:function(t,n){var e;1&t&&(y.Sc(k,!0),y.Sc(k,!0)),2&t&&(y.yc(e=y.fc())&&(n.yocam=e.first),y.yc(e=y.fc())&&(n.yocamViewChildren=e))},decls:16,vars:7,consts:[[3,"color"],["slot","start"],["slot","end","color","secondary"],[3,"click",4,"ngIf"],[3,"click"],[4,"ngIf"],[1,"productlist"],[3,"product","productlist","onpage",4,"ngFor","ngForOf"],["slot","icon-only","name","add"],[1,"bbcontainer"],[3,"icon","askquestion","icontext","isiconwithtext","actionEvent"],[3,"ngModel","ngModelChange"],[3,"product","productlist","onpage"]],template:function(t,n){1&t&&(y.Wb(0,"ion-header"),y.Wb(1,"ion-toolbar",0),y.Wb(2,"ion-buttons",1),y.Rb(3,"ion-menu-button"),y.Vb(),y.Wb(4,"ion-title"),y.Mc(5,"Products"),y.Vb(),y.Wb(6,"ion-buttons",2),y.Kc(7,O,2,0,"ion-button",3),y.Wb(8,"ion-button",4),y.ec("click",(function(){return n.navigate("checkout",{})})),y.Rb(9,"app-appcart"),y.Vb(),y.Vb(),y.Vb(),y.Vb(),y.Wb(10,"ion-content"),y.Kc(11,P,7,9,"ion-item",5),y.Kc(12,M,3,4,"ion-item",5),y.Wb(13,"div",6),y.Kc(14,_,1,3,"app-productcard",7),y.jc(15,"async"),y.Vb(),y.Vb()),2&t&&(y.Db(1),y.rc("color","warning"),y.Db(6),y.rc("ngIf",n.ygen.isAdmin()&&n.ygen.canAddProducts()),y.Db(4),y.rc("ngIf",n.ygen.isAdmin()),y.Db(1),y.rc("ngIf",n.ygen.isAdmin()),y.Db(2),y.rc("ngForOf",y.kc(15,5,n.events)))},directives:[a.y,a.fb,a.j,a.L,a.db,o.m,a.i,v.a,a.s,o.l,a.z,a.B,x.a,C.a,i.n,i.q,w.a],pipes:[o.b],styles:[".bbcontainer[_ngcontent-%COMP%]{justify-content:space-around;width:100%}.bbcontainer[_ngcontent-%COMP%], .bcontainer[_ngcontent-%COMP%]{display:flex;flex-direction:row}.bcontainer[_ngcontent-%COMP%]{justify-content:space-between}.subcataction[_ngcontent-%COMP%]{display:flex}app-appicon[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%], app-appicon[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:36px}.productCard[_ngcontent-%COMP%]{display:inline-block;white-space:pre-line;padding:2px auto;width:calc(70% - 20px);height:auto;box-shadow:0 4px 16px rgba(156,153,153,.97);--box-shadow:0 4px 16px rgba(156,153,153,0.97)}.cardBorderRadius[_ngcontent-%COMP%]{--border-radius:8px;border-radius:8px;width:100%;height:100%;min-width:200px}.productImage[_ngcontent-%COMP%]{padding:0 40px;position:relative;margin-top:10px}.discountSection[_ngcontent-%COMP%]{background:#15bf15;color:#fff;position:absolute;padding:6px 16px;border-radius:5px;font-weight:700;margin-top:13px;left:10px}.soldoutSection[_ngcontent-%COMP%]{background:var(--ion-color-design);color:#db4ba4;margin-top:-16px}.outofstockSection[_ngcontent-%COMP%], .soldoutSection[_ngcontent-%COMP%]{position:absolute;padding:6px 16px;border-radius:5px;font-weight:700;right:10px}.outofstockSection[_ngcontent-%COMP%]{background:#b4b108;color:#fff;margin-top:-24%}.dFlexAlignItemCenter[_ngcontent-%COMP%]{display:flex;align-items:center}.subTitle[_ngcontent-%COMP%]{font-size:16px;text-decoration:line-through;padding-left:16px;color:#000}.productDesc[_ngcontent-%COMP%]{color:var(--ion-color-dark);padding-bottom:16px}.productQty[_ngcontent-%COMP%]{color:#000;font-weight:700}.inner-scroll[_ngcontent-%COMP%]   .scroll-y[_ngcontent-%COMP%]   .overscroll[_ngcontent-%COMP%]{padding:0}ion-card[_ngcontent-%COMP%]{width:100%;height:100%;margin-left:unset;margin-right:unset;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-bottom:0}img[_ngcontent-%COMP%]{height:180px;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;margin:auto}.button-inner[_ngcontent-%COMP%]{justify-content:space-between}ion-button[_ngcontent-%COMP%]{height:auto;color:#8b0000}.productlist[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;align-items:stretch}"]}),q),j=e("hVaU"),D=e("IZvt"),S=e("4pxM"),L=[{path:"",component:W}],Q=((V=function t(){_classCallCheck(this,t)}).\u0275mod=y.Ob({type:V}),V.\u0275inj=y.Nb({factory:function(t){return new(t||V)},imports:[[o.c,i.i,a.gb,j.a,D.a,S.a,c.k.forChild(L)]]}),V)}}]);