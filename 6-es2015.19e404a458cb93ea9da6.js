(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{HAxo:function(t,i,c){"use strict";c.r(i),c.d(i,"TankerPageModule",(function(){return T}));var n=c("ofXK"),o=c("3Pt+"),e=c("tyNb"),r=c("TEn/"),s=c("mrSG"),a=c("PWOX"),b=c("X/JO"),l=c("lJxs"),u=c("rIxz"),h=c("YKLQ"),m=c("fXoL"),d=c("sYmb"),g=c("qd/x");const f=["mySearchbar"],p=["ocontent"];function k(t,i){if(1&t){const t=m.Xb();m.Wb(0,"ion-item"),m.Wb(1,"ion-avatar",10),m.ec("click",(function(){m.Cc(t);const c=i.$implicit;return m.ic(2).showPhoto(c.image,c.name)})),m.Rb(2,"img",11),m.Vb(),m.Wb(3,"h2"),m.Lc(4),m.Vb(),m.Wb(5,"p"),m.Lc(6),m.jc(7,"translate"),m.Vb(),m.Wb(8,"p"),m.Lc(9),m.Vb(),m.Wb(10,"button",12),m.ec("click",(function(){m.Cc(t);const c=i.$implicit;return m.ic(2).gotoExternal("tel:"+c.mobile)})),m.Rb(11,"ion-icon",13),m.Lc(12),m.jc(13,"translate"),m.Vb(),m.Vb()}if(2&t){const t=i.$implicit,c=m.ic(2);m.Db(2),m.rc("src",c.ygen.getConditionalPhoto(t.image),m.Ec),m.Db(2),m.Nc("",t.name," "),m.Db(2),m.Mc(m.kc(7,5,t.category)),m.Db(3),m.Mc(t.vehicalnum),m.Db(3),m.Nc(" ",m.kc(13,7,"Call")," ")}}const y=function(){return{check:!0,property:"needParking"}};function V(t,i){if(1&t&&(m.Wb(0,"ion-row"),m.Wb(1,"ion-col",9),m.Wb(2,"ion-list"),m.Wb(3,"ion-item"),m.Wb(4,"h2"),m.Lc(5),m.jc(6,"translate"),m.Vb(),m.Vb(),m.Jc(7,k,14,9,"ion-item",8),m.jc(8,"inpipe"),m.jc(9,"async"),m.Vb(),m.Vb(),m.Vb()),2&t){const t=m.ic();m.Db(5),m.Mc(m.kc(6,2,"Occupied Visitor Parking")),m.Db(2),m.rc("ngForOf",m.lc(8,4,m.kc(9,7,t.workers),m.uc(9,y)))}}function W(t,i){if(1&t&&(m.Wb(0,"p"),m.Lc(1),m.jc(2,"translate"),m.Vb()),2&t){const t=m.ic().$implicit;m.Db(1),m.Oc("",m.kc(2,2,"Vehical Number")," :",t.vehicalnum,"")}}function D(t,i){1&t&&(m.Wb(0,"p"),m.Lc(1,"\xa0\xa0"),m.Wb(2,"b",19),m.Lc(3),m.jc(4,"translate"),m.Vb(),m.Vb()),2&t&&(m.Db(3),m.Mc(m.kc(4,1,"Out")))}function v(t,i){1&t&&(m.Wb(0,"p"),m.Lc(1,"\xa0\xa0"),m.Wb(2,"b",20),m.Lc(3),m.jc(4,"translate"),m.Vb(),m.Vb()),2&t&&(m.Db(3),m.Mc(m.kc(4,1,"In")))}function C(t,i){if(1&t){const t=m.Xb();m.Wb(0,"ion-button",21),m.ec("click",(function(){m.Cc(t);const i=m.ic().$implicit;return m.ic(2).in(i)})),m.Rb(1,"ion-icon",22),m.Lc(2),m.jc(3,"translate"),m.Vb()}2&t&&(m.Db(2),m.Nc(" ",m.kc(3,1,"Entering In")," "))}function w(t,i){if(1&t){const t=m.Xb();m.Wb(0,"ion-button",23),m.ec("click",(function(){m.Cc(t);const i=m.ic().$implicit;return m.ic(2).out(i)})),m.Rb(1,"ion-icon",24),m.Lc(2),m.jc(3,"translate"),m.Vb()}2&t&&(m.Db(2),m.Nc(" ",m.kc(3,1,"Exiting Out")," "))}function I(t,i){if(1&t){const t=m.Xb();m.Wb(0,"ion-item-options",25),m.Wb(1,"ion-item-option",26),m.ec("click",(function(){m.Cc(t);const i=m.ic().$implicit;return m.ic(2).history(i)})),m.Rb(2,"ion-icon",27),m.Vb(),m.Vb()}}function L(t,i){if(1&t){const t=m.Xb();m.Wb(0,"ion-item-options",28),m.Wb(1,"ion-item-option",29),m.ec("click",(function(){m.Cc(t);const i=m.ic().$implicit;return m.ic(2).gotoExternal("tel:"+i.mobile)})),m.Rb(2,"ion-icon",30),m.Vb(),m.Wb(3,"ion-item-option",23),m.ec("click",(function(){m.Cc(t);const i=m.ic().$implicit;return m.ic(2).delete(i)})),m.Rb(4,"ion-icon",31),m.Vb(),m.Wb(5,"ion-item-option",32),m.ec("click",(function(){m.Cc(t);const i=m.ic().$implicit;return m.ic(2).editMe(i)})),m.Rb(6,"ion-icon",33),m.Vb(),m.Vb()}}function O(t,i){if(1&t){const t=m.Xb();m.Wb(0,"ion-item-sliding"),m.Wb(1,"ion-item"),m.Wb(2,"ion-avatar",14),m.ec("click",(function(){m.Cc(t);const c=i.$implicit;return m.ic(2).showPhoto(c.image,c.name)})),m.Rb(3,"img",11),m.Vb(),m.Wb(4,"ion-label"),m.Wb(5,"h2"),m.Lc(6),m.Vb(),m.Wb(7,"p"),m.Lc(8),m.jc(9,"translate"),m.Vb(),m.Jc(10,W,3,4,"p",7),m.Wb(11,"p"),m.Lc(12),m.Vb(),m.Jc(13,D,5,3,"p",7),m.Jc(14,v,5,3,"p",7),m.Jc(15,C,4,3,"ion-button",15),m.Jc(16,w,4,3,"ion-button",16),m.Vb(),m.Vb(),m.Jc(17,I,3,0,"ion-item-options",17),m.Jc(18,L,7,0,"ion-item-options",18),m.Vb()}if(2&t){const t=i.$implicit,c=m.ic(2);m.Db(3),m.rc("src",c.ygen.getConditionalPhoto(t.image),m.Ec),m.Db(3),m.Mc(t.name),m.Db(2),m.Mc(m.kc(9,11,t.category)),m.Db(2),m.rc("ngIf",t.needParking),m.Db(2),m.Mc(c.ygen.formatTimestampToDate(t.statusdate)),m.Db(1),m.rc("ngIf","false"==t.in),m.Db(1),m.rc("ngIf","true"==t.in),m.Db(1),m.rc("ngIf",c.canido&&"false"==t.in),m.Db(1),m.rc("ngIf",c.canido&&"true"==t.in),m.Db(1),m.rc("ngIf",c.canido),m.Db(1),m.rc("ngIf",c.canido)}}function j(t,i){if(1&t&&(m.Wb(0,"ion-list"),m.Wb(1,"ion-item"),m.Wb(2,"h1"),m.Lc(3),m.jc(4,"translate"),m.Wb(5,"b"),m.Lc(6),m.Vb(),m.Vb(),m.Vb(),m.Jc(7,O,19,13,"ion-item-sliding",8),m.Wb(8,"ion-row"),m.Wb(9,"h1"),m.Lc(10),m.jc(11,"translate"),m.Vb(),m.Vb(),m.Vb()),2&t){const t=m.ic();m.Db(3),m.Nc("",m.kc(4,4,"Searched list")," \xa0"),m.Db(3),m.Mc(t.tempItems.length),m.Db(1),m.rc("ngForOf",t.tempItems),m.Db(3),m.Nc(" \xa0",m.kc(11,6,"Out List"),"")}}function $(t,i){if(1&t&&(m.Wb(0,"p"),m.Lc(1),m.jc(2,"translate"),m.Vb()),2&t){const t=m.ic().$implicit;m.Db(1),m.Oc("",m.kc(2,2,"Vehical Number")," :",t.vehicalnum,"")}}function M(t,i){if(1&t){const t=m.Xb();m.Wb(0,"ion-button",21),m.ec("click",(function(){m.Cc(t);const i=m.ic().$implicit;return m.ic().in(i)})),m.Rb(1,"ion-icon",22),m.Lc(2),m.jc(3,"translate"),m.Vb()}2&t&&(m.Db(2),m.Nc(" ",m.kc(3,1,"Entering In")," "))}function P(t,i){if(1&t){const t=m.Xb();m.Wb(0,"ion-item-options",25),m.Wb(1,"ion-item-option",26),m.ec("click",(function(){m.Cc(t);const i=m.ic().$implicit;return m.ic().history(i)})),m.Rb(2,"ion-icon",27),m.Vb(),m.Vb()}}function J(t,i){if(1&t){const t=m.Xb();m.Wb(0,"ion-item-options",28),m.Wb(1,"ion-item-option",29),m.ec("click",(function(){m.Cc(t);const i=m.ic().$implicit;return m.ic().gotoExternal("tel:"+i.mobile)})),m.Rb(2,"ion-icon",30),m.Vb(),m.Wb(3,"ion-item-option",23),m.ec("click",(function(){m.Cc(t);const i=m.ic().$implicit;return m.ic().delete(i)})),m.Rb(4,"ion-icon",31),m.Vb(),m.Wb(5,"ion-item-option",32),m.ec("click",(function(){m.Cc(t);const i=m.ic().$implicit;return m.ic().editMe(i)})),m.Rb(6,"ion-icon",33),m.Vb(),m.Vb()}}function R(t,i){if(1&t){const t=m.Xb();m.Wb(0,"ion-item-sliding"),m.Wb(1,"ion-item"),m.Wb(2,"ion-avatar",14),m.ec("click",(function(){m.Cc(t);const c=i.$implicit;return m.ic().showPhoto(c.image,c.name)})),m.Rb(3,"img",11),m.Vb(),m.Wb(4,"ion-label"),m.Wb(5,"h2"),m.Lc(6),m.Vb(),m.Wb(7,"p"),m.Lc(8),m.jc(9,"translate"),m.Vb(),m.Jc(10,$,3,4,"p",7),m.Wb(11,"p"),m.Lc(12),m.Vb(),m.Wb(13,"p"),m.Lc(14,"\xa0\xa0"),m.Wb(15,"b",19),m.Lc(16),m.jc(17,"translate"),m.Vb(),m.Vb(),m.Jc(18,M,4,3,"ion-button",15),m.Vb(),m.Vb(),m.Jc(19,P,3,0,"ion-item-options",17),m.Jc(20,J,7,0,"ion-item-options",18),m.Vb()}if(2&t){const t=i.$implicit,c=m.ic();m.Db(3),m.rc("src",c.ygen.getConditionalPhoto(t.image),m.Ec),m.Db(3),m.Mc(t.name),m.Db(2),m.Mc(m.kc(9,9,t.category)),m.Db(2),m.rc("ngIf",t.needParking),m.Db(2),m.Mc(c.ygen.formatTimestampToDate(t.statusdate)),m.Db(4),m.Mc(m.kc(17,11,"Out")),m.Db(2),m.rc("ngIf",c.canido),m.Db(1),m.rc("ngIf",c.canido),m.Db(1),m.rc("ngIf",c.canido)}}const S=function(){return{check:"Tanker",property:"category"}};let x=(()=>{class t{constructor(t,i,c,n,o,e,r,s){this.modalCtrl=t,this.loadingCtrl=i,this.navCtrl=c,this.route=n,this.authService=o,this.boardService=e,this.ygen=r,this.ydataservice=s,this.viewHistory=!1,this.currentHistory=[],this.showOccupied=!1,this.current={name:""},this.isApp=!0,this.searchQuery="",this.tempItems=new Array,this.items=new Array,this.showButton=!0,this.occupiedVisitoParking=0,this.totalVisitoParking=0,this.historyCalc=0,this.showVisitorCounter=!1,this.workers=e.getWorkers(),this.workers.forEach(t=>{this.items=t}),this.workers.pipe(Object(l.a)(t=>(this.historyCalc=0,t.filter(t=>"Tanker"==t.category)))).forEach(t=>{t.forEach(t=>{this.historyCalc=this.historyCalc+Object.keys(t.history).length})}),o.authorizeForAction("gate")&&(this.canido=!0),e.getItems().subscribe(t=>{this.showVisitorCounter=t.istvp,this.totalVisitoParking=t.tvp})}ngOnInit(){}getShowAvailable(t){return 0==t?"dadared":t<=5?"dadayellow":"dada"}openModal(t,i){return Object(s.a)(this,void 0,void 0,(function*(){this.ydataservice.setData("current",t),this.ydataservice.setData("currentHistory",i),this.ydataservice.setData("comingfrom","inpage"),this.route.navigateByUrl("/history")}))}ionViewDidLoad(){}isamember(){return!0}out(t){let i=+new Date;this.searchbar.value="",this.boardService.updateOutHistory(this.boardService.getWorkersCrud(),t,{indate:t.statusdate,outdate:i});let c={in:"false",statusdate:i,needParking:!1};this.boardService.getWorkersCrud().update(t.$key,c)}getOccupied(t){return t.needParking?"occu":""}history(t){this.current=t,this.currentHistory=[];for(let[i,c]of Object.entries(t.history))this.currentHistory.push(c);this.openModal(this.current,this.currentHistory)}historyDone(){this.current={name:""},this.currentHistory=[],this.viewHistory=!1}in(t){this.ydataservice.setData("update",this.boardService.getWorkersCrud()),this.ydataservice.setData("comingin",t),this.searchbar.value="",this.route.navigateByUrl("/enterdetail")}removeFromSearch(t){this.tempItems.findIndex(i=>i.$key==t.$key)>-1&&(this.tempItems=this.tempItems.filter(i=>i.$key!=t.$key))}delete(t){this.boardService.updateOutHistory(this.boardService.getWorkersCrud(),t,{indate:t.statusdate,outdate:""}),this.boardService.getWorkersCrud().remove(t.$key),this.removeFromSearch(t)}editMe(t){}gotoExternal(t){window.location.href=t}showPhoto(t,i){this.ygen.openimage(t,i)}getItems(t){this.ocontent.scrollToTop(100),console.log(" search ready ",this.items);let i=t.target.value;this.searchQuery=i,i&&""!=i.trim()&&i.length>=2&&(this.tempItems=this.items.filter(t=>(console.log("item",t),t.name.toLowerCase().indexOf(i.toLowerCase())>-1)))}}return t.\u0275fac=function(i){return new(i||t)(m.Qb(r.kb),m.Qb(r.ib),m.Qb(r.lb),m.Qb(e.g),m.Qb(a.a),m.Qb(b.a),m.Qb(u.a),m.Qb(h.a))},t.\u0275cmp=m.Kb({type:t,selectors:[["app-tanker"]],viewQuery:function(t,i){var c;1&t&&(m.Rc(f,!0),m.Rc(p,!0)),2&t&&(m.yc(c=m.fc())&&(i.searchbar=c.first),m.yc(c=m.fc())&&(i.ocontent=c.first))},decls:16,vars:17,consts:[[3,"color"],["debounce","100",3,"placeholder","ionChange"],["mySearchbar",""],["id","notification"],[1,"sumcounter"],["padding",""],["ocontent",""],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"dadao"],["item-start","",3,"click"],[3,"src"],["ion-button","","color","secondary",3,"click"],["name","call"],["slot","start",3,"click"],["color","success",3,"click",4,"ngIf"],["color","danger",3,"click",4,"ngIf"],["side","start",4,"ngIf"],["side","end",4,"ngIf"],[2,"color","red"],[2,"color","green"],["color","success",3,"click"],["slot","icon-only","name","log-in"],["color","danger",3,"click"],["slot","icon-only","name","log-out"],["side","start"],[3,"click"],["slot","icon-only","name","book"],["side","end"],["color","secondary",3,"click"],["slot","icon-only","name","call"],["slot","icon-only","name","trash"],["color","warning",3,"click"],["slot","icon-only","name","create"]],template:function(t,i){1&t&&(m.Wb(0,"ion-header"),m.Wb(1,"ion-toolbar",0),m.Wb(2,"ion-searchbar",1,2),m.ec("ionChange",(function(t){return i.getItems(t)})),m.jc(4,"translate"),m.Vb(),m.Vb(),m.Vb(),m.Wb(5,"ion-item",3),m.Wb(6,"span",4),m.Lc(7),m.jc(8,"translate"),m.Vb(),m.Vb(),m.Wb(9,"ion-content",5,6),m.Jc(11,V,10,10,"ion-row",7),m.Jc(12,j,12,8,"ion-list",7),m.Jc(13,R,21,13,"ion-item-sliding",8),m.jc(14,"inpipe"),m.jc(15,"async"),m.Vb()),2&t&&(m.Db(1),m.rc("color","warning"),m.Db(1),m.sc("placeholder",m.kc(4,7,"Search Tanker")),m.Db(5),m.Oc("",m.kc(8,9,"Total")," - ",i.historyCalc,""),m.Db(4),m.rc("ngIf",0),m.Db(1),m.rc("ngIf",(null==i.searchQuery?null:i.searchQuery.length)>=1),m.Db(1),m.rc("ngForOf",m.lc(14,11,m.kc(15,14,i.workers),m.uc(16,S))))},directives:[r.y,r.fb,r.Q,r.rb,r.B,r.s,n.m,n.l,r.P,r.r,r.I,r.e,r.z,r.G,r.H,r.i,r.F,r.E],pipes:[d.c,g.a,n.b],styles:[".counter[_ngcontent-%COMP%]{font-size:2em!important;background-color:#faebd7;width:100px}.counter[_ngcontent-%COMP%], .sumcounter[_ngcontent-%COMP%]{float:right;font-weight:bolder;text-align:center}.sumcounter[_ngcontent-%COMP%]{font-size:2.5em;background-color:#aeed85;width:100%}#notification[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;z-index:99;top:0;background-color:#000}"]}),t})();var E=c("hVaU"),Q=c("IZvt"),X=c("4pxM");const H=[{path:"",component:x}];let T=(()=>{class t{}return t.\u0275mod=m.Ob({type:t}),t.\u0275inj=m.Nb({factory:function(i){return new(i||t)},imports:[[n.c,o.i,r.gb,E.a,Q.a,X.a,e.k.forChild(H)]]}),t})()}}]);