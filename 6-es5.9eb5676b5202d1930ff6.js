function _slicedToArray(t,i){return _arrayWithHoles(t)||_iterableToArrayLimit(t,i)||_unsupportedIterableToArray(t,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,i){if(t){if("string"==typeof t)return _arrayLikeToArray(t,i);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(t,i):void 0}}function _arrayLikeToArray(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=new Array(i);e<i;e++)n[e]=t[e];return n}function _iterableToArrayLimit(t,i){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var e=[],n=!0,c=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done)&&(e.push(o.value),!i||e.length!==i);n=!0);}catch(s){c=!0,r=s}finally{try{n||null==a.return||a.return()}finally{if(c)throw r}}return e}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,i,e){return i&&_defineProperties(t.prototype,i),e&&_defineProperties(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{kl4L:function(t,i,e){"use strict";e.r(i),e.d(i,"OutPageModule",(function(){return T}));var n=e("ofXK"),c=e("3Pt+"),r=e("tyNb"),o=e("TEn/"),a=e("mrSG"),s=e("lJxs"),b=e("fXoL"),u=e("OJQs"),l=e("sYmb"),f=["mySearchbar"],h=["ocontent"];function m(t,i){if(1&t){var e=b.Xb();b.Wb(0,"ion-item"),b.Wb(1,"ion-avatar",8),b.ec("click",(function(){b.Cc(e);var t=i.$implicit;return b.ic(2).showPhoto(t.image,t.name)})),b.Rb(2,"img",9),b.Vb(),b.Wb(3,"h2"),b.Mc(4),b.Vb(),b.Wb(5,"p"),b.Mc(6),b.jc(7,"translate"),b.Vb(),b.Wb(8,"p"),b.Mc(9),b.Vb(),b.Wb(10,"button",10),b.ec("click",(function(){b.Cc(e);var t=i.$implicit;return b.ic(2).gotoExternal("tel:"+t.mobile)})),b.Rb(11,"ion-icon",11),b.Mc(12),b.jc(13,"translate"),b.Vb(),b.Vb()}if(2&t){var n=i.$implicit,c=b.ic(2);b.Db(2),b.rc("src",c.ygen.getConditionalPhoto(n.image),b.Ec),b.Db(2),b.Oc("",n.name," "),b.Db(2),b.Nc(b.kc(7,5,n.category)),b.Db(3),b.Nc(n.vehicalnum),b.Db(3),b.Oc(" ",b.kc(13,7,"Call")," ")}}var d=function(){return{check:!0,property:"needParking"}};function p(t,i){if(1&t&&(b.Wb(0,"ion-row"),b.Wb(1,"ion-col",7),b.Wb(2,"ion-list"),b.Wb(3,"ion-item"),b.Wb(4,"h2"),b.Mc(5),b.jc(6,"translate"),b.Vb(),b.Vb(),b.Kc(7,m,14,9,"ion-item",6),b.jc(8,"inpipe"),b.jc(9,"async"),b.Vb(),b.Vb(),b.Vb()),2&t){var e=b.ic();b.Db(5),b.Nc(b.kc(6,2,"Occupied Visitor Parking")),b.Db(2),b.rc("ngForOf",b.lc(8,4,b.kc(9,7,e.workers),b.uc(9,d)))}}function g(t,i){if(1&t&&(b.Wb(0,"p"),b.Mc(1),b.jc(2,"translate"),b.Vb()),2&t){var e=b.ic().$implicit;b.Db(1),b.Pc("",b.kc(2,2,"Vehical Number")," :",e.vehicalnum,"")}}function y(t,i){1&t&&(b.Wb(0,"p"),b.Mc(1,"\xa0\xa0"),b.Wb(2,"b",17),b.Mc(3),b.jc(4,"translate"),b.Vb(),b.Vb()),2&t&&(b.Db(3),b.Nc(b.kc(4,1,"Out")))}function v(t,i){1&t&&(b.Wb(0,"p"),b.Mc(1,"\xa0\xa0"),b.Wb(2,"b",18),b.Mc(3),b.jc(4,"translate"),b.Vb(),b.Vb()),2&t&&(b.Db(3),b.Nc(b.kc(4,1,"In")))}function k(t,i){if(1&t){var e=b.Xb();b.Wb(0,"ion-button",19),b.ec("click",(function(){b.Cc(e);var t=b.ic().$implicit;return b.ic(2).in(t)})),b.Rb(1,"ion-icon",20),b.Mc(2),b.jc(3,"translate"),b.Vb()}2&t&&(b.Db(2),b.Oc(" ",b.kc(3,1,"Entering In")," "))}function V(t,i){if(1&t){var e=b.Xb();b.Wb(0,"ion-button",21),b.ec("click",(function(){b.Cc(e);var t=b.ic().$implicit;return b.ic(2).out(t)})),b.Rb(1,"ion-icon",22),b.Mc(2),b.jc(3,"translate"),b.Vb()}2&t&&(b.Db(2),b.Oc(" ",b.kc(3,1,"Exiting Out")," "))}function W(t,i){if(1&t){var e=b.Xb();b.Wb(0,"ion-item-options",23),b.Wb(1,"ion-item-option",24),b.ec("click",(function(){b.Cc(e);var t=b.ic().$implicit;return b.ic(2).history(t)})),b.Rb(2,"ion-icon",25),b.Vb(),b.Vb()}}function D(t,i){if(1&t){var e=b.Xb();b.Wb(0,"ion-item-options",26),b.Wb(1,"ion-item-option",27),b.ec("click",(function(){b.Cc(e);var t=b.ic().$implicit;return b.ic(2).gotoExternal("tel:"+t.mobile)})),b.Rb(2,"ion-icon",28),b.Vb(),b.Wb(3,"ion-item-option",21),b.ec("click",(function(){b.Cc(e);var t=b.ic().$implicit;return b.ic(2).delete(t)})),b.Rb(4,"ion-icon",29),b.Vb(),b.Wb(5,"ion-item-option",30),b.ec("click",(function(){b.Cc(e);var t=b.ic().$implicit;return b.ic(2).editMe(t)})),b.Rb(6,"ion-icon",31),b.Vb(),b.Vb()}}function w(t,i){if(1&t){var e=b.Xb();b.Wb(0,"ion-item-sliding"),b.Wb(1,"ion-item"),b.Wb(2,"ion-avatar",12),b.ec("click",(function(){b.Cc(e);var t=i.$implicit;return b.ic(2).showPhoto(t.image,t.name)})),b.Rb(3,"img",9),b.Vb(),b.Wb(4,"ion-label"),b.Wb(5,"h2"),b.Mc(6),b.Vb(),b.Wb(7,"p"),b.Mc(8),b.jc(9,"translate"),b.Vb(),b.Kc(10,g,3,4,"p",5),b.Wb(11,"p"),b.Mc(12),b.Vb(),b.Kc(13,y,5,3,"p",5),b.Kc(14,v,5,3,"p",5),b.Kc(15,k,4,3,"ion-button",13),b.Kc(16,V,4,3,"ion-button",14),b.Vb(),b.Vb(),b.Kc(17,W,3,0,"ion-item-options",15),b.Kc(18,D,7,0,"ion-item-options",16),b.Vb()}if(2&t){var n=i.$implicit,c=b.ic(2);b.Db(3),b.rc("src",c.ygen.getConditionalPhoto(n.image),b.Ec),b.Db(3),b.Nc(n.name),b.Db(2),b.Nc(b.kc(9,11,n.category)),b.Db(2),b.rc("ngIf",n.needParking),b.Db(2),b.Nc(c.ygen.formatTimestampToDate(n.statusdate)),b.Db(1),b.rc("ngIf","false"==n.in),b.Db(1),b.rc("ngIf","true"==n.in),b.Db(1),b.rc("ngIf",c.canido&&"false"==n.in),b.Db(1),b.rc("ngIf",c.canido&&"true"==n.in),b.Db(1),b.rc("ngIf",c.canido),b.Db(1),b.rc("ngIf",c.canido)}}function C(t,i){if(1&t&&(b.Wb(0,"ion-list"),b.Wb(1,"ion-item"),b.Wb(2,"h1"),b.Mc(3),b.jc(4,"translate"),b.Wb(5,"b"),b.Mc(6),b.Vb(),b.Vb(),b.Vb(),b.Kc(7,w,19,13,"ion-item-sliding",6),b.Wb(8,"ion-row"),b.Wb(9,"h1"),b.Mc(10),b.jc(11,"translate"),b.Vb(),b.Vb(),b.Vb()),2&t){var e=b.ic();b.Db(3),b.Oc("",b.kc(4,4,"Searched list")," \xa0"),b.Db(3),b.Nc(e.tempItems.length),b.Db(1),b.rc("ngForOf",e.tempItems),b.Db(3),b.Oc(" \xa0",b.kc(11,6,"Out List"),"")}}function I(t,i){if(1&t&&(b.Wb(0,"p"),b.Mc(1),b.jc(2,"translate"),b.Vb()),2&t){var e=b.ic().$implicit;b.Db(1),b.Pc("",b.kc(2,2,"Vehical Number")," :",e.vehicalnum,"")}}function M(t,i){if(1&t){var e=b.Xb();b.Wb(0,"ion-button",19),b.ec("click",(function(){b.Cc(e);var t=b.ic().$implicit;return b.ic().in(t)})),b.Rb(1,"ion-icon",20),b.Mc(2),b.jc(3,"translate"),b.Vb()}2&t&&(b.Db(2),b.Oc(" ",b.kc(3,1,"Entering In")," "))}function O(t,i){if(1&t){var e=b.Xb();b.Wb(0,"ion-item-options",23),b.Wb(1,"ion-item-option",24),b.ec("click",(function(){b.Cc(e);var t=b.ic().$implicit;return b.ic().history(t)})),b.Rb(2,"ion-icon",25),b.Vb(),b.Vb()}}function j(t,i){if(1&t){var e=b.Xb();b.Wb(0,"ion-item-options",26),b.Wb(1,"ion-item-option",27),b.ec("click",(function(){b.Cc(e);var t=b.ic().$implicit;return b.ic().gotoExternal("tel:"+t.mobile)})),b.Rb(2,"ion-icon",28),b.Vb(),b.Wb(3,"ion-item-option",21),b.ec("click",(function(){b.Cc(e);var t=b.ic().$implicit;return b.ic().delete(t)})),b.Rb(4,"ion-icon",29),b.Vb(),b.Wb(5,"ion-item-option",30),b.ec("click",(function(){b.Cc(e);var t=b.ic().$implicit;return b.ic().editMe(t)})),b.Rb(6,"ion-icon",31),b.Vb(),b.Vb()}}function P(t,i){if(1&t){var e=b.Xb();b.Wb(0,"ion-item-sliding"),b.Wb(1,"ion-item"),b.Wb(2,"ion-avatar",12),b.ec("click",(function(){b.Cc(e);var t=i.$implicit;return b.ic().showPhoto(t.image,t.name)})),b.Rb(3,"img",9),b.Vb(),b.Wb(4,"ion-label"),b.Wb(5,"h2"),b.Mc(6),b.Vb(),b.Wb(7,"p"),b.Mc(8),b.jc(9,"translate"),b.Vb(),b.Kc(10,I,3,4,"p",5),b.Wb(11,"p"),b.Mc(12),b.Vb(),b.Wb(13,"p"),b.Mc(14,"\xa0\xa0"),b.Wb(15,"b",17),b.Mc(16),b.jc(17,"translate"),b.Vb(),b.Vb(),b.Kc(18,M,4,3,"ion-button",13),b.Vb(),b.Vb(),b.Kc(19,O,3,0,"ion-item-options",15),b.Kc(20,j,7,0,"ion-item-options",16),b.Vb()}if(2&t){var n=i.$implicit,c=b.ic();b.Db(3),b.rc("src",c.ygen.getConditionalPhoto(n.image),b.Ec),b.Db(3),b.Nc(n.name),b.Db(2),b.Nc(b.kc(9,9,n.category)),b.Db(2),b.rc("ngIf",n.needParking),b.Db(2),b.Nc(c.ygen.formatTimestampToDate(n.statusdate)),b.Db(4),b.Nc(b.kc(17,11,"Out")),b.Db(2),b.rc("ngIf",c.canido),b.Db(1),b.rc("ngIf",c.canido),b.Db(1),b.rc("ngIf",c.canido)}}var $,S,R=function(){return{check:"false",property:"in"}},_=[{path:"",component:($=function(){function t(i,e,n,c,r,o,a,b){var u=this;_classCallCheck(this,t),this.modalCtrl=i,this.loadingCtrl=e,this.navCtrl=n,this.ydataservice=c,this.authService=r,this.boardService=o,this.ygen=a,this.route=b,this.showdetails=!1,this.viewHistory=!1,this.currentHistory=[],this.showOccupied=!1,this.current={name:""},this.isApp=!0,this.searchQuery="",this.tempItems=new Array,this.items=new Array,this.showButton=!0,this.occupiedVisitoParking=0,this.totalVisitoParking=0,this.showVisitorCounter=!1,this.workers=o.getWorkers(),this.workers.forEach((function(t){u.items=t})),this.workers.pipe(Object(s.a)((function(t){return u.occupiedVisitoParking=0,t.filter((function(t){return t.needParking}))}))).forEach((function(t){t.forEach((function(t){u.occupiedVisitoParking=u.occupiedVisitoParking+1}))})),r.authorizeForAction("gate")&&(this.canido=!0),o.getItems().subscribe((function(t){u.showVisitorCounter=t.istvp,u.totalVisitoParking=t.tvp}))}return _createClass(t,[{key:"ngOnInit",value:function(){console.log("ionViewDidLoad InpagePage mmmm")}},{key:"getShowAvailable",value:function(t){return 0==t?"dadared":t<=5?"dadayellow":"dada"}},{key:"openModal",value:function(t,i){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.ydataservice.setData("current",t),this.ydataservice.setData("currentHistory",i),this.ydataservice.setData("comingfrom","inpage"),this.route.navigateByUrl("/history");case 1:case"end":return e.stop()}}),e,this)})))}},{key:"ionViewDidLoad",value:function(){console.log("ionViewDidLoad InpagePage")}},{key:"isamember",value:function(){return!0}},{key:"out",value:function(t){var i=+new Date;this.removeFromSearch(t),this.boardService.updateOutHistory(this.boardService.getWorkersCrud(),t,{indate:t.statusdate,outdate:i});var e={in:"false",statusdate:i,needParking:!1};this.boardService.getWorkersCrud().update(t.$key,e)}},{key:"getOccupied",value:function(t){return t.needParking?"occu":""}},{key:"history",value:function(t){this.current=t,this.currentHistory=[];for(var i=0,e=Object.entries(t.history);i<e.length;i++){var n=_slicedToArray(e[i],2),c=(n[0],n[1]);this.currentHistory.push(c)}this.openModal(this.current,this.currentHistory)}},{key:"historyDone",value:function(){this.current={name:""},this.currentHistory=[],this.viewHistory=!1}},{key:"in",value:function(t){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:this.searchbar.value="",this.ydataservice.setData("update",this.boardService.getWorkersCrud()),this.ydataservice.setData("comingin",t),this.ydataservice.setData("comingfrom","outpage"),this.route.navigateByUrl("/enterdetail");case 1:case"end":return i.stop()}}),i,this)})))}},{key:"removeFromSearch",value:function(t){this.tempItems.findIndex((function(i){return i.$key==t.$key}))>-1&&(this.tempItems=this.tempItems.filter((function(i){return i.$key!=t.$key})))}},{key:"delete",value:function(t){this.boardService.updateOutHistory(this.boardService.getWorkersCrud(),t,{indate:t.statusdate,outdate:""}),this.boardService.getWorkersCrud().remove(t.$key),this.removeFromSearch(t)}},{key:"editMe",value:function(t){this.ydataservice.setData("editme",t),this.route.navigateByUrl("/presentdir")}},{key:"gotoExternal",value:function(t){window.location.href=t}},{key:"showPhoto",value:function(t,i){this.ygen.openimage(t,i)}},{key:"getItems",value:function(t){console.log(" search ready ",this.items),this.ocontent.scrollToTop(100);var i=t.target.value;this.searchQuery=i,i&&""!=i.trim()&&(this.tempItems=this.items.filter((function(t){return t.name.toLowerCase().indexOf(i.toLowerCase())>-1})))}},{key:"what",value:function(){return this.showdetails}},{key:"ngForCallback",value:function(){this.showdetails=!0}}]),t}(),$.\u0275fac=function(t){return new(t||$)(b.Qb(o.mb),b.Qb(o.kb),b.Qb(o.nb),b.Qb(u.R),b.Qb(u.M),b.Qb(u.i),b.Qb(u.T),b.Qb(r.j))},$.\u0275cmp=b.Kb({type:$,selectors:[["app-out"]],viewQuery:function(t,i){var e;1&t&&(b.Tc(f,!0),b.Tc(h,!0)),2&t&&(b.yc(e=b.fc())&&(i.searchbar=e.first),b.yc(e=b.fc())&&(i.ocontent=e.first))},decls:12,vars:13,consts:[[3,"color"],["debounce","100",3,"placeholder","ionChange"],["mySearchbar",""],["padding",""],["ocontent",""],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"dadao"],["item-start","",3,"click"],[3,"src"],["ion-button","","color","secondary",3,"click"],["name","call"],["slot","start",3,"click"],["color","success",3,"click",4,"ngIf"],["color","danger",3,"click",4,"ngIf"],["side","start",4,"ngIf"],["side","end",4,"ngIf"],[2,"color","red"],[2,"color","green"],["color","success",3,"click"],["slot","icon-only","name","log-in"],["color","danger",3,"click"],["slot","icon-only","name","log-out"],["side","start"],[3,"click"],["slot","icon-only","name","book"],["side","end"],["color","secondary",3,"click"],["slot","icon-only","name","call"],["slot","icon-only","name","trash"],["color","warning",3,"click"],["slot","icon-only","name","create"]],template:function(t,i){1&t&&(b.Wb(0,"ion-header"),b.Wb(1,"ion-toolbar",0),b.Wb(2,"ion-searchbar",1,2),b.ec("ionChange",(function(t){return i.getItems(t)})),b.jc(4,"translate"),b.Vb(),b.Vb(),b.Vb(),b.Wb(5,"ion-content",3,4),b.Kc(7,p,10,10,"ion-row",5),b.Kc(8,C,12,8,"ion-list",5),b.Kc(9,P,21,13,"ion-item-sliding",6),b.jc(10,"inpipe"),b.jc(11,"async"),b.Vb()),2&t&&(b.Db(1),b.rc("color","warning"),b.Db(1),b.sc("placeholder",b.kc(4,5,"Search")),b.Db(5),b.rc("ngIf",0),b.Db(1),b.rc("ngIf",(null==i.searchQuery?null:i.searchQuery.length)>=1),b.Db(1),b.rc("ngForOf",b.lc(10,7,b.kc(11,10,i.workers),b.uc(12,R))))},directives:[o.y,o.hb,o.S,o.ub,o.s,n.m,n.l,o.R,o.r,o.K,o.D,o.e,o.z,o.I,o.J,o.i,o.H,o.G],pipes:[l.c,u.t,n.b],styles:[".can-go-back[_ngcontent-%COMP%]   ion-menu-button[_ngcontent-%COMP%]{display:none}"]}),$)}],T=((S=function t(){_classCallCheck(this,t)}).\u0275mod=b.Ob({type:S}),S.\u0275inj=b.Nb({factory:function(t){return new(t||S)},imports:[[n.c,c.j,o.ib,u.H,u.o,u.b,r.n.forChild(_)]]}),S)}}]);