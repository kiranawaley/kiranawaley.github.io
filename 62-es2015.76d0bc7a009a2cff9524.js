(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{"nS/V":function(e,t,i){"use strict";i.r(t),i.d(t,"CategoriesPageModule",(function(){return w}));var o=i("ofXK"),c=i("3Pt+"),n=i("tyNb"),s=i("TEn/"),a=i("OJQs"),r=i("q3Kh"),l=i("fXoL"),h=i("0IaG"),b=i("sYmb");const d=["yocameraelement"];function u(e,t){if(1&e){const e=l.Xb();l.Wb(0,"ion-item"),l.Wb(1,"div",10),l.Wb(2,"app-appicon",11),l.ec("actionEvent",(function(t){return l.Cc(e),l.ic(2).downloadProducts(t)})),l.Vb(),l.Wb(3,"app-appicon",11),l.ec("actionEvent",(function(t){return l.Cc(e),l.ic(2).deleteproducts(t)})),l.Vb(),l.Vb(),l.Vb()}2&e&&(l.Db(2),l.rc("icon","cloud_download")("askquestion",!1)("icontext","Download Categories")("isiconwithtext",!0),l.Db(1),l.rc("icon","delete")("askquestion",!0)("icontext","Delete All Categories")("isiconwithtext",!0))}function g(e,t){if(1&e&&l.Rb(0,"img",16),2&e){const e=l.ic().$implicit;l.rc("src",e.image,l.Ec)}}function p(e,t){if(1&e){const e=l.Xb();l.Wb(0,"ion-item"),l.Wb(1,"div",10),l.Wb(2,"div",17),l.Mc(3),l.Vb(),l.Wb(4,"div",18),l.Wb(5,"app-appicon",19),l.ec("actionEvent",(function(){l.Cc(e);const i=t.$implicit,o=l.ic().$implicit;return l.ic(2).deletesubcategory(i,o.$key)})),l.Vb(),l.Wb(6,"app-appicon",20),l.ec("actionEvent",(function(){l.Cc(e);const i=t.$implicit,o=l.ic().$implicit;return l.ic(2).navigate("category",{key:o.$key,subcategoryid:i,action:"editsubcategory"})})),l.Vb(),l.Vb(),l.Vb(),l.Vb()}if(2&e){const e=t.$implicit,i=l.ic().$implicit;l.Db(3),l.Oc(" ",i.subcategory[e].title," "),l.Db(2),l.rc("color","accent")("askquestion",!0)("icon","delete")("icontext","delete")("isiconwithtext",!0),l.Db(1),l.rc("color","warning")("icon","edit")("icontext","edit")("isiconwithtext",!0)}}function m(e,t){if(1&e){const e=l.Xb();l.Wb(0,"div",21),l.Wb(1,"div",17),l.Wb(2,"app-appicon",22),l.ec("actionEvent",(function(){l.Cc(e);const t=l.ic().$implicit;return l.ic(2).deletecategory(t)})),l.Vb(),l.Vb(),l.Wb(3,"div",17),l.Wb(4,"app-appicon",20),l.ec("actionEvent",(function(){l.Cc(e);const t=l.ic().$implicit;return l.ic(2).navigate("category",{key:t.$key,action:"addsubcategory"})})),l.Vb(),l.Vb(),l.Vb()}2&e&&(l.Db(2),l.rc("color","accent")("icon","delete")("askquestion",!0)("icontext","Delete Category")("isiconwithtext",!0),l.Db(2),l.rc("color","accent")("icon","add_to_queue")("icontext","Add subcategory")("isiconwithtext",!0))}function f(e,t){if(1&e){const e=l.Xb();l.Wb(0,"ion-card"),l.Kc(1,g,1,1,"img",12),l.Wb(2,"ion-item",13),l.ec("click",(function(){l.Cc(e);const i=t.$implicit;return l.ic(2).navigate("category",{key:i.$key})})),l.Wb(3,"ion-label",14),l.Mc(4),l.Vb(),l.Vb(),l.Wb(5,"ion-card-content"),l.Mc(6),l.Vb(),l.Kc(7,p,7,10,"ion-item",9),l.jc(8,"objectsarray"),l.Kc(9,m,5,9,"div",15),l.Vb()}if(2&e){const e=t.$implicit,i=l.ic(2);l.Db(1),l.rc("ngIf",e.imageuploaded),l.Db(3),l.Oc(" ",e.title," "),l.Db(2),l.Oc(" ",e.description," "),l.Db(1),l.rc("ngForOf",l.kc(8,5,e.subcategory)),l.Db(2),l.rc("ngIf",i.ygen.isAdmin())}}function y(e,t){if(1&e&&(l.Wb(0,"ion-content",6),l.Kc(1,u,4,8,"ion-item",7),l.Wb(2,"div",8),l.Kc(3,f,10,7,"ion-card",9),l.jc(4,"async"),l.Vb(),l.Vb()),2&e){const e=l.ic();l.Db(1),l.rc("ngIf",e.ygen.isAdmin()),l.Db(2),l.rc("ngForOf",l.kc(4,2,e.events))}}const v=[{path:"",component:(()=>{class e{constructor(e,t,i,o,c,n,s,a,r,l,h,b){this.excelservice=e,this.centerdb=t,this.yalert=i,this.ycamera=o,this.ygen=c,this.alertme=n,this.route=s,this.router=a,this.boardService=r,this.ysharedata=l,this.ydata=h,this.dialog=b,this.imagescapturedComp=new Map,this.screenrefresh=!0,this.mystrip=[],this.showre=!1,this.sourcere="",this.refreshme=!1,this.refreshthis=!0}deletecategory(e){this.crudList.removefromList(e)}deletesubcategory(e,t){this.ydata.getDatabase().list(a.P.getpath()+"/shop/categories/"+t+"/subcategory/"+e).remove()}ngOnInit(){this.centerdb.currenttenant.subscribe(e=>{this.crudList=new a.p(a.P.getpath()+"/shop/categories",this.ydata.getDatabase(),!0,this.ygen.getUid()),this.events=this.crudList.getList(),this.refreshCamera()})}viewEntry(e){e.registration&&Object.keys(e.registration).map(t=>Object.assign(e.registration[t],{$key:t}))}addsubcategory(e){}navigate(e,t){this.ysharedata.setData("currentevent",t),this.router.navigate([e],{queryParams:t})}takeAcion(e){console.log("yeah",e)}doit(e,t){setTimeout(()=>{this.crudList.updateList(t?{$key:e.$key,active:!0,eventOver:!1}:{$key:e.$key,active:!1})},1e3)}closeEvent(e){this.screenrefresh=!1,this.alertme.question("Are You Sure?","Close Event","No").then(t=>{t.value&&setTimeout(()=>{this.crudList.updateList({$key:e.$key,active:!1,eventOver:!0})},1e3),this.screenrefresh=!0})}active(e){this.alertme.question("Are You Sure?","Activate Notice","No").then(t=>{t.value&&this.doit(e,!0)})}inactive(e){this.alertme.question("Are You Sure?","Disable Notice","No").then(t=>{t.value&&this.doit(e,!1)})}edit(e){this.alertme.question("Are You Sure?","Delete","No").then(t=>{t.value&&this.crudList.removefromList(e)})}delete(e){this.alertme.question("Are You Sure?","Delete","No").then(t=>{t.value&&setTimeout(()=>{this.crudList.removefromList(e)},1e3)})}showpreview(e,t){console.log("event",e),console.log("key",t),this.showre=!0,this.sourcere=e,this.mystrip.push(e)}getstrip(e,t){let i=t.filter(t=>t.whatfor===e);return console.log(i.length),i}deletfromStrip(e){this.mystrip=this.mystrip.filter(t=>t.whatfor!=e)}deletephoto(e){this.deletfromStrip(e.whatfor),this.refreshCamera()}refreshCamera(){this.refreshme=!1,setTimeout(()=>{this.refreshme=!0},100)}savePhoto(e){this.refreshCamera(),this.ygen.ismobile()?(this.alertme.infodata("Uploading and saving photo.."),this.yocam.saveMobileImage(e.src).then(t=>{console.log("what we have recieved image 1 "+t),console.log("what we have recieved image 1 "+t);const i=JSON.parse(t.response);console.log("we got the url...."+t.response),console.log("we got the url...."+i.secure_url),this.addImages(e.whatfor,{photo:i.secure_url}),this.deletephoto(e),this.alertme.successdata("Saved...")})):this.yocam.saveImage(e.files).then(t=>{console.log("what we have recieved image 2 "+t.secure_url),this.addImages(e.whatfor,{photo:t.secure_url}),this.deletephoto(e)})}addImages(e,t){new a.p("/board/notices/"+e+"/images",this.ydata.getDatabase(),!0,this.ygen.getUid()).addtolist(t)}deletesaved(e,t){this.alertme.question("Are You Sure?","Delete","No").then(i=>{i.value&&new a.p("/board/notices/"+t+"/images",this.ydata.getDatabase(),!0,this.ygen.getUid()).removefromList({$key:e.key})})}downloadProducts(e){let t=this.crudList.getListRefer().snapshotChanges().pipe(Object(r.map)(e=>e.map(e=>Object.assign({$key:e.payload.key},e.payload.val())))).subscribe(e=>{console.log("list",e);let i=[],o=0;e.forEach(e=>{o+=1;let t={$key:o,active:e.active,description:e.description,image:e.image,imageuploaded:e.imageuploaded,title:e.title,uploaded:"TRUE"};if(e.subcategory){let i=[];Object.values(e.subcategory).forEach(e=>{i.push({description:e.description,title:e.title,active:e.active,image:e.image})}),i.length>0&&(t.subcategory=JSON.stringify(Object.values(i)).replace(/,/g,"|"))}i.push(t)}),0==i.length?this.yalert.openSnackBar("No Categories for downlowd","Ok"):(this.excelservice.exportAsExcelFile(i,"categories"),this.yalert.openSnackBar("All Categories will be downloaded...","Ok")),t.unsubscribe()})}deleteproducts(e){this.crudList.listrefer.remove(),this.refreshthis=!1,setTimeout(()=>{this.refreshthis=!0},1500)}}return e.\u0275fac=function(t){return new(t||e)(l.Qb(a.r),l.Qb(a.P),l.Qb(a.a),l.Qb(a.N),l.Qb(a.T),l.Qb(a.a),l.Qb(n.a),l.Qb(n.j),l.Qb(a.i),l.Qb(a.R),l.Qb(a.Q),l.Qb(h.b))},e.\u0275cmp=l.Kb({type:e,selectors:[["app-categories"]],viewQuery:function(e,t){var i;1&e&&(l.Tc(d,!0),l.Tc(d,!0)),2&e&&(l.yc(i=l.fc())&&(t.yocam=i.first),l.yc(i=l.fc())&&(t.yocamViewChildren=i))},decls:11,vars:5,consts:[[3,"color"],["slot","start"],["slot","end","color","secondary"],[3,"click"],["slot","icon-only","name","add"],["padding","",4,"ngIf"],["padding",""],[4,"ngIf"],[1,"productlist"],[4,"ngFor","ngForOf"],[1,"bbcontainer"],[3,"icon","askquestion","icontext","isiconwithtext","actionEvent"],["class","imageshow",3,"src",4,"ngIf"],["button","",3,"click"],[1,"ion-text-wrap"],["class","bcontainer",4,"ngIf"],[1,"imageshow",3,"src"],[1,"bitems"],[1,"subcataction"],[3,"color","askquestion","icon","icontext","isiconwithtext","actionEvent"],[3,"color","icon","icontext","isiconwithtext","actionEvent"],[1,"bcontainer"],[3,"color","icon","askquestion","icontext","isiconwithtext","actionEvent"]],template:function(e,t){1&e&&(l.Wb(0,"ion-header"),l.Wb(1,"ion-toolbar",0),l.Wb(2,"ion-buttons",1),l.Rb(3,"ion-back-button"),l.Vb(),l.Wb(4,"ion-title"),l.Mc(5),l.jc(6,"translate"),l.Vb(),l.Wb(7,"ion-buttons",2),l.Wb(8,"ion-button",3),l.ec("click",(function(){return t.navigate("category",{})})),l.Rb(9,"ion-icon",4),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Kc(10,y,5,4,"ion-content",5)),2&e&&(l.Db(1),l.rc("color","warning"),l.Db(4),l.Nc(l.kc(6,3,"Categories")),l.Db(5),l.rc("ngIf",t.refreshthis))},directives:[s.y,s.hb,s.j,s.f,s.g,s.fb,s.i,s.z,o.m,s.s,o.l,s.D,a.f,s.k,s.J,s.l],pipes:[b.c,o.b,a.z],styles:[".bbcontainer[_ngcontent-%COMP%]{width:100%}.bbcontainer[_ngcontent-%COMP%], .bcontainer[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.subcataction[_ngcontent-%COMP%]{display:flex}.productlist[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;align-items:stretch;justify-content:center}on-card[_ngcontent-%COMP%]{width:50vh}.productlist[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:200px}"]}),e})()}];let w=(()=>{class e{}return e.\u0275mod=l.Ob({type:e}),e.\u0275inj=l.Nb({factory:function(t){return new(t||e)},imports:[[o.c,c.j,s.ib,a.H,a.o,a.b,n.n.forChild(v)]]}),e})()}}]);