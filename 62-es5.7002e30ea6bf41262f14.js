function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{eGez:function(e,t,n){"use strict";n.r(t),n.d(t,"SendmessagePageModule",(function(){return L}));var i=n("ofXK"),o=n("3Pt+"),s=n("tyNb"),a=n("TEn/"),c=n("tk/3"),r=n("DVUX"),l=n("+DAS"),g=n("Oipj"),b=n("dMTE"),u=n("x5WB"),d=n("rIxz"),m=n("0nTO"),h=n("fXoL"),p=n("sYmb");function f(e,t){if(1&e){var n=h.Xb();h.Wb(0,"ion-list",11),h.Wb(1,"ion-item"),h.Wb(2,"ion-label"),h.Lc(3),h.jc(4,"translate"),h.Vb(),h.Wb(5,"ion-toggle",12),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.emailverification=e})),h.Vb(),h.Vb(),h.Wb(6,"ion-item"),h.Wb(7,"ion-label"),h.Lc(8),h.jc(9,"translate"),h.Vb(),h.Wb(10,"ion-toggle",12),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.paymenton=e})),h.Vb(),h.Vb(),h.Wb(11,"ion-item"),h.Wb(12,"ion-label"),h.Lc(13),h.jc(14,"translate"),h.Vb(),h.Wb(15,"ion-toggle",12),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.newApp=e})),h.Vb(),h.Vb(),h.Wb(16,"ion-item"),h.Wb(17,"ion-label"),h.Lc(18),h.jc(19,"translate"),h.Vb(),h.Wb(20,"ion-toggle",12),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.mandatory=e})),h.Vb(),h.Vb(),h.Wb(21,"ion-item"),h.Wb(22,"ion-input",13),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.version=e})),h.jc(23,"translate"),h.Vb(),h.Vb(),h.Wb(24,"ion-item"),h.Wb(25,"ion-textarea",14),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.mMessage=e})),h.jc(26,"translate"),h.Vb(),h.Vb(),h.Wb(27,"ion-item"),h.Wb(28,"ion-label",15),h.Lc(29),h.jc(30,"translate"),h.Vb(),h.Wb(31,"ion-input",13),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.oncallsupport=e})),h.jc(32,"translate"),h.Vb(),h.Vb(),h.Wb(33,"ion-item"),h.Wb(34,"ion-label",15),h.Lc(35),h.jc(36,"translate"),h.Vb(),h.Wb(37,"ion-input",13),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.domainurl=e})),h.jc(38,"translate"),h.Vb(),h.Vb(),h.Wb(39,"ion-item"),h.Wb(40,"ion-label",15),h.Lc(41),h.jc(42,"translate"),h.Vb(),h.Wb(43,"ion-textarea",14),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.shoplandingmsg=e})),h.jc(44,"translate"),h.Vb(),h.Vb(),h.Wb(45,"ion-item"),h.Wb(46,"ion-label",15),h.Lc(47),h.jc(48,"translate"),h.Vb(),h.Wb(49,"ion-textarea",14),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.checkoutordermsg=e})),h.jc(50,"translate"),h.Vb(),h.Vb(),h.Wb(51,"ion-item"),h.Wb(52,"ion-label",15),h.Lc(53),h.jc(54,"translate"),h.Vb(),h.Wb(55,"ion-textarea",14),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.invitationmessage=e})),h.jc(56,"translate"),h.Vb(),h.Vb(),h.Wb(57,"ion-item"),h.Wb(58,"ion-label"),h.Lc(59),h.jc(60,"translate"),h.Vb(),h.Wb(61,"ion-toggle",12),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.freedelivery=e})),h.Vb(),h.Vb(),h.Wb(62,"ion-item"),h.Wb(63,"ion-label",15),h.Lc(64,"Delivery Charges"),h.Vb(),h.Wb(65,"ion-input",16),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.deliverycharges=e})),h.jc(66,"translate"),h.Vb(),h.Vb(),h.Wb(67,"ion-item"),h.Wb(68,"ion-label"),h.Lc(69),h.jc(70,"translate"),h.Vb(),h.Wb(71,"ion-toggle",12),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.freedeliveryoveramount=e})),h.Vb(),h.Vb(),h.Wb(72,"ion-item"),h.Wb(73,"ion-label",15),h.Lc(74,"Free delivery over Amount"),h.Vb(),h.Wb(75,"ion-input",16),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.freedeliveryamount=e})),h.jc(76,"translate"),h.Vb(),h.Vb(),h.Wb(77,"ion-item"),h.Wb(78,"ion-label"),h.Lc(79),h.jc(80,"translate"),h.Vb(),h.Wb(81,"ion-toggle",12),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.stoporders=e})),h.Vb(),h.Vb(),h.Wb(82,"ion-item"),h.Wb(83,"ion-label",15),h.Lc(84),h.jc(85,"translate"),h.Vb(),h.Wb(86,"ion-textarea",14),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.stopordersmessage=e})),h.jc(87,"translate"),h.Vb(),h.Vb(),h.Wb(88,"ion-item"),h.Wb(89,"ion-label"),h.Lc(90),h.jc(91,"translate"),h.Vb(),h.Wb(92,"ion-toggle",12),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.onlystorepickup=e})),h.Vb(),h.Vb(),h.Wb(93,"ion-item"),h.Wb(94,"ion-label"),h.Lc(95),h.jc(96,"translate"),h.Vb(),h.Wb(97,"ion-toggle",12),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.onlinepay=e})),h.Vb(),h.Vb(),h.Wb(98,"ion-item"),h.Wb(99,"ion-label",15),h.Lc(100,"Merchant Name"),h.Vb(),h.Wb(101,"ion-input",13),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.merchantname=e})),h.jc(102,"translate"),h.Vb(),h.Vb(),h.Wb(103,"ion-item"),h.Wb(104,"ion-label",15),h.Lc(105,"Merchant Key"),h.Vb(),h.Wb(106,"ion-input",13),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.merchantkey=e})),h.jc(107,"translate"),h.Vb(),h.Vb(),h.Wb(108,"ion-item"),h.Wb(109,"ion-input",13),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.camera=e})),h.jc(110,"translate"),h.Vb(),h.Vb(),h.Wb(111,"ion-button",17),h.ec("click",(function(){return h.Cc(n),h.ic().saveSettings()})),h.Lc(112),h.jc(113,"translate"),h.Vb(),h.Wb(114,"ion-item"),h.Wb(115,"div"),h.Lc(116,"\xa0 "),h.Vb(),h.Vb(),h.Vb()}if(2&e){var i=h.ic();h.Db(3),h.Mc(h.kc(4,51,"Email Verification")),h.Db(2),h.rc("ngModel",i.settings.emailverification),h.Db(3),h.Mc(h.kc(9,53,"Payment On")),h.Db(2),h.rc("ngModel",i.settings.paymenton),h.Db(3),h.Nc("",h.kc(14,55,"New Version of App"),"!!"),h.Db(2),h.rc("ngModel",i.settings.newApp),h.Db(3),h.Mc(h.kc(19,57,"Mandatory update")),h.Db(2),h.rc("ngModel",i.settings.mandatory),h.Db(2),h.sc("placeholder",h.kc(23,59,"App Version")),h.rc("ngModel",i.settings.version),h.Db(3),h.sc("placeholder",h.kc(26,61,"Your Message")),h.rc("ngModel",i.settings.mMessage),h.Db(4),h.Mc(h.kc(30,63,"On Call Support Number")),h.Db(2),h.sc("placeholder",h.kc(32,65,"On Call Support Number")),h.rc("ngModel",i.settings.oncallsupport),h.Db(4),h.Mc(h.kc(36,67,"Your Domain url")),h.Db(2),h.sc("placeholder",h.kc(38,69,"Your Store URL")),h.rc("ngModel",i.settings.domainurl),h.Db(4),h.Mc(h.kc(42,71,"Your Message on Shopping")),h.Db(2),h.sc("placeholder",h.kc(44,73,"Your Message on Shopping screen")),h.rc("ngModel",i.settings.shoplandingmsg),h.Db(4),h.Mc(h.kc(48,75,"Your Message on checkout order")),h.Db(2),h.sc("placeholder",h.kc(50,77,"Your Message from Pending screen")),h.rc("ngModel",i.settings.checkoutordermsg),h.Db(4),h.Mc(h.kc(54,79,"Your Invitation")),h.Db(2),h.sc("placeholder",h.kc(56,81,"Your Message for Invitaion")),h.rc("ngModel",i.settings.invitationmessage),h.Db(4),h.Mc(h.kc(60,83,"Offer free Delivery")),h.Db(2),h.rc("ngModel",i.settings.freedelivery),h.Db(4),h.sc("placeholder",h.kc(66,85,"Delivery Charges")),h.rc("ngModel",i.settings.deliverycharges),h.Db(4),h.Mc(h.kc(70,87,"Offer free Delivery over Amount")),h.Db(2),h.rc("ngModel",i.settings.freedeliveryoveramount),h.Db(4),h.sc("placeholder",h.kc(76,89,"Free delivery over Amount")),h.rc("ngModel",i.settings.freedeliveryamount),h.Db(4),h.Mc(h.kc(80,91,"Stop taking Orders")),h.Db(2),h.rc("ngModel",i.settings.stoporders),h.Db(3),h.Mc(h.kc(85,93,"Reason to stop orders")),h.Db(2),h.sc("placeholder",h.kc(87,95,"Your Message from Stop Orders")),h.rc("ngModel",i.settings.stopordersmessage),h.Db(4),h.Mc(h.kc(91,97,"Only store pick up")),h.Db(2),h.rc("ngModel",i.settings.onlystorepickup),h.Db(3),h.Mc(h.kc(96,99,"Accept online payment")),h.Db(2),h.rc("ngModel",i.settings.onlinepay),h.Db(4),h.sc("placeholder",h.kc(102,101,"Merchant Name")),h.rc("ngModel",i.settings.merchantname),h.Db(5),h.sc("placeholder",h.kc(107,103,"Merchant Key")),h.rc("ngModel",i.settings.merchantkey),h.Db(3),h.sc("placeholder",h.kc(110,105,"Camera Url")),h.rc("ngModel",i.settings.camera),h.Db(3),h.Mc(h.kc(113,107,"Save"))}}function y(e,t){if(1&e){var n=h.Xb();h.Wb(0,"ion-item"),h.Wb(1,"ion-input",13),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic(2).settings.allAmount=e})),h.jc(2,"translate"),h.Vb(),h.Vb()}if(2&e){var i=h.ic(2);h.Db(1),h.sc("placeholder",h.kc(2,2,"Amount")),h.rc("ngModel",i.settings.allAmount)}}function M(e,t){if(1&e){var n=h.Xb();h.Wb(0,"ion-list",11),h.Wb(1,"ion-list-header"),h.Lc(2),h.jc(3,"translate"),h.Vb(),h.Wb(4,"ion-item",18),h.Wb(5,"ion-label"),h.Lc(6),h.jc(7,"translate"),h.Vb(),h.Wb(8,"ion-toggle",19),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().candeletemessage=e})),h.Vb(),h.Vb(),h.Wb(9,"ion-item",18),h.Wb(10,"ion-label"),h.Lc(11),h.jc(12,"translate"),h.Vb(),h.Wb(13,"ion-toggle",19),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().paymentmessage=e}))("ngModelChange",(function(){h.Cc(n);var e=h.ic();return e.updateItem(e.paymentmessage,"payment")})),h.Vb(),h.Vb(),h.Wb(14,"ion-item",18),h.Wb(15,"ion-label"),h.Lc(16),h.jc(17,"translate"),h.Vb(),h.Wb(18,"ion-toggle",19),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().notificationmessage=e}))("ngModelChange",(function(){h.Cc(n);var e=h.ic();return e.updateItem(e.notificationmessage,"notification")})),h.Vb(),h.Vb(),h.Wb(19,"ion-item"),h.Wb(20,"ion-input",13),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.allTitle=e})),h.jc(21,"translate"),h.Vb(),h.Vb(),h.Wb(22,"ion-item"),h.Wb(23,"ion-textarea",14),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.allMessage=e})),h.jc(24,"translate"),h.Vb(),h.Vb(),h.Jc(25,y,3,4,"ion-item",20),h.Wb(26,"ion-button",17),h.ec("click",(function(){return h.Cc(n),h.ic().submit("all")})),h.Lc(27),h.jc(28,"translate"),h.Vb(),h.Vb()}if(2&e){var i=h.ic();h.Db(2),h.Nc(" ",h.kc(3,13,"Send Message to All")," "),h.Db(4),h.Nc("",h.kc(7,15,"User Can delete this message from inbox"),"!!"),h.Db(2),h.rc("ngModel",i.candeletemessage),h.Db(3),h.Nc("",h.kc(12,17,"User payment message"),"!!"),h.Db(2),h.rc("ngModel",i.paymentmessage),h.Db(3),h.Nc("",h.kc(17,19,"Show as notification"),"!!"),h.Db(2),h.rc("ngModel",i.notificationmessage),h.Db(2),h.sc("placeholder",h.kc(21,21,"Title")),h.rc("ngModel",i.settings.allTitle),h.Db(3),h.sc("placeholder",h.kc(24,23,"Message")),h.rc("ngModel",i.settings.allMessage),h.Db(2),h.rc("ngIf",i.paymentmessage),h.Db(2),h.Mc(h.kc(28,25,"Send"))}}function v(e,t){if(1&e){var n=h.Xb();h.Wb(0,"ion-item",18),h.Wb(1,"ion-label"),h.Lc(2),h.Vb(),h.Wb(3,"ion-checkbox",24),h.ec("ngModelChange",(function(e){return h.Cc(n),t.$implicit.checked=e}))("ionChange",(function(){h.Cc(n);var e=t.$implicit;return h.ic(3).putInSendRequest(e)})),h.Vb(),h.Vb()}if(2&e){var i=t.$implicit;h.Db(2),h.Oc("",i.userid,"||",i.userName,""),h.Db(1),h.rc("ngModel",i.checked)}}function V(e,t){if(1&e&&(h.Wb(0,"div"),h.Jc(1,v,4,3,"ion-item",23),h.Vb()),2&e){var n=h.ic(2);h.Db(1),h.rc("ngForOf",n.tempItems)}}function W(e,t){if(1&e){var n=h.Xb();h.Wb(0,"ion-item"),h.Wb(1,"ion-input",13),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic(2).settings.iAmount=e})),h.jc(2,"translate"),h.Vb(),h.Vb()}if(2&e){var i=h.ic(2);h.Db(1),h.sc("placeholder",h.kc(2,2,"Amount")),h.rc("ngModel",i.settings.iAmount)}}function C(e,t){1&e&&h.Rb(0,"ion-spinner",25)}function k(e,t){if(1&e){var n=h.Xb();h.Wb(0,"ion-list",11),h.Wb(1,"ion-list-header"),h.Lc(2),h.jc(3,"translate"),h.Vb(),h.Wb(4,"ion-searchbar",21),h.ec("ionInput",(function(e){return h.Cc(n),h.ic().getItems(e)})),h.jc(5,"translate"),h.Vb(),h.Jc(6,V,2,1,"div",20),h.Wb(7,"ion-item",18),h.Wb(8,"ion-label"),h.Lc(9),h.jc(10,"translate"),h.Vb(),h.Wb(11,"ion-toggle",19),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().candeletemessage=e})),h.Vb(),h.Vb(),h.Wb(12,"ion-item",18),h.Wb(13,"ion-label"),h.Lc(14),h.jc(15,"translate"),h.Vb(),h.Wb(16,"ion-toggle",19),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().paymentmessage=e}))("ngModelChange",(function(){h.Cc(n);var e=h.ic();return e.updateItem(e.paymentmessage,"payment")})),h.Vb(),h.Vb(),h.Wb(17,"ion-item",18),h.Wb(18,"ion-label"),h.Lc(19),h.jc(20,"translate"),h.Vb(),h.Wb(21,"ion-toggle",19),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().notificationmessage=e}))("ngModelChange",(function(){h.Cc(n);var e=h.ic();return e.updateItem(e.notificationmessage,"notification")})),h.Vb(),h.Vb(),h.Wb(22,"ion-item"),h.Wb(23,"ion-input",13),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.iTitle=e})),h.jc(24,"translate"),h.Vb(),h.Vb(),h.Wb(25,"ion-item"),h.Wb(26,"ion-textarea",14),h.ec("ngModelChange",(function(e){return h.Cc(n),h.ic().settings.iMessage=e})),h.jc(27,"translate"),h.Vb(),h.Vb(),h.Jc(28,W,3,4,"ion-item",20),h.Jc(29,C,1,0,"ion-spinner",22),h.Wb(30,"ion-button",17),h.ec("click",(function(){return h.Cc(n),h.ic().submit("individual")})),h.Lc(31),h.jc(32,"translate"),h.Vb(),h.Vb()}if(2&e){var i=h.ic();h.Db(2),h.Nc(" ",h.kc(3,16,"Send Message to Individual")," "),h.Db(2),h.sc("placeholder",h.kc(5,18,"Search")),h.Db(2),h.rc("ngIf",(null==i.searchQuery?null:i.searchQuery.length)>=1),h.Db(3),h.Nc("",h.kc(10,20,"User Can delete this message from inbox"),"!!"),h.Db(2),h.rc("ngModel",i.candeletemessage),h.Db(3),h.Nc("",h.kc(15,22,"User payment message"),"!!"),h.Db(2),h.rc("ngModel",i.paymentmessage),h.Db(3),h.Nc("",h.kc(20,24,"Show as notification"),"!!"),h.Db(2),h.rc("ngModel",i.notificationmessage),h.Db(2),h.sc("placeholder",h.kc(24,26,"Title")),h.rc("ngModel",i.settings.iTitle),h.Db(3),h.sc("placeholder",h.kc(27,28,"Message")),h.rc("ngModel",i.settings.iMessage),h.Db(2),h.rc("ngIf",i.paymentmessage),h.Db(1),h.rc("ngIf",!i.showButton),h.Db(2),h.Mc(h.kc(32,30,"Send"))}}var D,S,w=((D=function(){function e(t,n,i,o,s,a,c,r){_classCallCheck(this,e),this.ynotification=t,this.ygen=n,this.commontranl=i,this.ypay=o,this.toasterService=s,this.http=a,this.ydata=c,this.authService=r,this.searchQuery="",this.items=new Array,this.tempItems=new Array,this.toSendItems=new Array,this.candeletemessage=!0,this.paymentmessage=!1,this.notificationmessage=!1,this.selection=["primary","secondary","secondary"],this.supportedLanguages=[],this.showButton=!0,this.onlineflag=!1}return _createClass(e,[{key:"ionViewWillEnter",value:function(){var e=this;this.ydata.getProfiles().subscribe((function(t){e.items=t})),this.commontranl.online.subscribe((function(t){e.onlineflag=t}))}},{key:"ngOnInit",value:function(){var e=this;this.settings={emailverification:!1,appurl:"https://play.google.com/store/apps/details?id=com.yogi.bhandhanv2",mandatory:!1,mMessage:"",pendingMessage:"",authkey:"",newApp:!1,allTitle:"",allMessage:"",iTitle:"",iMessage:"",url:"",version:"",merchant:"",istvp:!1,sendsms:!1,sendsmsbackground:!1,merchantname:"",merchantkey:"",oncallsupport:"",paymenton:!1,camera:"",freedelivery:!1,deliverycharges:0,freedeliveryoveramount:!1,freedeliveryamount:1e3,onlystorepickup:!1,noonlinepay:!0,stoporders:!1,checkoutordermsg:"",invitationmessage:"",shoplandingmsg:"",domainurl:"",stopordersmessage:"We had stop taking orders now due to heavy load"},this.ydata.retrivedata("settings",null).subscribe((function(t){Object.assign(e.settings,t)}))}},{key:"makeSelection",value:function(e){this.selection=["secondary","secondary","secondary"],this.selection[e]="primary"}},{key:"empty",value:function(e){return!e||!/[^\s]+/.test(e)}},{key:"putInSendRequest",value:function(e){if(this.toSendItems.find((function(t){return t.userid==e.userid}))){if(!e.checked)for(var t=0;t<this.toSendItems.length;t++)if(e.email===this.toSendItems[t].email){this.toSendItems.splice(t,1);break}}else e.checked&&this.toSendItems.push(e)}},{key:"submit",value:function(e){var t=this,n=[],i=[],o="",s="",a="";if("all"==e){if(0==this.items.length)return void this.toasterService.pop("error","Opps dont have any user!!!","Get your app growing");if(this.items.filter((function(e){-1!=n.indexOf(e.notificationId)||e.webnotification||n.push(e.notificationId)})),this.items.filter((function(e){-1==i.indexOf(e.notificationId)&&e.webnotification&&i.push(e.notificationId)})),this.empty(this.settings.allTitle)||this.empty(this.settings.allMessage))return void this.toasterService.pop("error","Title and Message are mandatory!!!","Fill the required");if(this.paymentmessage&&this.empty(this.settings.allAmount))return void this.toasterService.pop("error","In case of payment message amount is required!!!","Fill the required");if(this.paymentmessage&&isNaN(this.settings.allAmount))return void this.toasterService.pop("error","Please enter the valid amount!!!","Fill the required data correctly");o=this.settings.allMessage,s=this.settings.allTitle,console.log("amount re",a),a=this.settings.allAmount,console.log("amount re",a)}else{if(0==this.toSendItems.length)return void this.toasterService.pop("error","Opps please search and select user!!!","Get your app growing");if(this.toSendItems.filter((function(e){e.notificationId&&e.notificationId.length>0&&-1==n.indexOf(e.notificationId)&&n.push(e.notificationId)})),this.empty(this.settings.iTitle)||this.empty(this.settings.iMessage))return void this.toasterService.pop("error","Title and Message are mandatory!!!","Fill the required");if(this.paymentmessage&&this.empty(this.settings.iAmount))return void this.toasterService.pop("error","In case of payment message amount is required!!!","Fill the required");if(this.paymentmessage&&isNaN(this.settings.iAmount))return void this.toasterService.pop("error","Please enter the valid amount!!!","Fill the required data correctly");o=this.settings.iMessage,s=this.settings.iTitle,console.log("amount re1",a),a=this.settings.iAmount,console.log("amount re1",a)}this.showButton=!1,new c.c({"Content-Type":"application/json",Authorization:this.ynotification.passkey}),this.processMessage(n,o,s,this.ygen.authkey),this.processMessage(i,o,s,this.ygen.authkey),"all"==e?this.items.filter((function(e){t.ydata.addtoinbox({date:+new Date,title:s,message:o,sendby:t.authService.auth.currentUser.displayName,senderid:t.authService.auth.currentUser.uid,senderemail:t.authService.auth.currentUser.email,reciever:e.key,candelete:t.candeletemessage,paymentmessage:t.paymentmessage,notificationmessage:t.notificationmessage,amount:a||"0",read:!1,gatemessage:!1})})):this.toSendItems.filter((function(e){t.ydata.addtoinbox({date:+new Date,title:s,message:o,sendby:t.authService.auth.currentUser.displayName,senderid:t.authService.auth.currentUser.uid,senderemail:t.authService.auth.currentUser.email,reciever:e.key,candelete:t.candeletemessage,paymentmessage:t.paymentmessage,notificationmessage:t.notificationmessage,amount:a||"0",read:!1,gatemessage:!1})})),setTimeout((function(){t.showButton=!0}),4e3)}},{key:"processMessage",value:function(e,t,n,i){var o=this,s={headers:new c.c({"Content-Type":"application/json",Authorization:this.ynotification.passkey})},a=0,r=50,l=[];do{l=e.slice(a,r),a=r,r+=50;var g=JSON.stringify({registration_ids:l,data:{message:t,title:n,sound:"default",icon:"/assets/icon/favicon.png",badge:1,url:"/assets/icon/favicon.png"}});l.length>0&&this.http.post("https://fcm.googleapis.com/fcm/send",g,s).subscribe((function(e){o.showButton=!0;var t=e;1==t.success?o.toasterService.pop("success","You have notified","All good"):(o.toasterService.pop("success","You have notified","All good"),o.toasterService.pop("warn","Some one may not get message in bulk!!! ",t.results[0].error))}),(function(e){o.showButton=!0,o.toasterService.pop("error","You got problem"," Hey yogi!!!!")}))}while(l.length>0)}},{key:"getItems",value:function(e){this.toSendItems=new Array;var t=e.target.value;this.searchQuery=t,t&&""!=t.trim()&&(this.tempItems=this.items.filter("*all"==t?function(e){return!0}:function(e){return console.log("item",e),!!e.userName&&e.userName.toLowerCase().indexOf(t.toLowerCase())>-1}))}},{key:"saveSettings",value:function(){this.showButton=!1,"true"!=this.settings.emailverification&&1!=this.settings.emailverification||(this.settings.emailverification=!0),"true"!=this.settings.newApp&&1!=this.settings.newApp||(this.settings.newApp=!0),"true"!=this.settings.paymenton&&1!=this.settings.paymenton||(this.settings.paymenton=!0),this.ydata.saveSettings(this.settings)}},{key:"updateItem",value:function(e,t){"payment"==t?e&&(this.notificationmessage=e):"notification"==t&&this.paymentmessage&&!e&&(this.notificationmessage=!0,this.toasterService.pop("error","Important to note!!!","Payment message will be served as notification"))}},{key:"saveonlineflag",value:function(e){console.log("flag----",e),this.commontranl.saveOnlineflag(e)}}]),e}()).\u0275fac=function(e){return new(e||D)(h.Qb(m.a),h.Qb(d.a),h.Qb(u.a),h.Qb(b.a),h.Qb(r.d),h.Qb(c.a),h.Qb(l.a),h.Qb(g.AngularFireAuth))},D.\u0275cmp=h.Kb({type:D,selectors:[["app-sendmessage"]],decls:21,vars:11,consts:[["slot","start"],["padding",""],["text-wrap","","text-center",""],["width-33","",3,"click"],["name","build",3,"color"],["name","chatbubbles",3,"color"],["name","contacts",3,"color"],["width-34","",3,"click"],["name","contact",3,"color"],["class","animated bounceInDown",4,"ngIf"],["class","animated bounceInDown","class","animated bounceInDown",4,"ngIf"],[1,"animated","bounceInDown"],["color","primary",3,"ngModel","ngModelChange"],[1,"required",3,"placeholder","ngModel","ngModelChange"],["rows","5","cols","20",1,"required",3,"placeholder","ngModel","ngModelChange"],["position","stacked"],["type","number",1,"required",3,"placeholder","ngModel","ngModelChange"],["expand","block","fill","outline",3,"click"],["text-wrap",""],["color","warning",3,"ngModel","ngModelChange"],[4,"ngIf"],[3,"placeholder","ionInput"],["icon","spiral",4,"ngIf"],["text-wrap","",4,"ngFor","ngForOf"],["color","dark","checked","false",3,"ngModel","ngModelChange","ionChange"],["icon","spiral"]],template:function(e,t){1&e&&(h.Wb(0,"ion-header"),h.Wb(1,"ion-toolbar"),h.Wb(2,"ion-buttons",0),h.Rb(3,"ion-back-button"),h.Vb(),h.Wb(4,"ion-title"),h.Lc(5),h.jc(6,"translate"),h.Vb(),h.Vb(),h.Vb(),h.Wb(7,"ion-content",1),h.Wb(8,"ion-item",2),h.Wb(9,"ion-row"),h.Wb(10,"ion-col",3),h.ec("click",(function(){return t.makeSelection(0)})),h.Rb(11,"ion-icon",4),h.Vb(),h.Wb(12,"ion-col",3),h.ec("click",(function(){return t.makeSelection(1)})),h.Rb(13,"ion-icon",5),h.Rb(14,"ion-icon",6),h.Vb(),h.Wb(15,"ion-col",7),h.ec("click",(function(){return t.makeSelection(2)})),h.Rb(16,"ion-icon",5),h.Rb(17,"ion-icon",8),h.Vb(),h.Vb(),h.Vb(),h.Jc(18,f,117,109,"ion-list",9),h.Jc(19,M,29,27,"ion-list",10),h.Jc(20,k,33,32,"ion-list",9),h.Vb()),2&e&&(h.Db(5),h.Mc(h.kc(6,9,"Settings and Message")),h.Db(6),h.rc("color",t.selection[0]),h.Db(2),h.rc("color",t.selection[1]),h.Db(1),h.rc("color",t.selection[1]),h.Db(2),h.rc("color",t.selection[2]),h.Db(1),h.rc("color",t.selection[2]),h.Db(1),h.rc("ngIf","primary"==t.selection[0]),h.Db(1),h.rc("ngIf","primary"==t.selection[1]),h.Db(1),h.rc("ngIf","primary"==t.selection[2]))},directives:[a.v,a.ab,a.j,a.f,a.g,a.Y,a.s,a.y,a.K,a.r,a.w,i.m,a.D,a.C,a.Z,a.c,o.n,o.q,a.x,a.mb,a.W,a.hb,a.i,a.E,a.L,i.l,a.p,a.Q],pipes:[p.c],styles:["ion-icon[_ngcontent-%COMP%]{font-size:40px!important}#danger[_ngcontent-%COMP%]{font-size:1.3em}"]}),D),I=n("IZvt"),j=[{path:"",component:w}],L=((S=function e(){_classCallCheck(this,e)}).\u0275mod=h.Ob({type:S}),S.\u0275inj=h.Nb({factory:function(e){return new(e||S)},imports:[[i.c,o.i,a.bb,I.a,c.b,s.k.forChild(j)]]}),S)}}]);