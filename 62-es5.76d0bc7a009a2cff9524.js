function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{"nS/V":function(e,t,i){"use strict";i.r(t),i.d(t,"CategoriesPageModule",(function(){return C}));var n=i("ofXK"),o=i("3Pt+"),c=i("tyNb"),a=i("TEn/"),r=i("OJQs"),s=i("q3Kh"),u=i("fXoL"),l=i("0IaG"),b=i("sYmb"),d=["yocameraelement"];function h(e,t){if(1&e){var i=u.Xb();u.Wb(0,"ion-item"),u.Wb(1,"div",10),u.Wb(2,"app-appicon",11),u.ec("actionEvent",(function(e){return u.Cc(i),u.ic(2).downloadProducts(e)})),u.Vb(),u.Wb(3,"app-appicon",11),u.ec("actionEvent",(function(e){return u.Cc(i),u.ic(2).deleteproducts(e)})),u.Vb(),u.Vb(),u.Vb()}2&e&&(u.Db(2),u.rc("icon","cloud_download")("askquestion",!1)("icontext","Download Categories")("isiconwithtext",!0),u.Db(1),u.rc("icon","delete")("askquestion",!0)("icontext","Delete All Categories")("isiconwithtext",!0))}function f(e,t){if(1&e&&u.Rb(0,"img",16),2&e){var i=u.ic().$implicit;u.rc("src",i.image,u.Ec)}}function v(e,t){if(1&e){var i=u.Xb();u.Wb(0,"ion-item"),u.Wb(1,"div",10),u.Wb(2,"div",17),u.Mc(3),u.Vb(),u.Wb(4,"div",18),u.Wb(5,"app-appicon",19),u.ec("actionEvent",(function(){u.Cc(i);var e=t.$implicit,n=u.ic().$implicit;return u.ic(2).deletesubcategory(e,n.$key)})),u.Vb(),u.Wb(6,"app-appicon",20),u.ec("actionEvent",(function(){u.Cc(i);var e=t.$implicit,n=u.ic().$implicit;return u.ic(2).navigate("category",{key:n.$key,subcategoryid:e,action:"editsubcategory"})})),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&e){var n=t.$implicit,o=u.ic().$implicit;u.Db(3),u.Oc(" ",o.subcategory[n].title," "),u.Db(2),u.rc("color","accent")("askquestion",!0)("icon","delete")("icontext","delete")("isiconwithtext",!0),u.Db(1),u.rc("color","warning")("icon","edit")("icontext","edit")("isiconwithtext",!0)}}function g(e,t){if(1&e){var i=u.Xb();u.Wb(0,"div",21),u.Wb(1,"div",17),u.Wb(2,"app-appicon",22),u.ec("actionEvent",(function(){u.Cc(i);var e=u.ic().$implicit;return u.ic(2).deletecategory(e)})),u.Vb(),u.Vb(),u.Wb(3,"div",17),u.Wb(4,"app-appicon",20),u.ec("actionEvent",(function(){u.Cc(i);var e=u.ic().$implicit;return u.ic(2).navigate("category",{key:e.$key,action:"addsubcategory"})})),u.Vb(),u.Vb(),u.Vb()}2&e&&(u.Db(2),u.rc("color","accent")("icon","delete")("askquestion",!0)("icontext","Delete Category")("isiconwithtext",!0),u.Db(2),u.rc("color","accent")("icon","add_to_queue")("icontext","Add subcategory")("isiconwithtext",!0))}function p(e,t){if(1&e){var i=u.Xb();u.Wb(0,"ion-card"),u.Kc(1,f,1,1,"img",12),u.Wb(2,"ion-item",13),u.ec("click",(function(){u.Cc(i);var e=t.$implicit;return u.ic(2).navigate("category",{key:e.$key})})),u.Wb(3,"ion-label",14),u.Mc(4),u.Vb(),u.Vb(),u.Wb(5,"ion-card-content"),u.Mc(6),u.Vb(),u.Kc(7,v,7,10,"ion-item",9),u.jc(8,"objectsarray"),u.Kc(9,g,5,9,"div",15),u.Vb()}if(2&e){var n=t.$implicit,o=u.ic(2);u.Db(1),u.rc("ngIf",n.imageuploaded),u.Db(3),u.Oc(" ",n.title," "),u.Db(2),u.Oc(" ",n.description," "),u.Db(1),u.rc("ngForOf",u.kc(8,5,n.subcategory)),u.Db(2),u.rc("ngIf",o.ygen.isAdmin())}}function y(e,t){if(1&e&&(u.Wb(0,"ion-content",6),u.Kc(1,h,4,8,"ion-item",7),u.Wb(2,"div",8),u.Kc(3,p,10,7,"ion-card",9),u.jc(4,"async"),u.Vb(),u.Vb()),2&e){var i=u.ic();u.Db(1),u.rc("ngIf",i.ygen.isAdmin()),u.Db(2),u.rc("ngForOf",u.kc(4,2,i.events))}}var m,k,w=[{path:"",component:(m=function(){function e(t,i,n,o,c,a,r,s,u,l,b,d){_classCallCheck(this,e),this.excelservice=t,this.centerdb=i,this.yalert=n,this.ycamera=o,this.ygen=c,this.alertme=a,this.route=r,this.router=s,this.boardService=u,this.ysharedata=l,this.ydata=b,this.dialog=d,this.imagescapturedComp=new Map,this.screenrefresh=!0,this.mystrip=[],this.showre=!1,this.sourcere="",this.refreshme=!1,this.refreshthis=!0}return _createClass(e,[{key:"deletecategory",value:function(e){this.crudList.removefromList(e)}},{key:"deletesubcategory",value:function(e,t){this.ydata.getDatabase().list(r.P.getpath()+"/shop/categories/"+t+"/subcategory/"+e).remove()}},{key:"ngOnInit",value:function(){var e=this;this.centerdb.currenttenant.subscribe((function(t){e.crudList=new r.p(r.P.getpath()+"/shop/categories",e.ydata.getDatabase(),!0,e.ygen.getUid()),e.events=e.crudList.getList(),e.refreshCamera()}))}},{key:"viewEntry",value:function(e){e.registration&&Object.keys(e.registration).map((function(t){return Object.assign(e.registration[t],{$key:t})}))}},{key:"addsubcategory",value:function(e){}},{key:"navigate",value:function(e,t){this.ysharedata.setData("currentevent",t),this.router.navigate([e],{queryParams:t})}},{key:"takeAcion",value:function(e){console.log("yeah",e)}},{key:"doit",value:function(e,t){var i=this;setTimeout((function(){i.crudList.updateList(t?{$key:e.$key,active:!0,eventOver:!1}:{$key:e.$key,active:!1})}),1e3)}},{key:"closeEvent",value:function(e){var t=this;this.screenrefresh=!1,this.alertme.question("Are You Sure?","Close Event","No").then((function(i){i.value&&setTimeout((function(){t.crudList.updateList({$key:e.$key,active:!1,eventOver:!0})}),1e3),t.screenrefresh=!0}))}},{key:"active",value:function(e){var t=this;this.alertme.question("Are You Sure?","Activate Notice","No").then((function(i){i.value&&t.doit(e,!0)}))}},{key:"inactive",value:function(e){var t=this;this.alertme.question("Are You Sure?","Disable Notice","No").then((function(i){i.value&&t.doit(e,!1)}))}},{key:"edit",value:function(e){var t=this;this.alertme.question("Are You Sure?","Delete","No").then((function(i){i.value&&t.crudList.removefromList(e)}))}},{key:"delete",value:function(e){var t=this;this.alertme.question("Are You Sure?","Delete","No").then((function(i){i.value&&setTimeout((function(){t.crudList.removefromList(e)}),1e3)}))}},{key:"showpreview",value:function(e,t){console.log("event",e),console.log("key",t),this.showre=!0,this.sourcere=e,this.mystrip.push(e)}},{key:"getstrip",value:function(e,t){var i=t.filter((function(t){return t.whatfor===e}));return console.log(i.length),i}},{key:"deletfromStrip",value:function(e){this.mystrip=this.mystrip.filter((function(t){return t.whatfor!=e}))}},{key:"deletephoto",value:function(e){this.deletfromStrip(e.whatfor),this.refreshCamera()}},{key:"refreshCamera",value:function(){var e=this;this.refreshme=!1,setTimeout((function(){e.refreshme=!0}),100)}},{key:"savePhoto",value:function(e){var t=this;this.refreshCamera(),this.ygen.ismobile()?(this.alertme.infodata("Uploading and saving photo.."),this.yocam.saveMobileImage(e.src).then((function(i){console.log("what we have recieved image 1 "+i),console.log("what we have recieved image 1 "+i);var n=JSON.parse(i.response);console.log("we got the url...."+i.response),console.log("we got the url...."+n.secure_url),t.addImages(e.whatfor,{photo:n.secure_url}),t.deletephoto(e),t.alertme.successdata("Saved...")}))):this.yocam.saveImage(e.files).then((function(i){console.log("what we have recieved image 2 "+i.secure_url),t.addImages(e.whatfor,{photo:i.secure_url}),t.deletephoto(e)}))}},{key:"addImages",value:function(e,t){new r.p("/board/notices/"+e+"/images",this.ydata.getDatabase(),!0,this.ygen.getUid()).addtolist(t)}},{key:"deletesaved",value:function(e,t){var i=this;this.alertme.question("Are You Sure?","Delete","No").then((function(n){n.value&&new r.p("/board/notices/"+t+"/images",i.ydata.getDatabase(),!0,i.ygen.getUid()).removefromList({$key:e.key})}))}},{key:"downloadProducts",value:function(e){var t=this,i=this.crudList.getListRefer().snapshotChanges().pipe(Object(s.map)((function(e){return e.map((function(e){return Object.assign({$key:e.payload.key},e.payload.val())}))}))).subscribe((function(e){console.log("list",e);var n=[],o=0;e.forEach((function(e){var t={$key:o+=1,active:e.active,description:e.description,image:e.image,imageuploaded:e.imageuploaded,title:e.title,uploaded:"TRUE"};if(e.subcategory){var i=[];Object.values(e.subcategory).forEach((function(e){i.push({description:e.description,title:e.title,active:e.active,image:e.image})})),i.length>0&&(t.subcategory=JSON.stringify(Object.values(i)).replace(/,/g,"|"))}n.push(t)})),0==n.length?t.yalert.openSnackBar("No Categories for downlowd","Ok"):(t.excelservice.exportAsExcelFile(n,"categories"),t.yalert.openSnackBar("All Categories will be downloaded...","Ok")),i.unsubscribe()}))}},{key:"deleteproducts",value:function(e){var t=this;this.crudList.listrefer.remove(),this.refreshthis=!1,setTimeout((function(){t.refreshthis=!0}),1500)}}]),e}(),m.\u0275fac=function(e){return new(e||m)(u.Qb(r.r),u.Qb(r.P),u.Qb(r.a),u.Qb(r.N),u.Qb(r.T),u.Qb(r.a),u.Qb(c.a),u.Qb(c.j),u.Qb(r.i),u.Qb(r.R),u.Qb(r.Q),u.Qb(l.b))},m.\u0275cmp=u.Kb({type:m,selectors:[["app-categories"]],viewQuery:function(e,t){var i;1&e&&(u.Tc(d,!0),u.Tc(d,!0)),2&e&&(u.yc(i=u.fc())&&(t.yocam=i.first),u.yc(i=u.fc())&&(t.yocamViewChildren=i))},decls:11,vars:5,consts:[[3,"color"],["slot","start"],["slot","end","color","secondary"],[3,"click"],["slot","icon-only","name","add"],["padding","",4,"ngIf"],["padding",""],[4,"ngIf"],[1,"productlist"],[4,"ngFor","ngForOf"],[1,"bbcontainer"],[3,"icon","askquestion","icontext","isiconwithtext","actionEvent"],["class","imageshow",3,"src",4,"ngIf"],["button","",3,"click"],[1,"ion-text-wrap"],["class","bcontainer",4,"ngIf"],[1,"imageshow",3,"src"],[1,"bitems"],[1,"subcataction"],[3,"color","askquestion","icon","icontext","isiconwithtext","actionEvent"],[3,"color","icon","icontext","isiconwithtext","actionEvent"],[1,"bcontainer"],[3,"color","icon","askquestion","icontext","isiconwithtext","actionEvent"]],template:function(e,t){1&e&&(u.Wb(0,"ion-header"),u.Wb(1,"ion-toolbar",0),u.Wb(2,"ion-buttons",1),u.Rb(3,"ion-back-button"),u.Vb(),u.Wb(4,"ion-title"),u.Mc(5),u.jc(6,"translate"),u.Vb(),u.Wb(7,"ion-buttons",2),u.Wb(8,"ion-button",3),u.ec("click",(function(){return t.navigate("category",{})})),u.Rb(9,"ion-icon",4),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Kc(10,y,5,4,"ion-content",5)),2&e&&(u.Db(1),u.rc("color","warning"),u.Db(4),u.Nc(u.kc(6,3,"Categories")),u.Db(5),u.rc("ngIf",t.refreshthis))},directives:[a.y,a.hb,a.j,a.f,a.g,a.fb,a.i,a.z,n.m,a.s,n.l,a.D,r.f,a.k,a.J,a.l],pipes:[b.c,n.b,r.z],styles:[".bbcontainer[_ngcontent-%COMP%]{width:100%}.bbcontainer[_ngcontent-%COMP%], .bcontainer[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.subcataction[_ngcontent-%COMP%]{display:flex}.productlist[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;align-items:stretch;justify-content:center}on-card[_ngcontent-%COMP%]{width:50vh}.productlist[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:200px}"]}),m)}],C=((k=function e(){_classCallCheck(this,e)}).\u0275mod=u.Ob({type:k}),k.\u0275inj=u.Nb({factory:function(e){return new(e||k)},imports:[[n.c,o.j,a.ib,r.H,r.o,r.b,c.n.forChild(w)]]}),k)}}]);