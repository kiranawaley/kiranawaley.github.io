function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,n,e){return n&&_defineProperties(t.prototype,n),e&&_defineProperties(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{"+ltH":function(t,n,e){"use strict";e.r(n),e.d(n,"ProductsPageModule",(function(){return q}));var i=e("ofXK"),o=e("3Pt+"),c=e("tyNb"),r=e("TEn/"),a=e("OJQs"),s=e("q3Kh"),d=e("fXoL"),l=e("0IaG"),u=e("gren"),p=e("tk/3"),b=e("1jcm"),g=e("hV0v"),h=e("sYmb"),f=["yocameraelement"];function y(t,n){if(1&t){var e=d.Xb();d.Wb(0,"ion-button",4),d.ec("click",(function(){return d.Cc(e),d.ic().navigate("product",{previousUrl:"products"})})),d.Rb(1,"ion-icon",6),d.Vb()}}function v(t,n){if(1&t){var e=d.Xb();d.Wb(0,"ion-item"),d.Wb(1,"div",9),d.Wb(2,"app-appicon",10),d.ec("actionEvent",(function(t){return d.Cc(e),d.ic(2).downloadProducts(t)})),d.Vb(),d.Wb(3,"div"),d.Wb(4,"mat-slide-toggle",11),d.ec("ngModelChange",(function(t){return d.Cc(e),d.ic(2).uploaded=t})),d.Mc(5),d.jc(6,"translate"),d.Vb(),d.Vb(),d.Wb(7,"app-appicon",10),d.ec("actionEvent",(function(t){return d.Cc(e),d.ic(2).deleteproducts(t)})),d.Vb(),d.Vb(),d.Vb()}if(2&t){var i=d.ic(2);d.Db(2),d.rc("icon","cloud_download")("askquestion",!1)("icontext","Download Products")("isiconwithtext",!0),d.Db(2),d.rc("ngModel",i.uploaded),d.Db(1),d.Oc("",d.kc(6,10,"Uploaded Flag")," "),d.Db(2),d.rc("icon","delete")("askquestion",!0)("icontext","Delete All Products")("isiconwithtext",!0)}}function m(t,n){if(1&t){var e=d.Xb();d.Wb(0,"ion-item"),d.Wb(1,"div",9),d.Wb(2,"app-appicon",10),d.ec("actionEvent",(function(){return d.Cc(e),d.ic(2).ygen.routeto("uploadcatalog",{})})),d.Vb(),d.Vb(),d.Vb()}2&t&&(d.Db(2),d.rc("icon","cloud_upload")("askquestion",!1)("icontext","Upload Products")("isiconwithtext",!0))}function x(t,n){if(1&t&&d.Rb(0,"app-productcard-grandbazar",14),2&t){var e=n.$implicit,i=d.ic(3);d.rc("product",e)("productlist",i.crudList)("onpage","products")}}function w(t,n){if(1&t&&(d.Wb(0,"div",12),d.Kc(1,x,1,3,"app-productcard-grandbazar",13),d.Vb()),2&t){var e=n.ngIf,i=d.ic(2);d.Db(1),d.rc("ngForOf",i.processlist(e,i.whatsize))}}function k(t,n){if(1&t){var e=d.Xb();d.Wb(0,"ion-infinite-scroll",15),d.ec("ionInfinite",(function(t){return d.Cc(e),d.ic(2).loadData(t)})),d.Rb(1,"ion-infinite-scroll-content",16),d.jc(2,"translate"),d.Vb()}2&t&&(d.Db(1),d.sc("loadingText",d.kc(2,1,"Loading more data...")))}function C(t,n){if(1&t&&(d.Wb(0,"ion-content"),d.Kc(1,v,8,12,"ion-item",5),d.Kc(2,m,3,4,"ion-item",5),d.Kc(3,w,2,1,"div",7),d.jc(4,"async"),d.Kc(5,k,3,3,"ion-infinite-scroll",8),d.Vb()),2&t){var e=d.ic();d.Db(1),d.rc("ngIf",e.ygen.isAdmin()),d.Db(1),d.rc("ngIf",e.ygen.isAdmin()),d.Db(1),d.rc("ngIf",d.kc(4,4,e.events)),d.Db(2),d.rc("ngIf",e.showscroll)}}var O,P,_=((O=function(){function t(n,e,i,o,c,r,s,d,l,u,p,b,g,h,f){var y=this;_classCallCheck(this,t),this.ycat=n,this.ycamera=e,this.ygen=i,this.alertme=o,this.route=c,this.router=r,this.boardService=s,this.ysharedata=d,this.ydata=l,this.dialog=u,this.excelservice=p,this.yalert=b,this.centerdb=g,this.ngxuiloaderservice=h,this.http=f,this.imagescapturedComp=new Map,this.screenrefresh=!0,this.uploaded=!0,this.mystrip=[],this.showre=!1,this.sourcere="",this.refreshme=!1,this.productlistcount=0,this.showscroll=!1,this.refreshthis=!0,this.whatsize=50,this.centerdb.currenttenant.subscribe((function(t){y.crudList=new a.p(a.P.getpath()+"/shop/products",l.getDatabase(),!0,y.ygen.getUid()),y.events=y.crudList.getList(),y.events.subscribe((function(t){y.productlistcount=t.length,y.showscroll=!0}))}))}return _createClass(t,[{key:"deleteproduct",value:function(t){this.crudList.removefromList(t)}},{key:"deleteproducts",value:function(t){var n=this;this.crudList.getListRefer().remove(),this.refreshthis=!1,this.ngxuiloaderservice.start(),setTimeout((function(){n.refreshthis=!0,n.ngxuiloaderservice.stop()}),3e3)}},{key:"copyProduct",value:function(t){var n=Object.assign({},t);delete n.$key,this.crudList.addtolist(n)}},{key:"deletesubcategory",value:function(t,n){this.ydata.getDatabase().list(a.P.getpath()+"/shop/products/"+n+"/subcategory/"+t).remove()}},{key:"navigate",value:function(t,n){this.ysharedata.setData("currentevent",n),this.router.navigate([t],{queryParams:n})}},{key:"ngOnInit",value:function(){}},{key:"addtocart",value:function(t,n,e){e&&(n.orderqty=0);var i=n.orderqty?n.orderqty+t:1;i>n.maxqty?this.alertme.openSnackBar("Maximum quantiy you can order is ".concat(n.maxqty),"Ok"):(Object.assign(n,{orderqty:i}),this.ycat.iscartItem(n)?this.ycat.updatequantity(n):1==i&&(this.alertme.openSnackBar("Your shopping cart updated with ".concat(n.orderqty," quantity"),"Ok"),this.ycat.addtocart(n))),0==n.orderqty&&this.ycat.delete(n)}},{key:"downloadProducts",value:function(t){var n=this,e=this.crudList.getListRefer().snapshotChanges().pipe(Object(s.map)((function(t){return t.map((function(t){return Object.assign({$key:t.payload.key},t.payload.val())}))}))).subscribe((function(t){e.unsubscribe();var i=[];t.forEach((function(t){var e={$key:JSON.stringify(t.$key),category:t.category,subcategory:t.subcategory,brand:t.brand,title:t.title,description:t.description,image:t.image,imageuploaded:t.imageuploaded,isorganic:t.isorganic,istopsaver:t.istopsaver,isveg:t.isveg,maxqty:t.maxqty,mrp:t.mrp,price:t.price,outofstock:t.outofstock,uploaded:n.uploaded,heavydiscount:t.heavydiscount,newarrival:t.heavydiscount};if(t.variations){var o=[];Object.values(t.variations).forEach((function(t){o.push({description:t.description,mrp:t.mrp,price:t.price,maxqty:t.maxqty})})),o.length>0&&(e.variations=JSON.stringify(Object.values(o)).replace(/,/g,"|"))}else e.variations="";i.push(e)})),0==i.length?n.yalert.openSnackBar("No products for downlowd","Ok"):(n.excelservice.exportAsExcelFile(i,"products"),n.yalert.openSnackBar("All Products will be downloaded...","Ok"))}))}},{key:"processlist",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return t.length<n&&(n=t.length),t.slice(0,n)}},{key:"toggleInfiniteScroll",value:function(){this.infiniteScroll.disabled=!this.infiniteScroll.disabled}},{key:"loadData",value:function(t){var n=this;setTimeout((function(){console.log("Done"),t.target.complete(),n.whatsize>=n.productlistcount?t.target.disabled=!0:(t.target.disabled=!1,n.whatsize=n.whatsize+50)}),500)}}]),t}()).\u0275fac=function(t){return new(t||O)(d.Qb(a.O),d.Qb(a.N),d.Qb(a.T),d.Qb(a.a),d.Qb(c.a),d.Qb(c.j),d.Qb(a.i),d.Qb(a.R),d.Qb(a.Q),d.Qb(l.b),d.Qb(a.r),d.Qb(a.a),d.Qb(a.P),d.Qb(u.c),d.Qb(p.b))},O.\u0275cmp=d.Kb({type:O,selectors:[["app-products"]],viewQuery:function(t,n){var e;1&t&&(d.Tc(f,!0),d.Tc(r.A,!0),d.Tc(f,!0)),2&t&&(d.yc(e=d.fc())&&(n.yocam=e.first),d.yc(e=d.fc())&&(n.infiniteScroll=e.first),d.yc(e=d.fc())&&(n.yocamViewChildren=e))},decls:12,vars:6,consts:[[3,"color"],["slot","start"],["slot","end","color","secondary"],[3,"click",4,"ngIf"],[3,"click"],[4,"ngIf"],["slot","icon-only","name","add"],["class","productlist",4,"ngIf"],["threshold","100px",3,"ionInfinite",4,"ngIf"],[1,"bbcontainer"],[3,"icon","askquestion","icontext","isiconwithtext","actionEvent"],[3,"ngModel","ngModelChange"],[1,"productlist"],[3,"product","productlist","onpage",4,"ngFor","ngForOf"],[3,"product","productlist","onpage"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles",3,"loadingText"]],template:function(t,n){1&t&&(d.Wb(0,"ion-header"),d.Wb(1,"ion-toolbar",0),d.Wb(2,"ion-buttons",1),d.Rb(3,"ion-menu-button"),d.Vb(),d.Wb(4,"ion-title"),d.Mc(5),d.jc(6,"translate"),d.Vb(),d.Wb(7,"ion-buttons",2),d.Kc(8,y,2,0,"ion-button",3),d.Wb(9,"ion-button",4),d.ec("click",(function(){return n.navigate("checkout",{})})),d.Rb(10,"app-appcart"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Kc(11,C,6,6,"ion-content",5)),2&t&&(d.Db(1),d.rc("color","warning"),d.Db(4),d.Nc(d.kc(6,4,"Products")),d.Db(3),d.rc("ngIf",n.ygen.isAdmin()&&n.ygen.canAddProducts()),d.Db(3),d.rc("ngIf",n.refreshthis))},directives:[r.y,r.hb,r.j,r.N,r.fb,i.m,r.i,a.d,r.z,r.s,r.D,a.f,b.a,o.p,o.s,i.l,g.a,r.A,r.B],pipes:[h.c,i.b],styles:[".bbcontainer[_ngcontent-%COMP%]{justify-content:space-around;width:100%}.bbcontainer[_ngcontent-%COMP%], .bcontainer[_ngcontent-%COMP%]{display:flex;flex-direction:row}.bcontainer[_ngcontent-%COMP%]{justify-content:space-between}.subcataction[_ngcontent-%COMP%]{display:flex}app-appicon[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%], app-appicon[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:36px}.productCard[_ngcontent-%COMP%]{display:inline-block;white-space:pre-line;padding:2px auto;width:calc(70% - 20px);height:auto;box-shadow:0 4px 16px rgba(156,153,153,.97);--box-shadow:0 4px 16px rgba(156,153,153,0.97)}.cardBorderRadius[_ngcontent-%COMP%]{--border-radius:8px;border-radius:8px;width:100%;height:100%;min-width:200px}.productImage[_ngcontent-%COMP%]{padding:0 40px;position:relative;margin-top:10px}.discountSection[_ngcontent-%COMP%]{background:#15bf15;color:#fff;position:absolute;padding:6px 16px;border-radius:5px;font-weight:700;margin-top:13px;left:10px}.soldoutSection[_ngcontent-%COMP%]{background:var(--ion-color-design);color:#db4ba4;margin-top:-16px}.outofstockSection[_ngcontent-%COMP%], .soldoutSection[_ngcontent-%COMP%]{position:absolute;padding:6px 16px;border-radius:5px;font-weight:700;right:10px}.outofstockSection[_ngcontent-%COMP%]{background:#b4b108;color:#fff;margin-top:-24%}.dFlexAlignItemCenter[_ngcontent-%COMP%]{display:flex;align-items:center}.subTitle[_ngcontent-%COMP%]{font-size:16px;text-decoration:line-through;padding-left:16px;color:#000}.productDesc[_ngcontent-%COMP%]{color:var(--ion-color-dark);padding-bottom:16px}.productQty[_ngcontent-%COMP%]{color:#000;font-weight:700}.inner-scroll[_ngcontent-%COMP%]   .scroll-y[_ngcontent-%COMP%]   .overscroll[_ngcontent-%COMP%]{padding:0}ion-card[_ngcontent-%COMP%]{width:100%;height:100%;margin-left:unset;margin-right:unset;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-bottom:0}img[_ngcontent-%COMP%]{height:180px;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;margin:auto}.button-inner[_ngcontent-%COMP%]{justify-content:space-between}ion-button[_ngcontent-%COMP%]{height:auto;color:#8b0000}.productlist[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;align-items:stretch}"]}),O),M=e("uUdd"),D=[{path:"",component:_}],q=((P=function t(){_classCallCheck(this,t)}).\u0275mod=d.Ob({type:P}),P.\u0275inj=d.Nb({factory:function(t){return new(t||P)},imports:[[i.c,o.j,r.ib,a.H,a.o,a.b,M.a,c.n.forChild(D)]]}),P)}}]);