function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{G31D:function(e,t,a){"use strict";a.r(t),a.d(t,"TenantnewPageModule",(function(){return D}));var n=a("ofXK"),i=a("3Pt+"),o=a("tyNb"),r=a("TEn/"),c=a("D+2S"),s=a("sH8K"),l=a("DzsY"),h=a("0nTO"),u=a("mLjM"),d=a("+DAS"),p=a("DVUX"),b=a("YKLQ"),m=a("gAVi"),f=a("2Vo4"),g=a("fXoL"),v=a("Wp6s"),w=a("iEmi");function y(e,t){if(1&e){var a=g.Xb();g.Wb(0,"yogagainv2-dyanamic-page",3),g.ec("actionEvent",(function(e){return g.Cc(a),g.ic().send(e)}))("cancelEvent",(function(e){return g.Cc(a),g.ic().cancel(e)})),g.Vb()}if(2&e){var n=g.ic();g.rc("captchaOn",n.needcaptcha)("captchaName","tenantcaptcha")("whatform",n.getmap())("whatformgroup",n.getformgroup())("whichbuttons",n.getmybuttons())}}var E,k,T=((E=function(){function e(t,a,n,i,o,r,c,s,l,h){var u=this;_classCallCheck(this,e),this.yovalservice=t,this.yobuilderservice=a,this.ynotification=n,this.ydataservice=i,this.toasterService=o,this.ydatashare=r,this.ystorageservice=c,this.router=s,this.route=l,this.cd=h,this.title="Register Kirana Shop",this.tenantlist=[],this.existskya=!0,this.whatcontrolsmap=new Map,this.clear=new f.a(!1),this.needcaptcha=!1,this.mybuttons=new Map,this.loadingindicator=!1,"/tenantedit"!==location.pathname&&(this.needcaptcha=!0,this.ystorageservice.removeItem(b.a.SELECTED_TENANT));var d=this.route.snapshot.paramMap.get("id");d||this.startObject(this.edittenant),this.clear.next(!1),d?(this.needcaptcha=!1,this.ydataservice.retrivedata("/tenantlist",d).subscribe((function(e){u.edittenant=e,u.edittenant.key=d,u.clear.next(!1),u.startObject(u.edittenant),setTimeout((function(){u.clear.next(!0)}))}),(function(e){console.log("error",e)}),(function(){console.log("finished....")}))):this.clear.next(!0),i.getTenants().subscribe((function(e){u.tenantlist=[],u.tenantlist.push(e)}))}return _createClass(e,[{key:"getmap",value:function(){return this.whatcontrolsmap}},{key:"getformgroup",value:function(){return this.inwhatformgroup}},{key:"getmybuttons",value:function(){return this.mybuttons}},{key:"ngOnInit",value:function(){console.log("YdatashareService.SELECTED_TENANT",this.ystorageservice.getItem(b.a.SELECTED_TENANT))}},{key:"startObject",value:function(e){e&&(this.title="Edit Community");var t=new Map,a=[],n=0;a[n]=new u.b(n,"tenantname","",u.a.text),a[n].placeholder="Enter Kirana Shop Name",a[n].hint="Its your tenanat Name, should be unique",a[++n]=new u.b(n,"tenantdescription","",u.a.textarea),a[n].placeholder="Enter Shop Description",a[++n]=new u.b(n,"registringname","",u.a.text),a[n].placeholder="Enter Your Name",a[++n]=new u.b(n,"registeringphone","",u.a.phone),a[n].placeholder="Enter Your Phone",a[++n]=new u.b(n,"registertingemail","",u.a.email),a[n].placeholder="Enter Your Email",a[++n]=new u.b(n,"address","",u.a.textarea),a[n].placeholder="Your Shop address",a[++n]=new u.b(n,"city","",u.a.text),a[n].placeholder="Your Shop City",a[++n]=new u.b(n,"state","",u.a.text),a[n].placeholder="Your Shop state",a[++n]=new u.b(n,"zip","",u.a.text),a[n].placeholder="Your Shop Pincode",a[++n]=new u.b(n,"offerhomedelivery",!0,u.a.slidetoggle),a[n].placeholder="Offer Home Delivery",a[n].required=!1,a[n].showme=!0,a[++n]=new u.b(n,"offervegetables",!0,u.a.slidetoggle),a[n].placeholder="Sale Vegetables",a[n].required=!1,a[n].showme=!0,a[++n]=new u.b(n,"acceptonlinepayment",!0,u.a.slidetoggle),a[n].placeholder="Online Payment",a[n].required=!1,a[n].showme=!0,a[++n]=new u.b(n,"tenantlogo","https://res.cloudinary.com/ideasyogi/image/upload/v1589964651/default_qkhcdj.jpg",u.a.image),a[n].placeholder="Shop Picture",a[++n]=new u.b(n,"tenantfire",'{"x":"X"}',u.a.textarea),a[n].placeholder="Database Config",a[n].enabled=!!e,a[n].showme=!!e,a[n].required=!!e,a[++n]=new u.b(n,"tenantcloud",'{"x":"X"}',u.a.textarea),a[n].placeholder="Image Config",a[n].enabled=!!e,a[n].showme=!!e,a[n].required=!!e,a[++n]=new u.b(n,"active",this.checkpresence(e,"active",!1),u.a.slidetoggle),a[n].placeholder="Active",a[n].enabled=!!e,a[n].showme=!!e,a[n].required=!1,a[++n]=new u.b(n,"approved",this.checkpresence(e,"approved",!1),u.a.slidetoggle),a[n].placeholder="Approved",a[n].enabled=!!e,a[n].showme=!!e,a[n].required=!1,a[++n]=new u.b(n,"inprocess",this.checkpresence(e,"inprocess",!0),u.a.slidetoggle),a[n].placeholder="InProgress",a[n].enabled=!!e,a[n].showme=!!e,a[n].required=!1,e&&(a[++n]=new u.b(n,"key",e.key,u.a.text),a[n].enabled=!0,a[n].showme=!1,a[n].required=!1),a.forEach((function(a){if(e){var n=e[a.name];a.whattype!==u.a.radio&&(a.value=n),t.set(a.name,a)}else t.set(a.name,a)})),this.inwhatformgroup=this.yobuilderservice.createFormGroup(t),this.whatcontrolsmap=this.yobuilderservice.createMap(t,this.inwhatformgroup);var i=new c.a("Cancel","cancel","cancel_presentation","secondary",!1),o=new c.a("Save","register","lock_open","primary",!1);this.mybuttons.set("Action2",o),this.mybuttons.set("Action1",i)}},{key:"checkpresence",value:function(e,t,a){return e?e[t]:a}},{key:"send",value:function(e){console.log("capturing events",e),this.edittenant?this.updateTenant(e.data.value):this.registerNewTenant(e.data.value)}},{key:"cancel",value:function(e){this.router.navigateByUrl("/tenants")}},{key:"updateTenant",value:function(e){console.log("updated tenant",e),this.ydataservice.updateTenant(e)}},{key:"registerNewTenant",value:function(e){var t=this;new Promise((function(a,n){t.tenantlist&&t.tenantlist.forEach((function(n){return n.forEach((function(n){n.tenantname.toLowerCase()==e.tenantname.toLowerCase()&&(t.existskya=!0,a(!0)),t.existskya=!1,a(!1)}))}))})).then((function(a){a?t.toasterService.pop("error","Error","Already this name is taken, please use another one!"):(t.ydataservice.addTenant(e),t.ynotification.sendNotificationToAdmim("New Tenant Added ".concat(e.tenantname)))}))}},{key:"ionViewDidLeave",value:function(){console.log("leaving"),this.ystorageservice.removeItem(b.a.SELECTED_TENANT)}}]),e}()).\u0275fac=function(e){return new(e||E)(g.Qb(s.a),g.Qb(l.a),g.Qb(h.a),g.Qb(d.a),g.Qb(p.d),g.Qb(b.a),g.Qb(m.a),g.Qb(o.j),g.Qb(o.a),g.Qb(g.h))},E.\u0275cmp=g.Kb({type:E,selectors:[["app-tenantnew"]],decls:11,vars:4,consts:[["slot","start"],[1,"box"],[3,"captchaOn","captchaName","whatform","whatformgroup","whichbuttons","actionEvent","cancelEvent",4,"ngIf"],[3,"captchaOn","captchaName","whatform","whatformgroup","whichbuttons","actionEvent","cancelEvent"]],template:function(e,t){1&e&&(g.Wb(0,"ion-header"),g.Wb(1,"ion-toolbar"),g.Wb(2,"ion-buttons",0),g.Rb(3,"ion-menu-button"),g.Vb(),g.Wb(4,"ion-title"),g.Mc(5),g.Vb(),g.Vb(),g.Vb(),g.Wb(6,"ion-content"),g.Wb(7,"mat-card"),g.Wb(8,"mat-card-content",1),g.Kc(9,y,1,5,"yogagainv2-dyanamic-page",2),g.jc(10,"async"),g.Vb(),g.Vb(),g.Vb()),2&e&&(g.Db(5),g.Nc(t.title),g.Db(4),g.rc("ngIf",g.kc(10,2,t.clear)))},directives:[r.y,r.fb,r.j,r.L,r.db,r.s,v.a,v.d,n.m,w.a],pipes:[n.b],styles:[""]}),E),C=a("hVaU"),x=a("4pxM"),N=a("IZvt"),S=[{path:"",component:T}],D=((k=function e(){_classCallCheck(this,e)}).\u0275mod=g.Ob({type:k}),k.\u0275inj=g.Nb({factory:function(e){return new(e||k)},imports:[[n.c,i.i,r.gb,C.a,x.a,N.a,o.n.forChild(S)]]}),k)}}]);