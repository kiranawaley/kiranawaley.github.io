function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{G31D:function(e,t,n){"use strict";n.r(t),n.d(t,"TenantnewPageModule",(function(){return _}));var a=n("ofXK"),i=n("3Pt+"),o=n("tyNb"),r=n("TEn/"),c=n("D+2S"),s=n("sH8K"),h=n("DzsY"),l=n("0nTO"),u=n("mLjM"),p=n("+DAS"),d=n("DVUX"),b=n("YKLQ"),m=n("gAVi"),f=n("2Vo4"),g=n("fXoL"),v=n("Wp6s"),w=n("iEmi");function y(e,t){if(1&e){var n=g.Xb();g.Wb(0,"yogagainv2-dyanamic-page",3),g.ec("actionEvent",(function(e){return g.Cc(n),g.ic().send(e)}))("cancelEvent",(function(e){return g.Cc(n),g.ic().cancel(e)})),g.Vb()}if(2&e){var a=g.ic();g.rc("captchaOn",a.needcaptcha)("captchaName","tenantcaptcha")("whatform",a.getmap())("whatformgroup",a.getformgroup())("whichbuttons",a.getmybuttons())}}var E,k,T=((E=function(){function e(t,n,a,i,o,r,c,s,h,l){var u=this;_classCallCheck(this,e),this.yovalservice=t,this.yobuilderservice=n,this.ynotification=a,this.ydataservice=i,this.toasterService=o,this.ydatashare=r,this.ystorageservice=c,this.router=s,this.route=h,this.cd=l,this.title="Register Kirana Shop",this.tenantlist=[],this.existskya=!0,this.whatcontrolsmap=new Map,this.clear=new f.a(!1),this.needcaptcha=!1,this.mybuttons=new Map,this.loadingindicator=!1,"/tenantedit"!==location.pathname&&(this.needcaptcha=!0,this.ystorageservice.removeItem(b.a.SELECTED_TENANT));var p=this.route.snapshot.paramMap.get("id");p||this.startObject(this.edittenant),this.clear.next(!1),p?(this.needcaptcha=!1,this.ydataservice.retrivedata("/tenantlist",p).subscribe((function(e){u.edittenant=e,u.edittenant.key=p,u.clear.next(!1),u.startObject(u.edittenant),setTimeout((function(){u.clear.next(!0)}))}),(function(e){console.log("error",e)}),(function(){console.log("finished....")}))):this.clear.next(!0),i.getTenants().subscribe((function(e){u.tenantlist=[],u.tenantlist.push(e)}))}return _createClass(e,[{key:"getmap",value:function(){return this.whatcontrolsmap}},{key:"getformgroup",value:function(){return this.inwhatformgroup}},{key:"getmybuttons",value:function(){return this.mybuttons}},{key:"ngOnInit",value:function(){console.log("YdatashareService.SELECTED_TENANT",this.ystorageservice.getItem(b.a.SELECTED_TENANT))}},{key:"startObject",value:function(e){e&&(this.title="Edit Community");var t=new Map,n=[],a=0;n[a]=new u.b(a,"tenantname","",u.a.text),n[a].placeholder="Enter Kirana Shop Name",n[a].hint="Its your tenanat Name, should be unique",n[++a]=new u.b(a,"tenantdescription","",u.a.textarea),n[a].placeholder="Enter Shop Description",n[++a]=new u.b(a,"registringname","",u.a.text),n[a].placeholder="Enter Your Name",n[++a]=new u.b(a,"registeringphone","",u.a.phone),n[a].placeholder="Enter Your Phone",n[++a]=new u.b(a,"registertingemail","",u.a.email),n[a].placeholder="Enter Your Email",n[++a]=new u.b(a,"address","",u.a.textarea),n[a].placeholder="Your Shop address",n[++a]=new u.b(a,"city","",u.a.text),n[a].placeholder="Your Shop City",n[++a]=new u.b(a,"state","",u.a.text),n[a].placeholder="Your Shop state",n[++a]=new u.b(a,"zip","",u.a.text),n[a].placeholder="Your Shop Pincode",n[++a]=new u.b(a,"tenantlogo","https://res.cloudinary.com/ideasyogi/image/upload/v1589964651/default_qkhcdj.jpg",u.a.image),n[a].placeholder="Shop Picture",n[++a]=new u.b(a,"tenantfire",'{"x":"X"}',u.a.textarea),n[a].placeholder="Database Config",n[a].enabled=!!e,n[a].showme=!!e,n[a].required=!!e,n[++a]=new u.b(a,"tenantcloud",'{"x":"X"}',u.a.textarea),n[a].placeholder="Image Config",n[a].enabled=!!e,n[a].showme=!!e,n[a].required=!!e,n[++a]=new u.b(a,"active",this.checkpresence(e,"active",!1),u.a.slidetoggle),n[a].placeholder="Active",n[a].enabled=!!e,n[a].showme=!!e,n[a].required=!1,n[++a]=new u.b(a,"approved",this.checkpresence(e,"approved",!1),u.a.slidetoggle),n[a].placeholder="Approved",n[a].enabled=!!e,n[a].showme=!!e,n[a].required=!1,n[++a]=new u.b(a,"inprocess",this.checkpresence(e,"inprocess",!0),u.a.slidetoggle),n[a].placeholder="InProgress",n[a].enabled=!!e,n[a].showme=!!e,n[a].required=!1,e&&(n[++a]=new u.b(a,"key",e.key,u.a.text),n[a].enabled=!0,n[a].showme=!1,n[a].required=!1),n.forEach((function(n){if(e){var a=e[n.name];n.whattype!==u.a.radio&&(n.value=a),t.set(n.name,n)}else t.set(n.name,n)})),this.inwhatformgroup=this.yobuilderservice.createFormGroup(t),this.whatcontrolsmap=this.yobuilderservice.createMap(t,this.inwhatformgroup);var i=new c.a("Cancel","cancel","cancel_presentation","secondary",!1),o=new c.a("Save","register","lock_open","primary",!1);this.mybuttons.set("Action2",o),this.mybuttons.set("Action1",i)}},{key:"checkpresence",value:function(e,t,n){return e?e[t]:n}},{key:"send",value:function(e){console.log("capturing events",e),this.edittenant?this.updateTenant(e.data.value):this.registerNewTenant(e.data.value)}},{key:"cancel",value:function(e){this.router.navigateByUrl("/tenants")}},{key:"updateTenant",value:function(e){console.log("updated tenant",e),this.ydataservice.updateTenant(e)}},{key:"registerNewTenant",value:function(e){var t=this;new Promise((function(n,a){t.tenantlist&&t.tenantlist.forEach((function(a){return a.forEach((function(a){a.tenantname.toLowerCase()==e.tenantname.toLowerCase()&&(t.existskya=!0,n(!0)),t.existskya=!1,n(!1)}))}))})).then((function(n){n?t.toasterService.pop("error","Error","Already this name is taken, please use another one!"):(t.ydataservice.addTenant(e),t.ynotification.sendNotificationToAdmim("New Tenant Added ".concat(e.tenantname)))}))}},{key:"ionViewDidLeave",value:function(){console.log("leaving"),this.ystorageservice.removeItem(b.a.SELECTED_TENANT)}}]),e}()).\u0275fac=function(e){return new(e||E)(g.Qb(s.a),g.Qb(h.a),g.Qb(l.a),g.Qb(p.a),g.Qb(d.d),g.Qb(b.a),g.Qb(m.a),g.Qb(o.g),g.Qb(o.a),g.Qb(g.h))},E.\u0275cmp=g.Kb({type:E,selectors:[["app-tenantnew"]],decls:11,vars:4,consts:[["slot","start"],[1,"box"],[3,"captchaOn","captchaName","whatform","whatformgroup","whichbuttons","actionEvent","cancelEvent",4,"ngIf"],[3,"captchaOn","captchaName","whatform","whatformgroup","whichbuttons","actionEvent","cancelEvent"]],template:function(e,t){1&e&&(g.Wb(0,"ion-header"),g.Wb(1,"ion-toolbar"),g.Wb(2,"ion-buttons",0),g.Rb(3,"ion-menu-button"),g.Vb(),g.Wb(4,"ion-title"),g.Lc(5),g.Vb(),g.Vb(),g.Vb(),g.Wb(6,"ion-content"),g.Wb(7,"mat-card"),g.Wb(8,"mat-card-content",1),g.Jc(9,y,1,5,"yogagainv2-dyanamic-page",2),g.jc(10,"async"),g.Vb(),g.Vb(),g.Vb()),2&e&&(g.Db(5),g.Mc(t.title),g.Db(4),g.rc("ngIf",g.kc(10,2,t.clear)))},directives:[r.y,r.fb,r.j,r.L,r.db,r.s,v.a,v.d,a.m,w.a],pipes:[a.b],styles:[""]}),E),C=n("hVaU"),x=n("4pxM"),N=n("IZvt"),S=[{path:"",component:T}],_=((k=function e(){_classCallCheck(this,e)}).\u0275mod=g.Ob({type:k}),k.\u0275inj=g.Nb({factory:function(e){return new(e||k)},imports:[[a.c,i.i,r.gb,C.a,x.a,N.a,o.k.forChild(S)]]}),k)}}]);